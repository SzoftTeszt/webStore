"use strict";(self.webpackChunkkepfeltoltes=self.webpackChunkkepfeltoltes||[]).push([[179],{58:(ki,In,ke)=>{ke.d(In,{BH:()=>It,DV:()=>M,Dv:()=>Et,GJ:()=>un,L:()=>Ye,LL:()=>H,Pz:()=>qe,Sg:()=>si,UG:()=>Y,UI:()=>ee,US:()=>Wt,Wj:()=>pi,Wl:()=>we,Yr:()=>Nr,ZB:()=>ge,ZR:()=>X,aH:()=>Ot,b$:()=>ln,cI:()=>me,dS:()=>ts,eu:()=>j,g5:()=>$,gK:()=>Lt,gQ:()=>hn,h$:()=>Pn,hl:()=>V,hu:()=>Te,jU:()=>Ht,lb:()=>oi,m9:()=>zo,ne:()=>fi,p$:()=>re,pd:()=>dn,r3:()=>P,ru:()=>$t,tV:()=>J,uI:()=>An,ug:()=>ns,vZ:()=>le,w1:()=>Xi,w9:()=>kn,xO:()=>vt,xb:()=>U,z$:()=>Ue,zd:()=>Qe});const b={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Te=function(I,C){if(!I)throw $(C)},$=function(I){return new Error("Firebase Database ("+b.SDK_VERSION+") INTERNAL ASSERT FAILED: "+I)},Me=function(I){const C=[];let S=0;for(let z=0;z<I.length;z++){let k=I.charCodeAt(z);k<128?C[S++]=k:k<2048?(C[S++]=k>>6|192,C[S++]=63&k|128):55296==(64512&k)&&z+1<I.length&&56320==(64512&I.charCodeAt(z+1))?(k=65536+((1023&k)<<10)+(1023&I.charCodeAt(++z)),C[S++]=k>>18|240,C[S++]=k>>12&63|128,C[S++]=k>>6&63|128,C[S++]=63&k|128):(C[S++]=k>>12|224,C[S++]=k>>6&63|128,C[S++]=63&k|128)}return C},Wt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(I,C){if(!Array.isArray(I))throw Error("encodeByteArray takes an array as a parameter");this.init_();const S=C?this.byteToCharMapWebSafe_:this.byteToCharMap_,z=[];for(let k=0;k<I.length;k+=3){const W=I[k],xe=k+1<I.length,Ze=xe?I[k+1]:0,ft=k+2<I.length,Xt=ft?I[k+2]:0;let zn=(15&Ze)<<2|Xt>>6,Vt=63&Xt;ft||(Vt=64,xe||(zn=64)),z.push(S[W>>2],S[(3&W)<<4|Ze>>4],S[zn],S[Vt])}return z.join("")},encodeString(I,C){return this.HAS_NATIVE_SUPPORT&&!C?btoa(I):this.encodeByteArray(Me(I),C)},decodeString(I,C){return this.HAS_NATIVE_SUPPORT&&!C?atob(I):function(I){const C=[];let S=0,z=0;for(;S<I.length;){const k=I[S++];if(k<128)C[z++]=String.fromCharCode(k);else if(k>191&&k<224){const W=I[S++];C[z++]=String.fromCharCode((31&k)<<6|63&W)}else if(k>239&&k<365){const ft=((7&k)<<18|(63&I[S++])<<12|(63&I[S++])<<6|63&I[S++])-65536;C[z++]=String.fromCharCode(55296+(ft>>10)),C[z++]=String.fromCharCode(56320+(1023&ft))}else{const W=I[S++],xe=I[S++];C[z++]=String.fromCharCode((15&k)<<12|(63&W)<<6|63&xe)}}return C.join("")}(this.decodeStringToByteArray(I,C))},decodeStringToByteArray(I,C){this.init_();const S=C?this.charToByteMapWebSafe_:this.charToByteMap_,z=[];for(let k=0;k<I.length;){const W=S[I.charAt(k++)],Ze=k<I.length?S[I.charAt(k)]:0;++k;const Xt=k<I.length?S[I.charAt(k)]:64;++k;const ve=k<I.length?S[I.charAt(k)]:64;if(++k,null==W||null==Ze||null==Xt||null==ve)throw new Qt;z.push(W<<2|Ze>>4),64!==Xt&&(z.push(Ze<<4&240|Xt>>2),64!==ve&&z.push(Xt<<6&192|ve))}return z},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let I=0;I<this.ENCODED_VALS.length;I++)this.byteToCharMap_[I]=this.ENCODED_VALS.charAt(I),this.charToByteMap_[this.byteToCharMap_[I]]=I,this.byteToCharMapWebSafe_[I]=this.ENCODED_VALS_WEBSAFE.charAt(I),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[I]]=I,I>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(I)]=I,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(I)]=I)}}};class Qt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pn=function(I){const C=Me(I);return Wt.encodeByteArray(C,!0)},Ye=function(I){return Pn(I).replace(/\./g,"")},J=function(I){try{return Wt.decodeString(I,!0)}catch(C){console.error("base64Decode failed: ",C)}return null};function re(I){return ge(void 0,I)}function ge(I,C){if(!(C instanceof Object))return C;switch(C.constructor){case Date:return new Date(C.getTime());case Object:void 0===I&&(I={});break;case Array:I=[];break;default:return C}for(const S in C)!C.hasOwnProperty(S)||!ze(S)||(I[S]=ge(I[S],C[S]));return I}function ze(I){return"__proto__"!==I}const je=()=>{try{return function gt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const I=process.env.__FIREBASE_DEFAULTS__;return I?JSON.parse(I):void 0})()||(()=>{if(typeof document>"u")return;let I;try{I=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const C=I&&J(I[1]);return C&&JSON.parse(C)})()}catch(I){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${I}`)}},Ot=()=>{var I;return null===(I=je())||void 0===I?void 0:I.config},qe=I=>{var C;return null===(C=je())||void 0===C?void 0:C[`_${I}`]};class It{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((C,S)=>{this.resolve=C,this.reject=S})}wrapCallback(C){return(S,z)=>{S?this.reject(S):this.resolve(z),"function"==typeof C&&(this.promise.catch(()=>{}),1===C.length?C(S):C(S,z))}}}function si(I,C){if(I.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const z=C||"demo-project",k=I.iat||0,W=I.sub||I.user_id;if(!W)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const xe=Object.assign({iss:`https://securetoken.google.com/${z}`,aud:z,iat:k,exp:k+3600,auth_time:k,sub:W,user_id:W,firebase:{sign_in_provider:"custom",identities:{}}},I);return[Ye(JSON.stringify({alg:"none",type:"JWT"})),Ye(JSON.stringify(xe)),""].join(".")}function Ue(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function An(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function Y(){var I;const C=null===(I=je())||void 0===I?void 0:I.forceEnvironment;if("node"===C)return!0;if("browser"===C)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ht(){return"object"==typeof self&&self.self===self}function $t(){const I="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof I&&void 0!==I.id}function ln(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xi(){const I=Ue();return I.indexOf("MSIE ")>=0||I.indexOf("Trident/")>=0}function Nr(){return!0===b.NODE_CLIENT||!0===b.NODE_ADMIN}function V(){try{return"object"==typeof indexedDB}catch{return!1}}function j(){return new Promise((I,C)=>{try{let S=!0;const z="validate-browser-context-for-indexeddb-analytics-module",k=self.indexedDB.open(z);k.onsuccess=()=>{k.result.close(),S||self.indexedDB.deleteDatabase(z),I(!0)},k.onupgradeneeded=()=>{S=!1},k.onerror=()=>{var W;C((null===(W=k.error)||void 0===W?void 0:W.message)||"")}}catch(S){C(S)}})}class X extends Error{constructor(C,S,z){super(S),this.code=C,this.customData=z,this.name="FirebaseError",Object.setPrototypeOf(this,X.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,H.prototype.create)}}class H{constructor(C,S,z){this.service=C,this.serviceName=S,this.errors=z}create(C,...S){const z=S[0]||{},k=`${this.service}/${C}`,W=this.errors[C],xe=W?function ue(I,C){return I.replace(tt,(S,z)=>{const k=C[z];return null!=k?String(k):`<${z}?>`})}(W,z):"Error";return new X(k,`${this.serviceName}: ${xe} (${k}).`,z)}}const tt=/\{\$([^}]+)}/g;function me(I){return JSON.parse(I)}function we(I){return JSON.stringify(I)}const ht=function(I){let C={},S={},z={},k="";try{const W=I.split(".");C=me(J(W[0])||""),S=me(J(W[1])||""),k=W[2],z=S.d||{},delete S.d}catch{}return{header:C,claims:S,data:z,signature:k}},kn=function(I){const S=ht(I).claims;return!!S&&"object"==typeof S&&S.hasOwnProperty("iat")},un=function(I){const C=ht(I).claims;return"object"==typeof C&&!0===C.admin};function P(I,C){return Object.prototype.hasOwnProperty.call(I,C)}function M(I,C){if(Object.prototype.hasOwnProperty.call(I,C))return I[C]}function U(I){for(const C in I)if(Object.prototype.hasOwnProperty.call(I,C))return!1;return!0}function ee(I,C,S){const z={};for(const k in I)Object.prototype.hasOwnProperty.call(I,k)&&(z[k]=C.call(S,I[k],k,I));return z}function le(I,C){if(I===C)return!0;const S=Object.keys(I),z=Object.keys(C);for(const k of S){if(!z.includes(k))return!1;const W=I[k],xe=C[k];if(se(W)&&se(xe)){if(!le(W,xe))return!1}else if(W!==xe)return!1}for(const k of z)if(!S.includes(k))return!1;return!0}function se(I){return null!==I&&"object"==typeof I}function vt(I){const C=[];for(const[S,z]of Object.entries(I))Array.isArray(z)?z.forEach(k=>{C.push(encodeURIComponent(S)+"="+encodeURIComponent(k))}):C.push(encodeURIComponent(S)+"="+encodeURIComponent(z));return C.length?"&"+C.join("&"):""}function Qe(I){const C={};return I.replace(/^\?/,"").split("&").forEach(z=>{if(z){const[k,W]=z.split("=");C[decodeURIComponent(k)]=decodeURIComponent(W)}}),C}function dn(I){const C=I.indexOf("?");if(!C)return"";const S=I.indexOf("#",C);return I.substring(C,S>0?S:void 0)}class hn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let C=1;C<this.blockSize;++C)this.pad_[C]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(C,S){S||(S=0);const z=this.W_;if("string"==typeof C)for(let ve=0;ve<16;ve++)z[ve]=C.charCodeAt(S)<<24|C.charCodeAt(S+1)<<16|C.charCodeAt(S+2)<<8|C.charCodeAt(S+3),S+=4;else for(let ve=0;ve<16;ve++)z[ve]=C[S]<<24|C[S+1]<<16|C[S+2]<<8|C[S+3],S+=4;for(let ve=16;ve<80;ve++){const zn=z[ve-3]^z[ve-8]^z[ve-14]^z[ve-16];z[ve]=4294967295&(zn<<1|zn>>>31)}let Xt,jn,k=this.chain_[0],W=this.chain_[1],xe=this.chain_[2],Ze=this.chain_[3],ft=this.chain_[4];for(let ve=0;ve<80;ve++){ve<40?ve<20?(Xt=Ze^W&(xe^Ze),jn=1518500249):(Xt=W^xe^Ze,jn=1859775393):ve<60?(Xt=W&xe|Ze&(W|xe),jn=2400959708):(Xt=W^xe^Ze,jn=3395469782);const zn=(k<<5|k>>>27)+Xt+ft+jn+z[ve]&4294967295;ft=Ze,Ze=xe,xe=4294967295&(W<<30|W>>>2),W=k,k=zn}this.chain_[0]=this.chain_[0]+k&4294967295,this.chain_[1]=this.chain_[1]+W&4294967295,this.chain_[2]=this.chain_[2]+xe&4294967295,this.chain_[3]=this.chain_[3]+Ze&4294967295,this.chain_[4]=this.chain_[4]+ft&4294967295}update(C,S){if(null==C)return;void 0===S&&(S=C.length);const z=S-this.blockSize;let k=0;const W=this.buf_;let xe=this.inbuf_;for(;k<S;){if(0===xe)for(;k<=z;)this.compress_(C,k),k+=this.blockSize;if("string"==typeof C){for(;k<S;)if(W[xe]=C.charCodeAt(k),++xe,++k,xe===this.blockSize){this.compress_(W),xe=0;break}}else for(;k<S;)if(W[xe]=C[k],++xe,++k,xe===this.blockSize){this.compress_(W),xe=0;break}}this.inbuf_=xe,this.total_+=S}digest(){const C=[];let S=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let k=this.blockSize-1;k>=56;k--)this.buf_[k]=255&S,S/=256;this.compress_(this.buf_);let z=0;for(let k=0;k<5;k++)for(let W=24;W>=0;W-=8)C[z]=this.chain_[k]>>W&255,++z;return C}}function fi(I,C){const S=new Fi(I,C);return S.subscribe.bind(S)}class Fi{constructor(C,S){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=S,this.task.then(()=>{C(this)}).catch(z=>{this.error(z)})}next(C){this.forEachObserver(S=>{S.next(C)})}error(C){this.forEachObserver(S=>{S.error(C)}),this.close(C)}complete(){this.forEachObserver(C=>{C.complete()}),this.close()}subscribe(C,S,z){let k;if(void 0===C&&void 0===S&&void 0===z)throw new Error("Missing Observer.");k=function Fn(I,C){if("object"!=typeof I||null===I)return!1;for(const S of C)if(S in I&&"function"==typeof I[S])return!0;return!1}(C,["next","error","complete"])?C:{next:C,error:S,complete:z},void 0===k.next&&(k.next=wt),void 0===k.error&&(k.error=wt),void 0===k.complete&&(k.complete=wt);const W=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?k.error(this.finalError):k.complete()}catch{}}),this.observers.push(k),W}unsubscribeOne(C){void 0===this.observers||void 0===this.observers[C]||(delete this.observers[C],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(C){if(!this.finalized)for(let S=0;S<this.observers.length;S++)this.sendOne(S,C)}sendOne(C,S){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[C])try{S(this.observers[C])}catch(z){typeof console<"u"&&console.error&&console.error(z)}})}close(C){this.finalized||(this.finalized=!0,void 0!==C&&(this.finalError=C),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wt(){}const Et=function(I,C,S,z){let k;if(z<C?k="at least "+C:z>S&&(k=0===S?"none":"no more than "+S),k)throw new Error(I+" failed: Was called with "+z+(1===z?" argument.":" arguments.")+" Expects "+k+".")};function Lt(I,C){return`${I} failed: ${C} argument `}function pi(I,C,S,z){if((!z||S)&&"function"!=typeof S)throw new Error(Lt(I,C)+"must be a valid function.")}function oi(I,C,S,z){if((!z||S)&&("object"!=typeof S||null===S))throw new Error(Lt(I,C)+"must be a valid context object.")}const ts=function(I){const C=[];let S=0;for(let z=0;z<I.length;z++){let k=I.charCodeAt(z);if(k>=55296&&k<=56319){const W=k-55296;z++,Te(z<I.length,"Surrogate pair missing trail surrogate."),k=65536+(W<<10)+(I.charCodeAt(z)-56320)}k<128?C[S++]=k:k<2048?(C[S++]=k>>6|192,C[S++]=63&k|128):k<65536?(C[S++]=k>>12|224,C[S++]=k>>6&63|128,C[S++]=63&k|128):(C[S++]=k>>18|240,C[S++]=k>>12&63|128,C[S++]=k>>6&63|128,C[S++]=63&k|128)}return C},ns=function(I){let C=0;for(let S=0;S<I.length;S++){const z=I.charCodeAt(S);z<128?C++:z<2048?C+=2:z>=55296&&z<=56319?(C+=4,S++):C+=3}return C};function zo(I){return I&&I._delegate?I._delegate:I}},468:(ki,In,ke)=>{function b(e){return"function"==typeof e}function Te(e){const t=e(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const $=Te(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Me(e,n){if(e){const t=e.indexOf(n);0<=t&&e.splice(t,1)}}class et{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(b(i))try{i()}catch(s){n=s instanceof $?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{Pn(s)}catch(o){n=n??[],o instanceof $?n=[...n,...o.errors]:n.push(o)}}if(n)throw new $(n)}}add(n){var t;if(n&&n!==this)if(this.closed)Pn(n);else{if(n instanceof et){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(n)}}_hasParent(n){const{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){const{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&Me(t,n)}remove(n){const{_finalizers:t}=this;t&&Me(t,n),n instanceof et&&n._removeParent(this)}}et.EMPTY=(()=>{const e=new et;return e.closed=!0,e})();const Wt=et.EMPTY;function Qt(e){return e instanceof et||e&&"closed"in e&&b(e.remove)&&b(e.add)&&b(e.unsubscribe)}function Pn(e){b(e)?e():e.unsubscribe()}const Ye={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},J={setTimeout(e,n,...t){const{delegate:i}=J;return i?.setTimeout?i.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){const{delegate:n}=J;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function re(e){J.setTimeout(()=>{const{onUnhandledError:n}=Ye;if(!n)throw e;n(e)})}function ge(){}const ze=mt("C",void 0,void 0);function mt(e,n,t){return{kind:e,value:n,error:t}}let Oe=null;function je(e){if(Ye.useDeprecatedSynchronousErrorHandling){const n=!Oe;if(n&&(Oe={errorThrown:!1,error:null}),e(),n){const{errorThrown:t,error:i}=Oe;if(Oe=null,t)throw i}}else e()}class Nn extends et{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,Qt(n)&&n.add(this)):this.destination=Ht}static create(n,t,i){return new si(n,t,i)}next(n){this.isStopped?Y(function an(e){return mt("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?Y(function gt(e){return mt("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?Y(ze,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ot=Function.prototype.bind;function qe(e,n){return Ot.call(e,n)}class It{constructor(n){this.partialObserver=n}next(n){const{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(i){Ue(i)}}error(n){const{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(i){Ue(i)}else Ue(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){Ue(t)}}}class si extends Nn{constructor(n,t,i){let r;if(super(),b(n)||!n)r={next:n??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&Ye.useDeprecatedNextContext?(s=Object.create(n),s.unsubscribe=()=>this.unsubscribe(),r={next:n.next&&qe(n.next,s),error:n.error&&qe(n.error,s),complete:n.complete&&qe(n.complete,s)}):r=n}this.destination=new It(r)}}function Ue(e){Ye.useDeprecatedSynchronousErrorHandling?function Sn(e){Ye.useDeprecatedSynchronousErrorHandling&&Oe&&(Oe.errorThrown=!0,Oe.error=e)}(e):re(e)}function Y(e,n){const{onStoppedNotification:t}=Ye;t&&J.setTimeout(()=>t(e,n))}const Ht={closed:!0,next:ge,error:function An(e){throw e},complete:ge},$t="function"==typeof Symbol&&Symbol.observable||"@@observable";function ln(e){return e}function Xi(e){return 0===e.length?ln:1===e.length?e[0]:function(t){return e.reduce((i,r)=>r(i),t)}}let He=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new e;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function V(e){return e&&e instanceof Nn||function er(e){return e&&b(e.next)&&b(e.error)&&b(e.complete)}(e)&&Qt(e)}(t)?t:new si(t,i,r);return je(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=Nr(i))((r,s)=>{const o=new si({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[$t](){return this}pipe(...t){return Xi(t)(this)}toPromise(t){return new(t=Nr(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return e.create=n=>new e(n),e})();function Nr(e){var n;return null!==(n=e??Ye.Promise)&&void 0!==n?n:Promise}const j=Te(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let L=(()=>{class e extends He{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new q(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new j}next(t){je(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){je(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){je(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?Wt:(this.currentObservers=null,s.push(t),new et(()=>{this.currentObservers=null,Me(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new He;return t.source=this,t}}return e.create=(n,t)=>new q(n,t),e})();class q extends L{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,n)}error(n){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,n)}complete(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)}_subscribe(n){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==i?i:Wt}}function X(e){return b(e?.lift)}function H(e){return n=>{if(X(n))return n.lift(function(t){try{return e(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(e,n,t,i,r){return new tt(e,n,t,i,r)}class tt extends Nn{constructor(n,t,i,r,s,o){super(n),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){n.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){n.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function me(e,n){return H((t,i)=>{let r=0;t.subscribe(ue(i,s=>{i.next(e.call(n,s,r++))}))})}var we=ke(582);const ht=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function zt(e){return b(e?.then)}function St(e){return b(e[$t])}function kn(e){return Symbol.asyncIterator&&b(e?.[Symbol.asyncIterator])}function un(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const M=function P(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function U(e){return b(e?.[M])}function ee(e){return(0,we.FC)(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:i,done:r}=yield(0,we.qq)(t.read());if(r)return yield(0,we.qq)(void 0);yield yield(0,we.qq)(i)}}finally{t.releaseLock()}})}function le(e){return b(e?.getReader)}function se(e){if(e instanceof He)return e;if(null!=e){if(St(e))return function Jt(e){return new He(n=>{const t=e[$t]();if(b(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(ht(e))return function vt(e){return new He(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}(e);if(zt(e))return function Qe(e){return new He(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,re)})}(e);if(kn(e))return hn(e);if(U(e))return function dn(e){return new He(n=>{for(const t of e)if(n.next(t),n.closed)return;n.complete()})}(e);if(le(e))return function fi(e){return hn(ee(e))}(e)}throw un(e)}function hn(e){return new He(n=>{(function Fi(e,n){var t,i,r,s;return(0,we.mG)(this,void 0,void 0,function*(){try{for(t=(0,we.KL)(e);!(i=yield t.next()).done;)if(n.next(i.value),n.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}n.complete()})})(e,n).catch(t=>n.error(t))})}function Rn(e,n,t,i=0,r=!1){const s=n.schedule(function(){t(),r?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(s),!r)return s}function wt(e,n,t=1/0){return b(n)?wt((i,r)=>me((s,o)=>n(i,s,r,o))(se(e(i,r))),t):("number"==typeof n&&(t=n),H((i,r)=>function Fn(e,n,t,i,r,s,o,a){const l=[];let d=0,p=0,g=!1;const _=()=>{g&&!l.length&&!d&&n.complete()},v=T=>d<i?w(T):l.push(T),w=T=>{s&&n.next(T),d++;let A=!1;se(t(T,p++)).subscribe(ue(n,B=>{r?.(B),s?v(B):n.next(B)},()=>{A=!0},void 0,()=>{if(A)try{for(d--;l.length&&d<i;){const B=l.shift();o?Rn(n,o,()=>w(B)):w(B)}_()}catch(B){n.error(B)}}))};return e.subscribe(ue(n,v,()=>{g=!0,_()})),()=>{a?.()}}(i,r,e,t)))}function Et(e=1/0){return wt(ln,e)}const Lt=new He(e=>e.complete());function oi(e){return e&&b(e.schedule)}function ts(e){return e[e.length-1]}function ns(e){return b(ts(e))?e.pop():void 0}function Ms(e){return oi(ts(e))?e.pop():void 0}function ai(e,n=0){return H((t,i)=>{t.subscribe(ue(i,r=>Rn(i,e,()=>i.next(r),n),()=>Rn(i,e,()=>i.complete(),n),r=>Rn(i,e,()=>i.error(r),n)))})}function Ii(e,n=0){return H((t,i)=>{i.add(e.schedule(()=>t.subscribe(i),n))})}function zo(e,n){if(!e)throw new Error("Iterable cannot be null");return new He(t=>{Rn(t,n,()=>{const i=e[Symbol.asyncIterator]();Rn(t,n,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function S(e,n){return n?function C(e,n){if(null!=e){if(St(e))return function Os(e,n){return se(e).pipe(Ii(n),ai(n))}(e,n);if(ht(e))return function pc(e,n){return new He(t=>{let i=0;return n.schedule(function(){i===e.length?t.complete():(t.next(e[i++]),t.closed||this.schedule())})})}(e,n);if(zt(e))return function Wo(e,n){return se(e).pipe(Ii(n),ai(n))}(e,n);if(kn(e))return zo(e,n);if(U(e))return function Ha(e,n){return new He(t=>{let i;return Rn(t,n,()=>{i=e[M](),Rn(t,n,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>b(i?.return)&&i.return()})}(e,n);if(le(e))return function I(e,n){return zo(ee(e),n)}(e,n)}throw un(e)}(e,n):se(e)}function z(...e){const n=Ms(e),t=function Go(e,n){return"number"==typeof ts(e)?e.pop():n}(e,1/0),i=e;return i.length?1===i.length?se(i[0]):Et(t)(S(i,n)):Lt}class k extends L{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:i}=this;if(n)throw t;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}}function W(...e){return S(e,Ms(e))}function xe(e={}){const{connector:n=(()=>new L),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=e;return s=>{let o,a,l,d=0,p=!1,g=!1;const _=()=>{a?.unsubscribe(),a=void 0},v=()=>{_(),o=l=void 0,p=g=!1},w=()=>{const T=o;v(),T?.unsubscribe()};return H((T,A)=>{d++,!g&&!p&&_();const B=l=l??n();A.add(()=>{d--,0===d&&!g&&!p&&(a=Ze(w,r))}),B.subscribe(A),!o&&d>0&&(o=new si({next:R=>B.next(R),error:R=>{g=!0,_(),a=Ze(v,t,R),B.error(R)},complete:()=>{p=!0,_(),a=Ze(v,i),B.complete()}}),se(T).subscribe(o))})(s)}}function Ze(e,n,...t){if(!0===n)return void e();if(!1===n)return;const i=new si({next:()=>{i.unsubscribe(),e()}});return se(n(...t)).subscribe(i)}function ft(e,n){return H((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(ue(i,l=>{r?.unsubscribe();let d=0;const p=s++;se(e(l,p)).subscribe(r=ue(i,g=>i.next(n?n(l,g,p,d++):g),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Xt(e,n=ln){return e=e??jn,H((t,i)=>{let r,s=!0;t.subscribe(ue(i,o=>{const a=n(o);(s||!e(r,a))&&(s=!1,r=a,i.next(o))}))})}function jn(e,n){return e===n}function ve(e){for(let n in e)if(e[n]===ve)return n;throw Error("Could not find renamed property on target object.")}function Vt(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Vt).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}function Ar(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const gc=ve({__forward_ref__:ve});function F(e){return e.__forward_ref__=F,e.toString=function(){return Vt(this())},e}function N(e){return ie(e)?e():e}function ie(e){return"function"==typeof e&&e.hasOwnProperty(gc)&&e.__forward_ref__===F}function De(e){return e&&!!e.\u0275providers}const Je="https://g.co/ng/security#xss";class G extends Error{constructor(n,t){super(function Mn(e,n){return`NG0${Math.abs(e)}${n?": "+n:""}`}(n,t)),this.code=n}}function be(e){return"string"==typeof e?e:null==e?"":String(e)}function $a(e,n){throw new G(-201,!1)}function Si(e,n){null==e&&function Ne(e,n,t,i){throw new Error(`ASSERTION ERROR: ${e}`+(null==i?"":` [Expected=> ${t} ${i} ${n} <=Actual]`))}(n,e,null,"!=")}function he(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function yt(e){return{providers:e.providers||[],imports:e.imports||[]}}function Ga(e){return Cd(e,Wa)||Cd(e,Up)}function Cd(e,n){return e.hasOwnProperty(n)?e[n]:null}function is(e){return e&&(e.hasOwnProperty(za)||e.hasOwnProperty(Td))?e[za]:null}const Wa=ve({\u0275prov:ve}),za=ve({\u0275inj:ve}),Up=ve({ngInjectableDef:ve}),Td=ve({ngInjectorDef:ve});var rt=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(rt||{});let qa;function li(e){const n=qa;return qa=e,n}function Hp(e,n,t){const i=Ga(e);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&rt.Optional?null:void 0!==n?n:void $a(Vt(e))}const Nt=globalThis;class de{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=he({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Vi={},Qa="__NG_DI_FLAG__",_c="ngTempTokenPath",cy=/\n/gm,Zp="__source";let Ps;function Mr(e){const n=Ps;return Ps=e,n}function dy(e,n=rt.Default){if(void 0===Ps)throw new G(-203,!1);return null===Ps?Hp(e,void 0,n):Ps.get(e,n&rt.Optional?null:void 0,n)}function te(e,n=rt.Default){return(function jp(){return qa}()||dy)(N(e),n)}function oe(e,n=rt.Default){return te(e,yc(n))}function yc(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Nd(e){const n=[];for(let t=0;t<e.length;t++){const i=N(e[t]);if(Array.isArray(i)){if(0===i.length)throw new G(900,!1);let r,s=rt.Default;for(let o=0;o<i.length;o++){const a=i[o],l=KC(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}n.push(te(r,s))}else n.push(te(i))}return n}function rs(e,n){return e[Qa]=n,e.prototype[Qa]=n,e}function KC(e){return e[Qa]}function Ni(e){return{toString:e}.toString()}var os=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(os||{}),tr=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(tr||{});const gr={},_t=[],bc=ve({\u0275cmp:ve}),ks=ve({\u0275dir:ve}),Rd=ve({\u0275pipe:ve}),Ja=ve({\u0275mod:ve}),Or=ve({\u0275fac:ve}),Zo=ve({__NG_ELEMENT_ID__:ve}),wc=ve({__NG_ENV_ID__:ve});function Bi(e,n,t){let i=e.length;for(;;){const r=e.indexOf(n,t);if(-1===r)return r;if(0===r||e.charCodeAt(r-1)<=32){const s=n.length;if(r+s===i||e.charCodeAt(r+s)<=32)return r}t=r+1}}function Ec(e,n,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];e.setAttribute(n,o,a,s)}else{const s=r,o=t[++i];Dc(s)?e.setProperty(n,s,o):e.setAttribute(n,s,o),i++}}return i}function Kp(e){return 3===e||4===e||6===e}function Dc(e){return 64===e.charCodeAt(0)}function Fs(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let i=0;i<n.length;i++){const r=n[i];"number"==typeof r?t=r:0===t||Md(e,t,r,null,-1===t||2===t?n[++i]:null)}}return e}function Md(e,n,t,i,r){let s=0,o=e.length;if(-1===n)o=-1;else for(;s<e.length;){const a=e[s++];if("number"==typeof a){if(a===n){o=-1;break}if(a>n){o=s-1;break}}}for(;s<e.length;){const a=e[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(e[s+1]=r));if(i===e[s+1])return void(e[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(e.splice(o,0,n),s=o+1),e.splice(s++,0,t),null!==i&&e.splice(s++,0,i),null!==r&&e.splice(s++,0,r)}const Od="ng-template";function hy(e,n,t){let i=0,r=!0;for(;i<e.length;){let s=e[i++];if("string"==typeof s&&r){const o=e[i++];if(t&&"class"===s&&-1!==Bi(o.toLowerCase(),n,0))return!0}else{if(1===s){for(;i<e.length&&"string"==typeof(s=e[i++]);)if(s.toLowerCase()===n)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function Cc(e){return 4===e.type&&e.value!==Od}function xd(e,n,t){return n===(4!==e.type||t?e.value:Od)}function Pd(e,n,t){let i=4;const r=e.attrs||[],s=function Yp(e){for(let n=0;n<e.length;n++)if(Kp(e[n]))return n;return e.length}(r);let o=!1;for(let a=0;a<n.length;a++){const l=n[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!xd(e,l,t)||""===l&&1===n.length){if(Ai(i))return!1;o=!0}}else{const d=8&i?l:n[++a];if(8&i&&null!==e.attrs){if(!hy(e.attrs,d,t)){if(Ai(i))return!1;o=!0}continue}const g=kd(8&i?"class":l,r,Cc(e),t);if(-1===g){if(Ai(i))return!1;o=!0;continue}if(""!==d){let _;_=g>s?"":r[g+1].toLowerCase();const v=8&i?_:null;if(v&&-1!==Bi(v,d,0)||2&i&&d!==_){if(Ai(i))return!1;o=!0}}}}else{if(!o&&!Ai(i)&&!Ai(l))return!1;if(o&&Ai(l))continue;o=!1,i=l|1&i}}return Ai(i)||o}function Ai(e){return 0==(1&e)}function kd(e,n,t,i){if(null===n)return-1;let r=0;if(i||!t){let s=!1;for(;r<n.length;){const o=n[r];if(o===e)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=n[++r];for(;"string"==typeof a;)a=n[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function Vd(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const i=e[t];if("number"==typeof i)return-1;if(i===n)return t;t++}return-1}(n,e)}function Fd(e,n,t=!1){for(let i=0;i<n.length;i++)if(Pd(e,n[i],t))return!0;return!1}function Tc(e,n){e:for(let t=0;t<n.length;t++){const i=n[t];if(e.length===i.length){for(let r=0;r<e.length;r++)if(e[r]!==i[r])continue e;return!0}}return!1}function Ic(e,n){return e?":not("+n.trim()+")":n}function Qp(e){let n=e[0],t=1,i=2,r="",s=!1;for(;t<e.length;){let o=e[t];if("string"==typeof o)if(2&i){const a=e[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Ai(o)&&(n+=Ic(s,r),r=""),i=o,s=s||!Ai(i);t++}return""!==r&&(n+=Ic(s,r)),n}function qn(e){return Ni(()=>{const n=Nc(e),t={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===os.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||tr.Emulated,styles:e.styles||_t,_:null,schemas:e.schemas||null,tView:null,id:""};Xp(t);const i=e.dependencies;return t.directiveDefs=Ko(i,!1),t.pipeDefs=Ko(i,!0),t.id=function jd(e){let n=0;const t=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const r of t)n=Math.imul(31,n)+r.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(t),t})}function Ud(e){return ct(e)||Ln(e)}function py(e){return null!==e}function bt(e){return Ni(()=>({type:e.type,bootstrap:e.bootstrap||_t,declarations:e.declarations||_t,imports:e.imports||_t,exports:e.exports||_t,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Sc(e,n){if(null==e)return gr;const t={};for(const i in e)if(e.hasOwnProperty(i)){let r=e[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,n&&(n[r]=s)}return t}function ae(e){return Ni(()=>{const n=Nc(e);return Xp(n),n})}function ct(e){return e[bc]||null}function Ln(e){return e[ks]||null}function gi(e){return e[Rd]||null}function Ui(e,n){const t=e[Ja]||null;if(!t&&!0===n)throw new Error(`Type ${Vt(e)} does not have '\u0275mod' property.`);return t}function Nc(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||gr,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||_t,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Sc(e.inputs,n),outputs:Sc(e.outputs)}}function Xp(e){e.features?.forEach(n=>n(e))}function Ko(e,n){if(!e)return null;const t=n?gi:Ud;return()=>("function"==typeof e?e():e).map(i=>t(i)).filter(py)}const fn=0,pe=1,$e=2,Gt=3,mr=4,el=5,Hn=6,Yo=7,vn=8,xr=9,Qo=10,Pe=11,tl=12,Ac=13,Jo=14,cn=15,nl=16,Vs=17,Pr=18,mo=19,tg=20,kr=21,as=22,il=23,Xo=24,Xe=25,Bs=1,Hd=2,Fr=7,ea=9,Kn=11;function ji(e){return Array.isArray(e)&&"object"==typeof e[Bs]}function Ri(e){return Array.isArray(e)&&!0===e[Bs]}function sl(e){return 0!=(4&e.flags)}function _o(e){return e.componentOffset>-1}function Mc(e){return 1==(1&e.flags)}function Lr(e){return!!e.template}function ng(e){return 0!=(512&e[$e])}function Vr(e,n){return e.hasOwnProperty(Or)?e[Or]:null}let Yn=null,Us=!1;function nr(e){const n=Yn;return Yn=e,n}const yn={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Oc(e){if(!Hs(e)||e.dirty){if(!e.producerMustRecompute(e)&&!ug(e))return void(e.dirty=!1);e.producerRecomputeValue(e),e.dirty=!1}}function cg(e){e.dirty=!0,function lg(e){if(void 0===e.liveConsumerNode)return;const n=Us;Us=!0;try{for(const t of e.liveConsumerNode)t.dirty||cg(t)}finally{Us=n}}(e),e.consumerMarkedDirty?.(e)}function zd(e){return e&&(e.nextProducerIndex=0),nr(e)}function xc(e,n){if(nr(n),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(Hs(e))for(let t=e.nextProducerIndex;t<e.producerNode.length;t++)js(e.producerNode[t],e.producerIndexOfThis[t]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function ug(e){na(e);for(let n=0;n<e.producerNode.length;n++){const t=e.producerNode[n],i=e.producerLastReadVersion[n];if(i!==t.version||(Oc(t),i!==t.version))return!0}return!1}function al(e){if(na(e),Hs(e))for(let n=0;n<e.producerNode.length;n++)js(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function js(e,n){if(function Pc(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),na(e),1===e.liveConsumerNode.length)for(let i=0;i<e.producerNode.length;i++)js(e.producerNode[i],e.producerIndexOfThis[i]);const t=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[t],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[t],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){const i=e.liveConsumerIndexOfThis[n],r=e.liveConsumerNode[n];na(r),r.producerIndexOfThis[i]=n}}function Hs(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function na(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let fg=null;const mg=()=>{},wy=(()=>({...yn,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{e.schedule(e.ref)},hasRun:!1,cleanupFn:mg}))();class Ey{constructor(n,t,i){this.previousValue=n,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function $n(){return _g}function _g(e){return e.type.prototype.ngOnChanges&&(e.setInput=Cy),Dy}function Dy(){const e=vg(this),n=e?.current;if(n){const t=e.previous;if(t===gr)e.previous=n;else for(let i in n)t[i]=n[i];e.current=null,this.ngOnChanges(n)}}function Cy(e,n,t,i){const r=this.declaredInputs[t],s=vg(e)||function Yd(e,n){return e[Fc]=n}(e,{previous:gr,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new Ey(l&&l.currentValue,n,a===gr),e[i]=n}$n.ngInherit=!0;const Fc="__ngSimpleChanges__";function vg(e){return e[Fc]||null}const Br=function(e,n,t){};function xt(e){for(;Array.isArray(e);)e=e[fn];return e}function ra(e,n){return xt(n[e])}function Gn(e,n){return xt(n[e.index])}function Vc(e,n){return e.data[n]}function Hi(e,n){const t=n[e];return ji(t)?t:t[fn]}function $s(e,n){return null==n?null:e[n]}function bg(e){e[Vs]=0}function th(e){1024&e[$e]||(e[$e]|=1024,Bc(e,1))}function wg(e){1024&e[$e]&&(e[$e]&=-1025,Bc(e,-1))}function Bc(e,n){let t=e[Gt];if(null===t)return;t[el]+=n;let i=t;for(t=t[Gt];null!==t&&(1===n&&1===i[el]||-1===n&&0===i[el]);)t[el]+=n,i=t,t=t[Gt]}const Re={lFrame:Ng(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function jc(){return Re.bindingsEnabled}function Gs(){return null!==Re.skipHydrationRootTNode}function ne(){return Re.lFrame.lView}function ut(){return Re.lFrame.tView}function Vn(){let e=Ig();for(;null!==e&&64===e.type;)e=e.parent;return e}function Ig(){return Re.lFrame.currentTNode}function sr(e,n){const t=Re.lFrame;t.currentTNode=e,t.isParent=n}function sh(){return Re.lFrame.isParent}function dl(){Re.lFrame.isParent=!1}function wo(){return Re.lFrame.bindingIndex++}function Ur(e){const n=Re.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function ch(e,n){const t=Re.lFrame;t.bindingIndex=t.bindingRootIndex=e,uh(n)}function uh(e){Re.lFrame.currentDirectiveIndex=e}function $c(){return Re.lFrame.currentQueryIndex}function hh(e){Re.lFrame.currentQueryIndex=e}function Oy(e){const n=e[pe];return 2===n.type?n.declTNode:1===n.type?e[Hn]:null}function fh(e,n,t){if(t&rt.SkipSelf){let r=n,s=e;for(;!(r=r.parent,null!==r||t&rt.Host||(r=Oy(s),null===r||(s=s[Jo],10&r.type))););if(null===r)return!1;n=r,e=s}const i=Re.lFrame=hl();return i.currentTNode=n,i.lView=e,!0}function ph(e){const n=hl(),t=e[pe];Re.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function hl(){const e=Re.lFrame,n=null===e?null:e.child;return null===n?Ng(e):n}function Ng(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function Ag(){const e=Re.lFrame;return Re.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Rg=Ag;function gh(){const e=Ag();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function mi(){return Re.lFrame.selectedIndex}function Eo(e){Re.lFrame.selectedIndex=e}function qt(){const e=Re.lFrame;return Vc(e.tView,e.selectedIndex)}let mh=!0;function Gc(){return mh}function Ws(e){mh=e}function Wc(e,n){for(let t=n.directiveStart,i=n.directiveEnd;t<i;t++){const s=e.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:d,ngOnDestroy:p}=s;o&&(e.contentHooks??=[]).push(-t,o),a&&((e.contentHooks??=[]).push(t,a),(e.contentCheckHooks??=[]).push(t,a)),l&&(e.viewHooks??=[]).push(-t,l),d&&((e.viewHooks??=[]).push(t,d),(e.viewCheckHooks??=[]).push(t,d)),null!=p&&(e.destroyHooks??=[]).push(t,p)}}function zc(e,n,t){Og(e,n,3,t)}function oa(e,n,t,i){(3&e[$e])===t&&Og(e,n,t,i)}function fl(e,n){let t=e[$e];(3&t)===n&&(t&=8191,t+=1,e[$e]=t)}function Og(e,n,t,i){const s=i??-1,o=n.length-1;let a=0;for(let l=void 0!==i?65535&e[Vs]:0;l<o;l++)if("number"==typeof n[l+1]){if(a=n[l],null!=i&&a>=i)break}else n[l]<0&&(e[Vs]+=65536),(a<s||-1==s)&&(Uy(e,t,n,l),e[Vs]=(4294901760&e[Vs])+l+2),l++}function qc(e,n){Br(4,e,n);const t=nr(null);try{n.call(e)}finally{nr(t),Br(5,e,n)}}function Uy(e,n,t,i){const r=t[i]<0,s=t[i+1],a=e[r?-t[i]:t[i]];r?e[$e]>>13<e[Vs]>>16&&(3&e[$e])===n&&(e[$e]+=8192,qc(a,s)):qc(a,s)}const Do=-1;class pl{constructor(n,t,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function vh(e){return e!==Do}function gl(e){return 32767&e}function ml(e,n){let t=function $y(e){return e>>16}(e),i=n;for(;t>0;)i=i[Jo],t--;return i}let yh=!0;function _l(e){const n=yh;return yh=e,n}const Gy=255,zs=5;let Wy=0;const jr={};function Kc(e,n){const t=Fg(e,n);if(-1!==t)return t;const i=n[pe];i.firstCreatePass&&(e.injectorIndex=n.length,vl(i.data,e),vl(n,null),vl(i.blueprint,null));const r=Yc(e,n),s=e.injectorIndex;if(vh(r)){const o=gl(r),a=ml(r,n),l=a[pe].data;for(let d=0;d<8;d++)n[s+d]=a[o+d]|l[o+d]}return n[s+8]=r,s}function vl(e,n){e.push(0,0,0,0,0,0,0,0,n)}function Fg(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function Yc(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,i=null,r=n;for(;null!==r;){if(i=Hg(r),null===i)return Do;if(t++,r=r[Jo],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return Do}function yl(e,n,t){!function bh(e,n,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Zo)&&(i=t[Zo]),null==i&&(i=t[Zo]=Wy++);const r=i&Gy;n.data[e+(r>>zs)]|=1<<r}(e,n,t)}function Lg(e,n,t){if(t&rt.Optional||void 0!==e)return e;$a()}function Qc(e,n,t,i){if(t&rt.Optional&&void 0===i&&(i=null),!(t&(rt.Self|rt.Host))){const r=e[xr],s=li(void 0);try{return r?r.get(n,i,t&rt.Optional):Hp(n,i,t&rt.Optional)}finally{li(s)}}return Lg(i,0,t)}function Vg(e,n,t,i=rt.Default,r){if(null!==e){if(2048&n[$e]&&!(i&rt.Self)){const o=function Ky(e,n,t,i,r){let s=e,o=n;for(;null!==s&&null!==o&&2048&o[$e]&&!(512&o[$e]);){const a=Bg(s,o,t,i|rt.Self,jr);if(a!==jr)return a;let l=s.parent;if(!l){const d=o[tg];if(d){const p=d.get(t,jr,i);if(p!==jr)return p}l=Hg(o),o=o[Jo]}s=l}return r}(e,n,t,i,jr);if(o!==jr)return o}const s=Bg(e,n,t,i,jr);if(s!==jr)return s}return Qc(n,t,i,r)}function Bg(e,n,t,i,r){const s=function Ug(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(Zo)?e[Zo]:void 0;return"number"==typeof n?n>=0?n&Gy:Zy:n}(t);if("function"==typeof s){if(!fh(n,e,i))return i&rt.Host?Lg(r,0,i):Qc(n,t,i,r);try{let o;if(o=s(i),null!=o||i&rt.Optional)return o;$a()}finally{Rg()}}else if("number"==typeof s){let o=null,a=Fg(e,n),l=Do,d=i&rt.Host?n[cn][Hn]:null;for((-1===a||i&rt.SkipSelf)&&(l=-1===a?Yc(e,n):n[a+8],l!==Do&&jg(i,!1)?(o=n[pe],a=gl(l),n=ml(l,n)):a=-1);-1!==a;){const p=n[pe];if(Xc(s,a,p.data)){const g=qy(a,n,t,o,i,d);if(g!==jr)return g}l=n[a+8],l!==Do&&jg(i,n[pe].data[a+8]===d)&&Xc(s,a,n)?(o=p,a=gl(l),n=ml(l,n)):a=-1}}return r}function qy(e,n,t,i,r,s){const o=n[pe],a=o.data[e+8],p=Jc(a,o,t,null==i?_o(a)&&yh:i!=o&&0!=(3&a.type),r&rt.Host&&s===a);return null!==p?Co(n,o,p,a):jr}function Jc(e,n,t,i,r){const s=e.providerIndexes,o=n.data,a=1048575&s,l=e.directiveStart,p=s>>20,_=r?a+p:e.directiveEnd;for(let v=i?a:a+p;v<_;v++){const w=o[v];if(v<l&&t===w||v>=l&&w.type===t)return v}if(r){const v=o[l];if(v&&Lr(v)&&v.type===t)return l}return null}function Co(e,n,t,i){let r=e[t];const s=n.data;if(function _h(e){return e instanceof pl}(r)){const o=r;o.resolving&&function qo(e,n){const t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new G(-200,`Circular dependency in DI detected for ${e}${t}`)}(function it(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():be(e)}(s[t]));const a=_l(o.canSeeViewProviders);o.resolving=!0;const d=o.injectImpl?li(o.injectImpl):null;fh(e,i,rt.Default);try{r=e[t]=o.factory(void 0,s,e,i),n.firstCreatePass&&t>=i.directiveStart&&function By(e,n,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=n.type.prototype;if(i){const o=_g(n);(t.preOrderHooks??=[]).push(e,o),(t.preOrderCheckHooks??=[]).push(e,o)}r&&(t.preOrderHooks??=[]).push(0-e,r),s&&((t.preOrderHooks??=[]).push(e,s),(t.preOrderCheckHooks??=[]).push(e,s))}(t,s[t],n)}finally{null!==d&&li(d),_l(a),o.resolving=!1,Rg()}}return r}function Xc(e,n,t){return!!(t[n+(e>>zs)]&1<<e)}function jg(e,n){return!(e&rt.Self||e&rt.Host&&n)}class Jn{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,i){return Vg(this._tNode,this._lView,n,yc(i),t)}}function Zy(){return new Jn(Vn(),ne())}function aa(e){return ie(e)?()=>{const n=aa(N(e));return n&&n()}:Vr(e)}function Hg(e){const n=e[pe],t=n.type;return 2===t?n.declTNode:1===t?e[Hn]:null}const la="__parameters__";function Hr(e,n,t){return Ni(()=>{const i=function Eh(e){return function(...t){if(e){const i=e(...t);for(const r in i)this[r]=i[r]}}}(n);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,d,p){const g=l.hasOwnProperty(la)?l[la]:Object.defineProperty(l,la,{value:[]})[la];for(;g.length<=p;)g.push(null);return(g[p]=g[p]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r})}function ua(e,n){e.forEach(t=>Array.isArray(t)?ua(t,n):n(t))}function eu(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function da(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function El(e,n){const t=[];for(let i=0;i<e;i++)t.push(n);return t}function Gi(e,n,t){let i=ha(e,n);return i>=0?e[1|i]=t:(i=~i,function Zs(e,n,t,i){let r=e.length;if(r==n)e.push(t,i);else if(1===r)e.push(i,e[0]),e[0]=t;else{for(r--,e.push(e[r-1],e[r]);r>n;)e[r]=e[r-2],r--;e[n]=t,e[n+1]=i}}(e,i,n,t)),i}function Dh(e,n){const t=ha(e,n);if(t>=0)return e[1|t]}function ha(e,n){return function _i(e,n,t){let i=0,r=e.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=e[s<<t];if(n===o)return s<<t;o>n?r=s:i=s+1}return~(r<<t)}(e,n,1)}const Cl=rs(Hr("Optional"),8),iu=rs(Hr("SkipSelf"),4);function tm(e){return 128==(128&e.flags)}var pa=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(pa||{});const l0=new Map;let d2=0;const u0="__ngContext__";function Mi(e,n){ji(n)?(e[u0]=n[mo],function f2(e){l0.set(e[mo],e)}(n)):e[u0]=n}let d0;function h0(e,n){return d0(e,n)}function Rh(e){const n=e[Gt];return Ri(n)?n[Gt]:n}function FT(e){return VT(e[tl])}function LT(e){return VT(e[mr])}function VT(e){for(;null!==e&&!Ri(e);)e=e[mr];return e}function au(e,n,t,i,r){if(null!=i){let s,o=!1;Ri(i)?s=i:ji(i)&&(o=!0,i=i[fn]);const a=xt(i);0===e&&null!==t?null==r?HT(n,t,a):Il(n,t,a,r||null,!0):1===e&&null!==t?Il(n,t,a,r||null,!0):2===e?function lm(e,n,t){const i=om(e,n);i&&function O2(e,n,t,i){e.removeChild(n,t,i)}(e,i,n,t)}(n,a,o):3===e&&n.destroyNode(a),null!=s&&function k2(e,n,t,i,r){const s=t[Fr];s!==xt(t)&&au(n,e,i,s,r);for(let a=Kn;a<t.length;a++){const l=t[a];Oh(l[pe],l,e,n,i,s)}}(n,e,s,t,r)}}function rm(e,n,t){return e.createElement(n,t)}function UT(e,n){const t=e[ea],i=t.indexOf(n);wg(n),t.splice(i,1)}function sm(e,n){if(e.length<=Kn)return;const t=Kn+n,i=e[t];if(i){const r=i[nl];null!==r&&r!==e&&UT(r,i),n>0&&(e[t-1][mr]=i[mr]);const s=da(e,Kn+n);!function C2(e,n){Oh(e,n,n[Pe],2,null,null),n[fn]=null,n[Hn]=null}(i[pe],i);const o=s[Pr];null!==o&&o.detachView(s[pe]),i[Gt]=null,i[mr]=null,i[$e]&=-129}return i}function p0(e,n){if(!(256&n[$e])){const t=n[Pe];n[il]&&al(n[il]),n[Xo]&&al(n[Xo]),t.destroyNode&&Oh(e,n,t,3,null,null),function S2(e){let n=e[tl];if(!n)return g0(e[pe],e);for(;n;){let t=null;if(ji(n))t=n[tl];else{const i=n[Kn];i&&(t=i)}if(!t){for(;n&&!n[mr]&&n!==e;)ji(n)&&g0(n[pe],n),n=n[Gt];null===n&&(n=e),ji(n)&&g0(n[pe],n),t=n&&n[mr]}n=t}}(n)}}function g0(e,n){if(!(256&n[$e])){n[$e]&=-129,n[$e]|=256,function M2(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let i=0;i<t.length;i+=2){const r=n[t[i]];if(!(r instanceof pl)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];Br(4,a,l);try{l.call(a)}finally{Br(5,a,l)}}else{Br(4,r,s);try{s.call(r)}finally{Br(5,r,s)}}}}}(e,n),function R2(e,n){const t=e.cleanup,i=n[Yo];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else t[s].call(i[t[s+1]]);null!==i&&(n[Yo]=null);const r=n[kr];if(null!==r){n[kr]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(e,n),1===n[pe].type&&n[Pe].destroy();const t=n[nl];if(null!==t&&Ri(n[Gt])){t!==n[Gt]&&UT(t,n);const i=n[Pr];null!==i&&i.detachView(e)}!function p2(e){l0.delete(e[mo])}(n)}}function m0(e,n,t){return function jT(e,n,t){let i=n;for(;null!==i&&40&i.type;)i=(n=i).parent;if(null===i)return t[fn];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=e.data[i.directiveStart+r];if(s===tr.None||s===tr.Emulated)return null}return Gn(i,t)}}(e,n.parent,t)}function Il(e,n,t,i,r){e.insertBefore(n,t,i,r)}function HT(e,n,t){e.appendChild(n,t)}function $T(e,n,t,i,r){null!==i?Il(e,n,t,i,r):HT(e,n,t)}function om(e,n){return e.parentNode(n)}function GT(e,n,t){return zT(e,n,t)}let _0,w0,zT=function WT(e,n,t){return 40&e.type?Gn(e,t):null};function am(e,n,t,i){const r=m0(e,i,n),s=n[Pe],a=GT(i.parent||n[Hn],i,n);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)$T(s,r,t[l],a,!1);else $T(s,r,t,a,!1);void 0!==_0&&_0(s,i,n,t,r)}function Mh(e,n){if(null!==n){const t=n.type;if(3&t)return Gn(n,e);if(4&t)return v0(-1,e[n.index]);if(8&t){const i=n.child;if(null!==i)return Mh(e,i);{const r=e[n.index];return Ri(r)?v0(-1,r):xt(r)}}if(32&t)return h0(n,e)()||xt(e[n.index]);{const i=ZT(e,n);return null!==i?Array.isArray(i)?i[0]:Mh(Rh(e[cn]),i):Mh(e,n.next)}}return null}function ZT(e,n){return null!==n?e[cn][Hn].projection[n.projection]:null}function v0(e,n){const t=Kn+e+1;if(t<n.length){const i=n[t],r=i[pe].firstChild;if(null!==r)return Mh(i,r)}return n[Fr]}function y0(e,n,t,i,r,s,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===n&&(a&&Mi(xt(a),i),t.flags|=2),32!=(32&t.flags))if(8&l)y0(e,n,t.child,i,r,s,!1),au(n,e,r,a,s);else if(32&l){const d=h0(t,i);let p;for(;p=d();)au(n,e,r,p,s);au(n,e,r,a,s)}else 16&l?YT(e,n,i,t,r,s):au(n,e,r,a,s);t=o?t.projectionNext:t.next}}function Oh(e,n,t,i,r,s){y0(t,i,e.firstChild,n,r,s,!1)}function YT(e,n,t,i,r,s){const o=t[cn],l=o[Hn].projection[i.projection];if(Array.isArray(l))for(let d=0;d<l.length;d++)au(n,e,r,l[d],s);else{let d=l;const p=o[Gt];tm(i)&&(d.flags|=128),y0(e,n,d,p,r,s,!0)}}function QT(e,n,t){""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function JT(e,n,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&Ec(e,n,i),null!==r&&QT(e,n,r),null!==s&&function L2(e,n,t){e.setAttribute(n,"style",t)}(e,n,s)}class nI{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Je})`}}function ga(e){return e instanceof nI?e.changingThisBreaksApplicationSecurity:e}const Q2=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var uu=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(uu||{});function S0(e){const n=function kh(){const e=ne();return e&&e[Qo].sanitizer}();return n?n.sanitize(uu.URL,e)||"":function xh(e,n){const t=function q2(e){return e instanceof nI&&e.getTypeName()||null}(e);if(null!=t&&t!==n){if("ResourceURL"===t&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${t} (see ${Je})`)}return t===n}(e,"URL")?ga(e):function D0(e){return(e=String(e)).match(Q2)?e:"unsafe:"+e}(be(e))}const Fh=new de("ENVIRONMENT_INITIALIZER"),dI=new de("INJECTOR",-1),hI=new de("INJECTOR_DEF_TYPES");class N0{get(n,t=Vi){if(t===Vi){const i=new Error(`NullInjectorError: No provider for ${Vt(n)}!`);throw i.name="NullInjectorError",i}return t}}function uV(...e){return{\u0275providers:pI(0,e),\u0275fromNgModule:!0}}function pI(e,...n){const t=[],i=new Set;let r;const s=o=>{t.push(o)};return ua(n,o=>{const a=o;hm(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&gI(r,s),t}function gI(e,n){for(let t=0;t<e.length;t++){const{ngModule:i,providers:r}=e[t];A0(r,s=>{n(s,i)})}}function hm(e,n,t,i){if(!(e=N(e)))return!1;let r=null,s=is(e);const o=!s&&ct(e);if(s||o){if(o&&!o.standalone)return!1;r=e}else{const l=e.ngModule;if(s=is(l),!s)return!1;r=l}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of l)hm(d,n,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let d;i.add(r);try{ua(s.imports,p=>{hm(p,n,t,i)&&(d||=[],d.push(p))})}finally{}void 0!==d&&gI(d,n)}if(!a){const d=Vr(r)||(()=>new r);n({provide:r,useFactory:d,deps:_t},r),n({provide:hI,useValue:r,multi:!0},r),n({provide:Fh,useValue:()=>te(r),multi:!0},r)}const l=s.providers;if(null!=l&&!a){const d=e;A0(l,p=>{n(p,d)})}}}return r!==e&&void 0!==e.providers}function A0(e,n){for(let t of e)De(t)&&(t=t.\u0275providers),Array.isArray(t)?A0(t,n):n(t)}const dV=ve({provide:String,useValue:ve});function R0(e){return null!==e&&"object"==typeof e&&dV in e}function Sl(e){return"function"==typeof e}const M0=new de("Set Injector scope."),fm={},fV={};let O0;function pm(){return void 0===O0&&(O0=new N0),O0}class ar{}class du extends ar{get destroyed(){return this._destroyed}constructor(n,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,P0(n,o=>this.processProvider(o)),this.records.set(dI,hu(void 0,this)),r.has("environment")&&this.records.set(ar,hu(void 0,this));const s=this.records.get(M0);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(hI.multi,_t,rt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of n)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const t=Mr(this),i=li(void 0);try{return n()}finally{Mr(t),li(i)}}get(n,t=Vi,i=rt.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(wc))return n[wc](this);i=yc(i);const s=Mr(this),o=li(void 0);try{if(!(i&rt.SkipSelf)){let l=this.records.get(n);if(void 0===l){const d=function vV(e){return"function"==typeof e||"object"==typeof e&&e instanceof de}(n)&&Ga(n);l=d&&this.injectableDefInScope(d)?hu(x0(n),fm):null,this.records.set(n,l)}if(null!=l)return this.hydrate(n,l)}return(i&rt.Self?pm():this.parent).get(n,t=i&rt.Optional&&t===Vi?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[_c]=a[_c]||[]).unshift(Vt(n)),s)throw a;return function Ad(e,n,t,i){const r=e[_c];throw n[Zp]&&r.unshift(n[Zp]),e.message=function ss(e,n,t,i=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let r=Vt(n);if(Array.isArray(n))r=n.map(Vt).join(" -> ");else if("object"==typeof n){let s=[];for(let o in n)if(n.hasOwnProperty(o)){let a=n[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Vt(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${e.replace(cy,"\n  ")}`}("\n"+e.message,r,t,i),e.ngTokenPath=r,e[_c]=null,e}(a,n,"R3InjectorError",this.source)}throw a}finally{li(o),Mr(s)}}resolveInjectorInitializers(){const n=Mr(this),t=li(void 0);try{const r=this.get(Fh.multi,_t,rt.Self);for(const s of r)s()}finally{Mr(n),li(t)}}toString(){const n=[],t=this.records;for(const i of t.keys())n.push(Vt(i));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new G(205,!1)}processProvider(n){let t=Sl(n=N(n))?n:N(n&&n.provide);const i=function gV(e){return R0(e)?hu(void 0,e.useValue):hu(function vI(e,n,t){let i;if(Sl(e)){const r=N(e);return Vr(r)||x0(r)}if(R0(e))i=()=>N(e.useValue);else if(function _I(e){return!(!e||!e.useFactory)}(e))i=()=>e.useFactory(...Nd(e.deps||[]));else if(function mI(e){return!(!e||!e.useExisting)}(e))i=()=>te(N(e.useExisting));else{const r=N(e&&(e.useClass||e.provide));if(!function mV(e){return!!e.deps}(e))return Vr(r)||x0(r);i=()=>new r(...Nd(e.deps))}return i}(e),fm)}(n);if(Sl(n)||!0!==n.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=hu(void 0,fm,!0),r.factory=()=>Nd(r.multi),this.records.set(t,r)),t=n,r.multi.push(n)}this.records.set(t,i)}hydrate(n,t){return t.value===fm&&(t.value=fV,t.value=t.factory()),"object"==typeof t.value&&t.value&&function _V(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(n){if(!n.providedIn)return!1;const t=N(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(n){const t=this._onDestroyHooks.indexOf(n);-1!==t&&this._onDestroyHooks.splice(t,1)}}function x0(e){const n=Ga(e),t=null!==n?n.factory:Vr(e);if(null!==t)return t;if(e instanceof de)throw new G(204,!1);if(e instanceof Function)return function pV(e){const n=e.length;if(n>0)throw El(n,"?"),new G(204,!1);const t=function ay(e){return e&&(e[Wa]||e[Up])||null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new G(204,!1)}function hu(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function P0(e,n){for(const t of e)Array.isArray(t)?P0(t,n):t&&De(t)?P0(t.\u0275providers,n):n(t)}const gm=new de("AppId",{providedIn:"root",factory:()=>yV}),yV="ng",yI=new de("Platform Initializer"),Ks=new de("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),bI=new de("CSP nonce",{providedIn:"root",factory:()=>function cu(){if(void 0!==w0)return w0;if(typeof document<"u")return document;throw new G(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let wI=(e,n,t)=>null;function H0(e,n,t=!1){return wI(e,n,t)}class AV{}class CI{}class MV{resolveComponentFactory(n){throw function RV(e){const n=Error(`No component factory found for ${Vt(e)}.`);return n.ngComponent=e,n}(n)}}let wm=(()=>{class e{static#e=this.NULL=new MV}return e})();function OV(){return gu(Vn(),ne())}function gu(e,n){return new Pt(Gn(e,n))}let Pt=(()=>{class e{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=OV}return e})();function xV(e){return e instanceof Pt?e.nativeElement:e}class W0{}let vr=(()=>{class e{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function PV(){const e=ne(),t=Hi(Vn().index,e);return(ji(t)?t:e)[Pe]}()}return e})(),kV=(()=>{class e{static#e=this.\u0275prov=he({token:e,providedIn:"root",factory:()=>null})}return e})();class mu{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const II=new mu("16.2.12"),z0={};function RI(e,n=null,t=null,i){const r=MI(e,n,t,i);return r.resolveInjectorInitializers(),r}function MI(e,n=null,t=null,i,r=new Set){const s=[t||_t,uV(e)];return i=i||("object"==typeof e?void 0:Vt(e)),new du(s,n||pm(),i||null,r)}let vi=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=Vi;static#t=this.NULL=new N0;static create(t,i){if(Array.isArray(t))return RI({name:""},i,t,"");{const r=t.name??"";return RI({name:r},t.parent,t.providers,r)}}static#n=this.\u0275prov=he({token:e,providedIn:"any",factory:()=>te(dI)});static#i=this.__NG_ELEMENT_ID__=-1}return e})();function q0(e){return e.ngOriginalError}class No{constructor(){this._console=console}handleError(n){const t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&q0(n);for(;t&&q0(t);)t=q0(t);return t||null}}function Z0(e){return n=>{setTimeout(e,void 0,n)}}const Ie=class $V extends L{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,t,i){let r=n,s=t||(()=>null),o=i;if(n&&"object"==typeof n){const l=n;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=Z0(s),r&&(r=Z0(r)),o&&(o=Z0(o)));const a=super.subscribe({next:r,error:s,complete:o});return n instanceof et&&n.add(a),a}};function xI(...e){}class nt{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ie(!1),this.onMicrotaskEmpty=new Ie(!1),this.onStable=new Ie(!1),this.onError=new Ie(!1),typeof Zone>"u")throw new G(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function GV(){const e="function"==typeof Nt.requestAnimationFrame;let n=Nt[e?"requestAnimationFrame":"setTimeout"],t=Nt[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&t){const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function qV(e){const n=()=>{!function zV(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Nt,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Y0(e),e.isCheckStableRunning=!0,K0(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Y0(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{if(function KV(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(r,s,o,a);try{return PI(e),t.invokeTask(r,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&n(),kI(e)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return PI(e),t.invoke(r,s,o,a,l)}finally{e.shouldCoalesceRunChangeDetection&&n(),kI(e)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,Y0(e),K0(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!nt.isInAngularZone())throw new G(909,!1)}static assertNotInAngularZone(){if(nt.isInAngularZone())throw new G(909,!1)}run(n,t,i){return this._inner.run(n,t,i)}runTask(n,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,n,WV,xI,xI);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(n,t,i){return this._inner.runGuarded(n,t,i)}runOutsideAngular(n){return this._outer.run(n)}}const WV={};function K0(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Y0(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function PI(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function kI(e){e._nesting--,K0(e)}class ZV{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ie,this.onMicrotaskEmpty=new Ie,this.onStable=new Ie,this.onError=new Ie}run(n,t,i){return n.apply(t,i)}runGuarded(n,t,i){return n.apply(t,i)}runOutsideAngular(n){return n()}runTask(n,t,i,r){return n.apply(t,i)}}const FI=new de("",{providedIn:"root",factory:LI});function LI(){const e=oe(nt);let n=!0;return z(new He(r=>{n=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{r.next(n),r.complete()})}),new He(r=>{let s;e.runOutsideAngular(()=>{s=e.onStable.subscribe(()=>{nt.assertNotInAngularZone(),queueMicrotask(()=>{!n&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(n=!0,r.next(!0))})})});const o=e.onUnstable.subscribe(()=>{nt.assertInAngularZone(),n&&(n=!1,e.runOutsideAngular(()=>{r.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(xe()))}function Ao(e){return e instanceof Function?e():e}let Q0=(()=>{class e{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=he({token:e,providedIn:"root",factory:()=>new e})}return e})();function Bh(e){for(;e;){e[$e]|=64;const n=Rh(e);if(ng(e)&&!n)return e;e=n}return null}const HI=new de("",{providedIn:"root",factory:()=>!1});let Cm=null;function zI(e,n){return e[n]??KI()}function qI(e,n){const t=KI();t.producerNode?.length&&(e[n]=Cm,t.lView=e,Cm=ZI())}const sB={...yn,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Bh(e.lView)},lView:null};function ZI(){return Object.create(sB)}function KI(){return Cm??=ZI(),Cm}const Ge={};function Ce(e){YI(ut(),ne(),mi()+e,!1)}function YI(e,n,t,i){if(!i)if(3==(3&n[$e])){const s=e.preOrderCheckHooks;null!==s&&zc(n,s,t)}else{const s=e.preOrderHooks;null!==s&&oa(n,s,0,t)}Eo(t)}function O(e,n=rt.Default){const t=ne();return null===t?te(e,n):Vg(Vn(),t,N(e),n)}function Tm(e,n,t,i,r,s,o,a,l,d,p){const g=n.blueprint.slice();return g[fn]=r,g[$e]=140|i,(null!==d||e&&2048&e[$e])&&(g[$e]|=2048),bg(g),g[Gt]=g[Jo]=e,g[vn]=t,g[Qo]=o||e&&e[Qo],g[Pe]=a||e&&e[Pe],g[xr]=l||e&&e[xr]||null,g[Hn]=s,g[mo]=function h2(){return d2++}(),g[as]=p,g[tg]=d,g[cn]=2==n.type?e[cn]:g,g}function bu(e,n,t,i,r){let s=e.data[n];if(null===s)s=function J0(e,n,t,i,r){const s=Ig(),o=sh(),l=e.data[n]=function fB(e,n,t,i,r,s){let o=n?n.injectorIndex:-1,a=0;return Gs()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,n,i,r);return null===e.firstChild&&(e.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(e,n,t,i,r),function Ry(){return Re.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function ul(){const e=Re.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return sr(s,!0),s}function Uh(e,n,t,i){if(0===t)return-1;const r=n.length;for(let s=0;s<t;s++)n.push(i),e.blueprint.push(i),e.data.push(null);return r}function JI(e,n,t,i,r){const s=zI(n,il),o=mi(),a=2&i;try{Eo(-1),a&&n.length>Xe&&YI(e,n,Xe,!1),Br(a?2:0,r);const d=a?s:null,p=zd(d);try{null!==d&&(d.dirty=!1),t(i,r)}finally{xc(d,p)}}finally{a&&null===n[il]&&qI(n,il),Eo(o),Br(a?3:1,r)}}function X0(e,n,t){if(sl(n)){const i=nr(null);try{const s=n.directiveEnd;for(let o=n.directiveStart;o<s;o++){const a=e.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{nr(i)}}}function eb(e,n,t){jc()&&(function bB(e,n,t,i){const r=t.directiveStart,s=t.directiveEnd;_o(t)&&function SB(e,n,t){const i=Gn(n,e),r=XI(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=Im(e,Tm(e,r,null,o,i,n,null,e[Qo].rendererFactory.createRenderer(i,t),null,null,null));e[n.index]=a}(n,t,e.data[r+t.componentOffset]),e.firstCreatePass||Kc(t,n),Mi(i,n);const o=t.initialInputs;for(let a=r;a<s;a++){const l=e.data[a],d=Co(n,e,a,t);Mi(d,n),null!==o&&NB(0,a-r,d,l,0,o),Lr(l)&&(Hi(t.index,n)[vn]=Co(n,e,a,t))}}(e,n,t,Gn(t,n)),64==(64&t.flags)&&r1(e,n,t))}function tb(e,n,t=Gn){const i=n.localNames;if(null!==i){let r=n.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(n,e):e[o];e[r++]=a}}}function XI(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=nb(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function nb(e,n,t,i,r,s,o,a,l,d,p){const g=Xe+i,_=g+r,v=function aB(e,n){const t=[];for(let i=0;i<n;i++)t.push(i<e?null:Ge);return t}(g,_),w="function"==typeof d?d():d;return v[pe]={type:e,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:n,data:v.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:w,incompleteFirstPass:!1,ssrId:p}}let e1=e=>null;function t1(e,n,t,i){for(let r in e)if(e.hasOwnProperty(r)){t=null===t?{}:t;const s=e[r];null===i?n1(t,n,r,s):i.hasOwnProperty(r)&&n1(t,n,i[r],s)}return t}function n1(e,n,t,i){e.hasOwnProperty(t)?e[t].push(n,i):e[t]=[n,i]}function ib(e,n,t,i){if(jc()){const r=null===i?null:{"":-1},s=function EB(e,n){const t=e.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Fd(n,o.selectors,!1))if(i||(i=[]),Lr(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),rb(e,n,a.length)}else i.unshift(o),rb(e,n,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(e,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&i1(e,n,t,o,r,a),r&&function DB(e,n,t){if(n){const i=e.localNames=[];for(let r=0;r<n.length;r+=2){const s=t[n[r+1]];if(null==s)throw new G(-301,!1);i.push(n[r],s)}}}(t,i,r)}t.mergedAttrs=Fs(t.mergedAttrs,t.attrs)}function i1(e,n,t,i,r,s){for(let d=0;d<i.length;d++)yl(Kc(t,n),e,i[d].type);!function TB(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}(t,e.data.length,i.length);for(let d=0;d<i.length;d++){const p=i[d];p.providersResolver&&p.providersResolver(p)}let o=!1,a=!1,l=Uh(e,n,i.length,null);for(let d=0;d<i.length;d++){const p=i[d];t.mergedAttrs=Fs(t.mergedAttrs,p.hostAttrs),IB(e,t,n,l,p),CB(l,p,r),null!==p.contentQueries&&(t.flags|=4),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(t.flags|=64);const g=p.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((e.preOrderHooks??=[]).push(t.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function pB(e,n,t){const r=n.directiveEnd,s=e.data,o=n.attrs,a=[];let l=null,d=null;for(let p=n.directiveStart;p<r;p++){const g=s[p],_=t?t.get(g):null,w=_?_.outputs:null;l=t1(g.inputs,p,l,_?_.inputs:null),d=t1(g.outputs,p,d,w);const T=null===l||null===o||Cc(n)?null:AB(l,p,o);a.push(T)}null!==l&&(l.hasOwnProperty("class")&&(n.flags|=8),l.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=a,n.inputs=l,n.outputs=d}(e,t,s)}function r1(e,n,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function My(){return Re.lFrame.currentDirectiveIndex}();try{Eo(s);for(let a=i;a<r;a++){const l=e.data[a],d=n[a];uh(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&wB(l,d)}}finally{Eo(-1),uh(o)}}function wB(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function rb(e,n,t){n.componentOffset=t,(e.components??=[]).push(n.index)}function CB(e,n,t){if(t){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)t[n.exportAs[i]]=e;Lr(n)&&(t[""]=e)}}function IB(e,n,t,i,r){e.data[i]=r;const s=r.factory||(r.factory=Vr(r.type)),o=new pl(s,Lr(r),O);e.blueprint[i]=o,t[i]=o,function vB(e,n,t,i,r){const s=r.hostBindings;if(s){let o=e.hostBindingOpCodes;null===o&&(o=e.hostBindingOpCodes=[]);const a=~n.index;(function yB(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,s)}}(e,n,i,Uh(e,t,r.hostVars,Ge),r)}function Ys(e,n,t,i,r,s){const o=Gn(e,n);!function sb(e,n,t,i,r,s,o){if(null==s)e.removeAttribute(n,r,t);else{const a=null==o?be(s):o(s,i||"",r);e.setAttribute(n,r,a,t)}}(n[Pe],o,s,e.value,t,i,r)}function NB(e,n,t,i,r,s){const o=s[n];if(null!==o)for(let a=0;a<o.length;)s1(i,t,o[a++],o[a++],o[a++])}function s1(e,n,t,i,r){const s=nr(null);try{const o=e.inputTransforms;null!==o&&o.hasOwnProperty(i)&&(r=o[i].call(n,r)),null!==e.setInput?e.setInput(n,r,t,i):n[i]=r}finally{nr(s)}}function AB(e,n,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(e.hasOwnProperty(s)){null===i&&(i=[]);const o=e[s];for(let a=0;a<o.length;a+=2)if(o[a]===n){i.push(s,o[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function o1(e,n,t,i){return[e,!0,!1,n,null,0,i,t,null,null,null]}function a1(e,n){const t=e.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const s=t[i+1];if(-1!==s){const o=e.data[s];hh(t[i]),o.contentQueries(2,n[s],s)}}}function Im(e,n){return e[tl]?e[Ac][mr]=n:e[tl]=n,e[Ac]=n,n}function ob(e,n,t){hh(0);const i=nr(null);try{n(e,t)}finally{nr(i)}}function l1(e){return e[Yo]||(e[Yo]=[])}function c1(e){return e.cleanup||(e.cleanup=[])}function d1(e,n){const t=e[xr],i=t?t.get(No,null):null;i&&i.handleError(n)}function ab(e,n,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];s1(e.data[o],n[o],i,a,r)}}function RB(e,n){const t=Hi(n,e),i=t[pe];!function MB(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])}(i,t);const r=t[fn];null!==r&&null===t[as]&&(t[as]=H0(r,t[xr])),lb(i,t,t[vn])}function lb(e,n,t){ph(n);try{const i=e.viewQuery;null!==i&&ob(1,i,t);const r=e.template;null!==r&&JI(e,n,r,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&a1(e,n),e.staticViewQueries&&ob(2,e.viewQuery,t);const s=e.components;null!==s&&function OB(e,n){for(let t=0;t<n.length;t++)RB(e,n[t])}(n,s)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{n[$e]&=-5,gh()}}let h1=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(t,i,r){const s=typeof Zone>"u"?null:Zone.current,o=function by(e,n,t){const i=Object.create(wy);t&&(i.consumerAllowSignalWrites=!0),i.fn=e,i.schedule=n;const r=o=>{i.cleanupFn=o};return i.ref={notify:()=>cg(i),run:()=>{if(i.dirty=!1,i.hasRun&&!ug(i))return;i.hasRun=!0;const o=zd(i);try{i.cleanupFn(),i.cleanupFn=mg,i.fn(r)}finally{xc(i,o)}},cleanup:()=>i.cleanupFn()},i.ref}(t,d=>{this.all.has(d)&&this.queue.set(d,s)},r);let a;this.all.add(o),o.notify();const l=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=i?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[t,i]of this.queue)this.queue.delete(t),i?i.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=he({token:e,providedIn:"root",factory:()=>new e})}return e})();function Sm(e,n,t){let i=t?e.styles:null,r=t?e.classes:null,s=0;if(null!==n)for(let o=0;o<n.length;o++){const a=n[o];"number"==typeof a?s=a:1==s?r=Ar(r,a):2==s&&(i=Ar(i,a+": "+n[++o]+";"))}t?e.styles=i:e.stylesWithoutHost=i,t?e.classes=r:e.classesWithoutHost=r}function jh(e,n,t,i,r=!1){for(;null!==t;){const s=n[t.index];null!==s&&i.push(xt(s)),Ri(s)&&f1(s,i);const o=t.type;if(8&o)jh(e,n,t.child,i);else if(32&o){const a=h0(t,n);let l;for(;l=a();)i.push(l)}else if(16&o){const a=ZT(n,t);if(Array.isArray(a))i.push(...a);else{const l=Rh(n[cn]);jh(l[pe],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function f1(e,n){for(let t=Kn;t<e.length;t++){const i=e[t],r=i[pe].firstChild;null!==r&&jh(i[pe],i,r,n)}e[Fr]!==e[fn]&&n.push(e[Fr])}function Nm(e,n,t,i=!0){const r=n[Qo],s=r.rendererFactory,o=r.afterRenderEventManager;s.begin?.(),o?.begin();try{p1(e,n,e.template,t)}catch(l){throw i&&d1(n,l),l}finally{s.end?.(),r.effectManager?.flush(),o?.end()}}function p1(e,n,t,i){const r=n[$e];if(256!=(256&r)){n[Qo].effectManager?.flush(),ph(n);try{bg(n),function ah(e){return Re.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&JI(e,n,t,2,i);const o=3==(3&r);if(o){const d=e.preOrderCheckHooks;null!==d&&zc(n,d,null)}else{const d=e.preOrderHooks;null!==d&&oa(n,d,0,null),fl(n,0)}if(function kB(e){for(let n=FT(e);null!==n;n=LT(n)){if(!n[Hd])continue;const t=n[ea];for(let i=0;i<t.length;i++){th(t[i])}}}(n),g1(n,2),null!==e.contentQueries&&a1(e,n),o){const d=e.contentCheckHooks;null!==d&&zc(n,d)}else{const d=e.contentHooks;null!==d&&oa(n,d,1),fl(n,1)}!function oB(e,n){const t=e.hostBindingOpCodes;if(null===t)return;const i=zI(n,Xo);try{for(let r=0;r<t.length;r++){const s=t[r];if(s<0)Eo(~s);else{const o=s,a=t[++r],l=t[++r];ch(a,o),i.dirty=!1;const d=zd(i);try{l(2,n[o])}finally{xc(i,d)}}}}finally{null===n[Xo]&&qI(n,Xo),Eo(-1)}}(e,n);const a=e.components;null!==a&&_1(n,a,0);const l=e.viewQuery;if(null!==l&&ob(2,l,i),o){const d=e.viewCheckHooks;null!==d&&zc(n,d)}else{const d=e.viewHooks;null!==d&&oa(n,d,2),fl(n,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[$e]&=-73,wg(n)}finally{gh()}}}function g1(e,n){for(let t=FT(e);null!==t;t=LT(t))for(let i=Kn;i<t.length;i++)m1(t[i],n)}function FB(e,n,t){m1(Hi(n,e),t)}function m1(e,n){if(!function eh(e){return 128==(128&e[$e])}(e))return;const t=e[pe],i=e[$e];if(80&i&&0===n||1024&i||2===n)p1(t,e,t.template,e[vn]);else if(e[el]>0){g1(e,1);const r=t.components;null!==r&&_1(e,r,1)}}function _1(e,n,t){for(let i=0;i<n.length;i++)FB(e,n[i],t)}class Hh{get rootNodes(){const n=this._lView,t=n[pe];return jh(t,n,t.firstChild,[])}constructor(n,t){this._lView=n,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[vn]}set context(n){this._lView[vn]=n}get destroyed(){return 256==(256&this._lView[$e])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[Gt];if(Ri(n)){const t=n[8],i=t?t.indexOf(this):-1;i>-1&&(sm(n,i),da(t,i))}this._attachedToViewContainer=!1}p0(this._lView[pe],this._lView)}onDestroy(n){!function Eg(e,n){if(256==(256&e[$e]))throw new G(911,!1);null===e[kr]&&(e[kr]=[]),e[kr].push(n)}(this._lView,n)}markForCheck(){Bh(this._cdRefInjectingView||this._lView)}detach(){this._lView[$e]&=-129}reattach(){this._lView[$e]|=128}detectChanges(){Nm(this._lView[pe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new G(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function I2(e,n){Oh(e,n,n[Pe],2,null,null)}(this._lView[pe],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new G(902,!1);this._appRef=n}}class LB extends Hh{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;Nm(n[pe],n,n[vn],!1)}checkNoChanges(){}get context(){return null}}class v1 extends wm{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=ct(n);return new $h(t,this.ngModule)}}function y1(e){const n=[];for(let t in e)e.hasOwnProperty(t)&&n.push({propName:e[t],templateName:t});return n}class BB{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,i){i=yc(i);const r=this.injector.get(n,z0,i);return r!==z0||t===z0?r:this.parentInjector.get(n,t,i)}}class $h extends CI{get inputs(){const n=this.componentDef,t=n.inputTransforms,i=y1(n.inputs);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return y1(this.componentDef.outputs)}constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function Bd(e){return e.map(Qp).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}create(n,t,i,r){let s=(r=r||this.ngModule)instanceof ar?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new BB(n,s):n,a=o.get(W0,null);if(null===a)throw new G(407,!1);const g={rendererFactory:a,sanitizer:o.get(kV,null),effectManager:o.get(h1,null),afterRenderEventManager:o.get(Q0,null)},_=a.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",w=i?function lB(e,n,t,i){const s=i.get(HI,!1)||t===tr.ShadowDom,o=e.selectRootElement(n,s);return function cB(e){e1(e)}(o),o}(_,i,this.componentDef.encapsulation,o):rm(_,v,function VB(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(v)),B=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let R=null;null!==w&&(R=H0(w,o,!0));const Z=nb(0,null,null,1,0,null,null,null,null,null,null),Q=Tm(null,Z,null,B,null,null,g,_,o,null,R);let ce,Ae;ph(Q);try{const at=this.componentDef;let lt,on=null;at.findHostDirectiveDefs?(lt=[],on=new Map,at.findHostDirectiveDefs(at,lt,on),lt.push(at)):lt=[at];const Un=function jB(e,n){const t=e[pe],i=Xe;return e[i]=n,bu(t,i,2,"#host",null)}(Q,w),hi=function HB(e,n,t,i,r,s,o){const a=r[pe];!function $B(e,n,t,i){for(const r of e)n.mergedAttrs=Fs(n.mergedAttrs,r.hostAttrs);null!==n.mergedAttrs&&(Sm(n,n.mergedAttrs,!0),null!==t&&JT(i,t,n))}(i,e,n,o);let l=null;null!==n&&(l=H0(n,r[xr]));const d=s.rendererFactory.createRenderer(n,t);let p=16;t.signals?p=4096:t.onPush&&(p=64);const g=Tm(r,XI(t),null,p,r[e.index],e,s,d,null,null,l);return a.firstCreatePass&&rb(a,e,i.length-1),Im(r,g),r[e.index]=g}(Un,w,at,lt,Q,g,_);Ae=Vc(Z,Xe),w&&function WB(e,n,t,i){if(i)Ec(e,t,["ng-version",II.full]);else{const{attrs:r,classes:s}=function Jp(e){const n=[],t=[];let i=1,r=2;for(;i<e.length;){let s=e[i];if("string"==typeof s)2===r?""!==s&&n.push(s,e[++i]):8===r&&t.push(s);else{if(!Ai(r))break;r=s}i++}return{attrs:n,classes:t}}(n.selectors[0]);r&&Ec(e,t,r),s&&s.length>0&&QT(e,t,s.join(" "))}}(_,at,w,i),void 0!==t&&function zB(e,n,t){const i=e.projection=[];for(let r=0;r<n.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(Ae,this.ngContentSelectors,t),ce=function GB(e,n,t,i,r,s){const o=Vn(),a=r[pe],l=Gn(o,r);i1(a,r,o,t,null,i);for(let p=0;p<t.length;p++)Mi(Co(r,a,o.directiveStart+p,o),r);r1(a,r,o),l&&Mi(l,r);const d=Co(r,a,o.directiveStart+o.componentOffset,o);if(e[vn]=r[vn]=d,null!==s)for(const p of s)p(d,n);return X0(a,o,e),d}(hi,at,lt,on,Q,[qB]),lb(Z,Q,null)}finally{gh()}return new UB(this.componentType,ce,gu(Ae,Q),Q,Ae)}}class UB extends AV{constructor(n,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new LB(r),this.componentType=n}setInput(n,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),t))return;const s=this._rootLView;ab(s[pe],s,r,n,t),this.previousInputValues.set(n,t),Bh(Hi(this._tNode.index,s))}}get injector(){return new Jn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function qB(){const e=Vn();Wc(ne()[pe],e)}function Rm(e){return!!cb(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function cb(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Oi(e,n,t){return!Object.is(e[n],t)&&(e[n]=t,!0)}function At(e,n,t,i){const r=ne();return Oi(r,wo(),n)&&(ut(),Ys(qt(),r,e,n,t,i)),At}function Se(e,n,t,i,r,s,o,a){const l=ne(),d=ut(),p=e+Xe,g=d.firstCreatePass?function wU(e,n,t,i,r,s,o,a,l){const d=n.consts,p=bu(n,e,4,o||null,$s(d,a));ib(n,t,p,$s(d,l)),Wc(n,p);const g=p.tView=nb(2,p,i,r,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,d,null);return null!==n.queries&&(n.queries.template(n,p),g.queries=n.queries.embeddedTView(p)),p}(p,d,l,n,t,i,r,s,o):d.data[p];sr(g,!1);const _=L1(d,l,g,e);Gc()&&am(d,l,_,g),Mi(_,l),Im(l,l[p]=o1(_,l,_,g)),Mc(g)&&eb(d,l,g),null!=o&&tb(l,g,a)}let L1=function V1(e,n,t,i){return Ws(!0),n[Pe].createComment("")};function Ee(e,n,t){const i=ne();return Oi(i,wo(),n)&&function yr(e,n,t,i,r,s,o,a){const l=Gn(n,t);let p,d=n.inputs;!a&&null!=d&&(p=d[i])?(ab(e,t,p,i,r),_o(n)&&function mB(e,n){const t=Hi(n,e);16&t[$e]||(t[$e]|=64)}(t,n.index)):3&n.type&&(i=function gB(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(i),r=null!=o?o(r,n.value||"",i):r,s.setProperty(l,i,r))}(ut(),qt(),i,e,n,i[Pe],t,!1),Ee}function gb(e,n,t,i,r){const o=r?"class":"style";ab(e,t,n.inputs[o],o,i)}function Fe(e,n,t,i){const r=ne(),s=ut(),o=Xe+e,a=r[Pe],l=s.firstCreatePass?function TU(e,n,t,i,r,s){const o=n.consts,l=bu(n,e,2,i,$s(o,r));return ib(n,t,l,$s(o,s)),null!==l.attrs&&Sm(l,l.attrs,!1),null!==l.mergedAttrs&&Sm(l,l.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,l),l}(o,s,r,n,t,i):s.data[o],d=B1(s,r,l,a,n,e);r[o]=d;const p=Mc(l);return sr(l,!0),JT(a,d,l),32!=(32&l.flags)&&Gc()&&am(s,r,d,l),0===function Iy(){return Re.lFrame.elementDepthCount}()&&Mi(d,r),function Sy(){Re.lFrame.elementDepthCount++}(),p&&(eb(s,r,l),X0(s,l,r)),null!==i&&tb(r,l),Fe}function Le(){let e=Vn();sh()?dl():(e=e.parent,sr(e,!1));const n=e;(function Ny(e){return Re.skipHydrationRootTNode===e})(n)&&function Ay(){Re.skipHydrationRootTNode=null}(),function ih(){Re.lFrame.elementDepthCount--}();const t=ut();return t.firstCreatePass&&(Wc(t,e),sl(e)&&t.queries.elementEnd(e)),null!=n.classesWithoutHost&&function kg(e){return 0!=(8&e.flags)}(n)&&gb(t,n,ne(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function Zc(e){return 0!=(16&e.flags)}(n)&&gb(t,n,ne(),n.stylesWithoutHost,!1),Le}function us(e,n,t,i){return Fe(e,n,t,i),Le(),us}let B1=(e,n,t,i,r,s)=>(Ws(!0),rm(i,r,function Mg(){return Re.lFrame.currentNamespace}()));function Kh(e){return!!e&&"function"==typeof e.then}function H1(e){return!!e&&"function"==typeof e.subscribe}function pt(e,n,t,i){const r=ne(),s=ut(),o=Vn();return function G1(e,n,t,i,r,s,o){const a=Mc(i),d=e.firstCreatePass&&c1(e),p=n[vn],g=l1(n);let _=!0;if(3&i.type||o){const T=Gn(i,n),A=o?o(T):T,B=g.length,R=o?Q=>o(xt(Q[i.index])):i.index;let Z=null;if(!o&&a&&(Z=function MU(e,n,t,i){const r=e.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=n[Yo],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(e,n,r,i.index)),null!==Z)(Z.__ngLastListenerFn__||Z).__ngNextListenerFn__=s,Z.__ngLastListenerFn__=s,_=!1;else{s=z1(i,n,p,s,!1);const Q=t.listen(A,r,s);g.push(s,Q),d&&d.push(r,R,B,B+1)}}else s=z1(i,n,p,s,!1);const v=i.outputs;let w;if(_&&null!==v&&(w=v[r])){const T=w.length;if(T)for(let A=0;A<T;A+=2){const ce=n[w[A]][w[A+1]].subscribe(s),Ae=g.length;g.push(s,ce),d&&d.push(r,i.index,Ae,-(Ae+1))}}}(s,r,r[Pe],o,e,n,i),pt}function W1(e,n,t,i){try{return Br(6,n,t),!1!==t(i)}catch(r){return d1(e,r),!1}finally{Br(7,n,t)}}function z1(e,n,t,i,r){return function s(o){if(o===Function)return i;Bh(e.componentOffset>-1?Hi(e.index,n):n);let l=W1(n,t,i,o),d=s.__ngNextListenerFn__;for(;d;)l=W1(n,t,d,o)&&l,d=d.__ngNextListenerFn__;return r&&!1===l&&o.preventDefault(),l}}function Ve(e=1){return function xy(e){return(Re.lFrame.contextLView=function Py(e,n){for(;e>0;)n=n[Jo],e--;return n}(e,Re.lFrame.contextLView))[vn]}(e)}function OU(e,n){let t=null;const i=function Ld(e){const n=e.attrs;if(null!=n){const t=n.indexOf(5);if(!(1&t))return n[t+1]}return null}(e);for(let r=0;r<n.length;r++){const s=n[r];if("*"!==s){if(null===i?Fd(e,s,!0):Tc(i,s))return r}else t=r}return t}function Fm(e,n){return e<<17|n<<2}function ma(e){return e>>17&32767}function yb(e){return 2|e}function Al(e){return(131068&e)>>2}function bb(e,n){return-131069&e|n<<2}function wb(e){return 1|e}function iS(e,n,t,i,r){const s=e[t+1],o=null===n;let a=i?ma(s):Al(s),l=!1;for(;0!==a&&(!1===l||o);){const p=e[a+1];VU(e[a],n)&&(l=!0,e[a+1]=i?wb(p):yb(p)),a=i?ma(p):Al(p)}l&&(e[t+1]=i?yb(s):wb(s))}function VU(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&ha(e,n)>=0}const ei={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function rS(e){return e.substring(ei.key,ei.keyEnd)}function sS(e,n){const t=ei.textEnd;return t===n?-1:(n=ei.keyEnd=function HU(e,n,t){for(;n<t&&e.charCodeAt(n)>32;)n++;return n}(e,ei.key=n,t),Ru(e,n,t))}function Ru(e,n,t){for(;n<t&&e.charCodeAt(n)<=32;)n++;return n}function Ct(e,n){return function hs(e,n,t,i){const r=ne(),s=ut(),o=Ur(2);s.firstUpdatePass&&hS(s,e,o,i),n!==Ge&&Oi(r,o,n)&&pS(s,s.data[mi()],r,r[Pe],e,r[o+1]=function XU(e,n){return null==e||""===e||("string"==typeof n?e+=n:"object"==typeof e&&(e=Vt(ga(e)))),e}(n,t),i,o)}(e,n,null,!0),Ct}function Rl(e){!function fs(e,n,t,i){const r=ut(),s=Ur(2);r.firstUpdatePass&&hS(r,null,s,i);const o=ne();if(t!==Ge&&Oi(o,s,t)){const a=r.data[mi()];if(mS(a,i)&&!dS(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=Ar(l,t||"")),gb(r,a,o,t,i)}else!function JU(e,n,t,i,r,s,o,a){r===Ge&&(r=_t);let l=0,d=0,p=0<r.length?r[0]:null,g=0<s.length?s[0]:null;for(;null!==p||null!==g;){const _=l<r.length?r[l+1]:void 0,v=d<s.length?s[d+1]:void 0;let T,w=null;p===g?(l+=2,d+=2,_!==v&&(w=g,T=v)):null===g||null!==p&&p<g?(l+=2,w=p):(d+=2,w=g,T=v),null!==w&&pS(e,n,t,i,w,T,o,a),p=l<r.length?r[l]:null,g=d<s.length?s[d]:null}}(r,a,o,o[Pe],o[s+1],o[s+1]=function YU(e,n,t){if(null==t||""===t)return _t;const i=[],r=ga(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)e(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&e(i,s,r[s]);else"string"==typeof r&&n(i,r);return i}(e,n,t),i,s)}}(QU,eo,e,!0)}function eo(e,n){for(let t=function UU(e){return function aS(e){ei.key=0,ei.keyEnd=0,ei.value=0,ei.valueEnd=0,ei.textEnd=e.length}(e),sS(e,Ru(e,0,ei.textEnd))}(n);t>=0;t=sS(n,t))Gi(e,rS(n),!0)}function dS(e,n){return n>=e.expandoStartIndex}function hS(e,n,t,i){const r=e.data;if(null===r[t+1]){const s=r[mi()],o=dS(e,t);mS(s,i)&&null===n&&!o&&(n=!1),n=function zU(e,n,t,i){const r=function dh(e){const n=Re.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}(e);let s=i?n.residualClasses:n.residualStyles;if(null===r)0===(i?n.classBindings:n.styleBindings)&&(t=Yh(t=Eb(null,e,n,t,i),n.attrs,i),s=null);else{const o=n.directiveStylingLast;if(-1===o||e[o]!==r)if(t=Eb(r,e,n,t,i),null===s){let l=function qU(e,n,t){const i=t?n.classBindings:n.styleBindings;if(0!==Al(i))return e[ma(i)]}(e,n,i);void 0!==l&&Array.isArray(l)&&(l=Eb(null,e,n,l[1],i),l=Yh(l,n.attrs,i),function ZU(e,n,t,i){e[ma(t?n.classBindings:n.styleBindings)]=i}(e,n,i,l))}else s=function KU(e,n,t){let i;const r=n.directiveEnd;for(let s=1+n.directiveStylingLast;s<r;s++)i=Yh(i,e[s].hostAttrs,t);return Yh(i,n.attrs,t)}(e,n,i)}return void 0!==s&&(i?n.residualClasses=s:n.residualStyles=s),t}(r,s,n,i),function FU(e,n,t,i,r,s){let o=s?n.classBindings:n.styleBindings,a=ma(o),l=Al(o);e[i]=t;let p,d=!1;if(Array.isArray(t)?(p=t[1],(null===p||ha(t,p)>0)&&(d=!0)):p=t,r)if(0!==l){const _=ma(e[a+1]);e[i+1]=Fm(_,a),0!==_&&(e[_+1]=bb(e[_+1],i)),e[a+1]=function PU(e,n){return 131071&e|n<<17}(e[a+1],i)}else e[i+1]=Fm(a,0),0!==a&&(e[a+1]=bb(e[a+1],i)),a=i;else e[i+1]=Fm(l,0),0===a?a=i:e[l+1]=bb(e[l+1],i),l=i;d&&(e[i+1]=yb(e[i+1])),iS(e,p,i,!0),iS(e,p,i,!1),function LU(e,n,t,i,r){const s=r?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof n&&ha(s,n)>=0&&(t[i+1]=wb(t[i+1]))}(n,p,e,i,s),o=Fm(a,l),s?n.classBindings=o:n.styleBindings=o}(r,s,n,t,o,i)}}function Eb(e,n,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=n[a],i=Yh(i,s.hostAttrs,r),s!==e);)a++;return null!==e&&(t.directiveStylingLast=a),i}function Yh(e,n,t){const i=t?1:2;let r=-1;if(null!==n)for(let s=0;s<n.length;s++){const o=n[s];"number"==typeof o?r=o:r===i&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Gi(e,o,!!t||n[++s]))}return void 0===e?null:e}function QU(e,n,t){const i=String(n);""!==i&&!i.includes(" ")&&Gi(e,i,t)}function pS(e,n,t,i,r,s,o,a){if(!(3&n.type))return;const l=e.data,d=l[a+1],p=function kU(e){return 1==(1&e)}(d)?gS(l,n,t,r,Al(d),o):void 0;Lm(p)||(Lm(s)||function xU(e){return 2==(2&e)}(d)&&(s=gS(l,null,t,r,a,o)),function F2(e,n,t,i,r){if(n)r?e.addClass(t,i):e.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:pa.DashCase;null==r?e.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=pa.Important),e.setStyle(t,i,r,s))}}(i,o,ra(mi(),t),r,s))}function gS(e,n,t,i,r,s){const o=null===n;let a;for(;r>0;){const l=e[r],d=Array.isArray(l),p=d?l[1]:l,g=null===p;let _=t[r+1];_===Ge&&(_=g?_t:void 0);let v=g?Dh(_,i):p===i?_:void 0;if(d&&!Lm(v)&&(v=Dh(l,i)),Lm(v)&&(a=v,o))return a;const w=e[r+1];r=o?ma(w):Al(w)}if(null!==n){let l=s?n.residualClasses:n.residualStyles;null!=l&&(a=Dh(l,i))}return a}function Lm(e){return void 0!==e}function mS(e,n){return 0!=(e.flags&(n?8:16))}function yi(e,n=""){const t=ne(),i=ut(),r=e+Xe,s=i.firstCreatePass?bu(i,r,1,n,null):i.data[r],o=_S(i,t,s,n,e);t[r]=o,Gc()&&am(i,t,o,s),sr(s,!1)}let _S=(e,n,t,i,r)=>(Ws(!0),function im(e,n){return e.createText(n)}(n[Pe],i));function to(e){return Mu("",e,""),to}function Mu(e,n,t){const i=ne(),r=function Eu(e,n,t,i){return Oi(e,wo(),t)?n+be(t)+i:Ge}(i,e,n,t);return r!==Ge&&function Ro(e,n,t){const i=ra(n,e);!function BT(e,n,t){e.setValue(n,t)}(e[Pe],i,t)}(i,mi(),r),Mu}const xu="en-US";let VS=xu;class Ol{}class uN{}class Ab extends Ol{constructor(n,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new v1(this);const r=Ui(n);this._bootstrapComponents=Ao(r.bootstrap),this._r3Injector=MI(n,t,[{provide:Ol,useValue:this},{provide:wm,useValue:this.componentFactoryResolver},...i],Vt(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Rb extends uN{constructor(n){super(),this.moduleType=n}create(n){return new Ab(this.moduleType,n,[])}}class dN extends Ol{constructor(n){super(),this.componentFactoryResolver=new v1(this),this.instance=null;const t=new du([...n.providers,{provide:Ol,useValue:this},{provide:wm,useValue:this.componentFactoryResolver}],n.parent||pm(),n.debugName,new Set(["environment"]));this.injector=t,n.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function Mb(e,n,t=null){return new dN({providers:e,parent:n,debugName:t,runEnvironmentInitializers:!0}).injector}let EH=(()=>{class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=pI(0,t.type),r=i.length>0?Mb([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=he({token:e,providedIn:"environment",factory:()=>new e(te(ar))})}return e})();function Wr(e){e.getStandaloneInjector=n=>n.get(EH).getOrCreateStandaloneInjector(e)}function Pu(e,n,t,i){return function vN(e,n,t,i,r,s){const o=n+t;return Oi(e,o,r)?function Qs(e,n,t){return e[n]=t}(e,o+1,s?i.call(s,r):i(r)):function sf(e,n){const t=e[n];return t===Ge?void 0:t}(e,o+1)}(ne(),function Qn(){const e=Re.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}(),e,n,t,i)}function WH(){return this._results[Symbol.iterator]()}class Pb{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Ie)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Pb.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=WH)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){const i=this;i.dirty=!1;const r=function $i(e){return e.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function wl(e,n,t){if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function qH(e,n,t,i=!0){const r=n[pe];if(function N2(e,n,t,i){const r=Kn+i,s=t.length;i>0&&(t[r-1][mr]=n),i<s-Kn?(n[mr]=t[r],eu(t,Kn+i,n)):(t.push(n),n[mr]=null),n[Gt]=t;const o=n[nl];null!==o&&t!==o&&function A2(e,n){const t=e[ea];n[cn]!==n[Gt][Gt][cn]&&(e[Hd]=!0),null===t?e[ea]=[n]:t.push(n)}(o,n);const a=n[Pr];null!==a&&a.insertView(e),n[$e]|=128}(r,n,e,t),i){const s=v0(t,e),o=n[Pe],a=om(o,e[Fr]);null!==a&&function T2(e,n,t,i,r,s){i[fn]=r,i[Hn]=n,Oh(e,i,t,1,r,s)}(r,e[Hn],o,n,a,s)}}let En=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=YH}return e})();const ZH=En,KH=class extends ZH{constructor(n,t,i){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,t){return this.createEmbeddedViewImpl(n,t)}createEmbeddedViewImpl(n,t,i){const r=function zH(e,n,t,i){const r=n.tView,a=Tm(e,r,t,4096&e[$e]?4096:16,null,n,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[nl]=e[n.index];const d=e[Pr];return null!==d&&(a[Pr]=d.createEmbeddedView(r)),lb(r,a,t),a}(this._declarationLView,this._declarationTContainer,n,{injector:t,hydrationInfo:i});return new Hh(r)}};function YH(){return Hm(Vn(),ne())}function Hm(e,n){return 4&e.type?new KH(n,e,gu(e,n)):null}let zr=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=n$}return e})();function n$(){return AN(Vn(),ne())}const i$=zr,SN=class extends i${constructor(n,t,i){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=i}get element(){return gu(this._hostTNode,this._hostLView)}get injector(){return new Jn(this._hostTNode,this._hostLView)}get parentInjector(){const n=Yc(this._hostTNode,this._hostLView);if(vh(n)){const t=ml(n,this._hostLView),i=gl(n);return new Jn(t[pe].data[i+8],t)}return new Jn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=NN(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-Kn}createEmbeddedView(n,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const a=n.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,r,false),a}createComponent(n,t,i,r,s){const o=n&&!function Xn(e){return"function"==typeof e}(n);let a;if(o)a=t;else{const T=t||{};a=T.index,i=T.injector,r=T.projectableNodes,s=T.environmentInjector||T.ngModuleRef}const l=o?n:new $h(ct(n)),d=i||this.parentInjector;if(!s&&null==l.ngModule){const A=(o?d:this.parentInjector).get(ar,null);A&&(s=A)}ct(l.componentType??{});const v=l.create(d,r,null,s);return this.insertImpl(v.hostView,a,false),v}insert(n,t){return this.insertImpl(n,t,!1)}insertImpl(n,t,i){const r=n._lView;if(function yg(e){return Ri(e[Gt])}(r)){const l=this.indexOf(n);if(-1!==l)this.detach(l);else{const d=r[Gt],p=new SN(d,d[Hn],d[Gt]);p.detach(p.indexOf(n))}}const o=this._adjustIndex(t),a=this._lContainer;return qH(a,r,o,!i),n.attachToViewContainerRef(),eu(kb(a),o,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=NN(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),i=sm(this._lContainer,t);i&&(da(kb(this._lContainer),t),p0(i[pe],i))}detach(n){const t=this._adjustIndex(n,-1),i=sm(this._lContainer,t);return i&&null!=da(kb(this._lContainer),t)?new Hh(i):null}_adjustIndex(n,t=0){return n??this.length+t}};function NN(e){return e[8]}function kb(e){return e[8]||(e[8]=[])}function AN(e,n){let t;const i=n[e.index];return Ri(i)?t=i:(t=o1(i,n,null,e),n[e.index]=t,Im(n,t)),RN(t,n,e,i),new SN(t,e,n)}let RN=function MN(e,n,t,i){if(e[Fr])return;let r;r=8&t.type?xt(i):function r$(e,n){const t=e[Pe],i=t.createComment(""),r=Gn(n,e);return Il(t,om(t,r),i,function x2(e,n){return e.nextSibling(n)}(t,r),!1),i}(n,t),e[Fr]=r};class Fb{constructor(n){this.queryList=n,this.matches=null}clone(){return new Fb(this.queryList)}setDirty(){this.queryList.setDirty()}}class Lb{constructor(n=[]){this.queries=n}createEmbeddedView(n){const t=n.queries;if(null!==t){const i=null!==n.contentQueries?n.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new Lb(r)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)null!==FN(n,t).matches&&this.queries[t].setDirty()}}class ON{constructor(n,t,i=null){this.predicate=n,this.flags=t,this.read=i}}class Vb{constructor(n=[]){this.queries=n}elementStart(n,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(n,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new Vb(t):null}template(n,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Bb{constructor(n,t=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new Bb(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(n,t,a$(t,s)),this.matchTNodeWithReadOption(n,t,Jc(t,n,s,!1,!1))}else i===En?4&t.type&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,Jc(t,n,i,!1,!1))}matchTNodeWithReadOption(n,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Pt||r===zr||r===En&&4&t.type)this.addMatch(t.index,-2);else{const s=Jc(t,n,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(n,t){null===this.matches?this.matches=[n,t]:this.matches.push(n,t)}}function a$(e,n){const t=e.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===n)return t[i+1];return null}function c$(e,n,t,i){return-1===t?function l$(e,n){return 11&e.type?gu(e,n):4&e.type?Hm(e,n):null}(n,e):-2===t?function u$(e,n,t){return t===Pt?gu(n,e):t===En?Hm(n,e):t===zr?AN(n,e):void 0}(e,n,i):Co(e,e[pe],t,n)}function xN(e,n,t,i){const r=n[Pr].queries[i];if(null===r.matches){const s=e.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const d=o[l];a.push(d<0?null:c$(n,s[d],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function Ub(e,n,t,i){const r=e.queries.getByIndex(t),s=r.matches;if(null!==s){const o=xN(e,n,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const d=s[a+1],p=n[-l];for(let g=Kn;g<p.length;g++){const _=p[g];_[nl]===_[Gt]&&Ub(_[pe],_,d,i)}if(null!==p[ea]){const g=p[ea];for(let _=0;_<g.length;_++){const v=g[_];Ub(v[pe],v,d,i)}}}}}return i}function Bt(e){const n=ne(),t=ut(),i=$c();hh(i+1);const r=FN(t,i);if(e.dirty&&function Ty(e){return 4==(4&e[$e])}(n)===(2==(2&r.metadata.flags))){if(null===r.matches)e.reset([]);else{const s=r.crossesNgTemplate?Ub(t,n,i,[]):xN(t,n,r,i);e.reset(s,xV),e.notifyOnChanges()}return!0}return!1}function xl(e,n,t){const i=ut();i.firstCreatePass&&(function kN(e,n,t){null===e.queries&&(e.queries=new Vb),e.queries.track(new Bb(n,t))}(i,new ON(e,n,t),-1),2==(2&n)&&(i.staticViewQueries=!0)),function PN(e,n,t){const i=new Pb(4==(4&t));(function hB(e,n,t,i){const r=l1(n);r.push(t),e.firstCreatePass&&c1(e).push(i,r.length-1)})(e,n,i,i.destroy),null===n[Pr]&&(n[Pr]=new Lb),n[Pr].queries.push(new Fb(i))}(i,ne(),n)}function FN(e,n){return e.queries.getByIndex(n)}const zb=new de("Application Initializer");let qb=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=oe(zb,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const s=r();if(Kh(s))t.push(s);else if(H1(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),XN=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();const gs=new de("LocaleId",{providedIn:"root",factory:()=>oe(gs,rt.Optional|rt.SkipSelf)||function x$(){return typeof $localize<"u"&&$localize.locale||xu}()});let eA=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new k(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class F${constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}}let tA=(()=>{class e{compileModuleSync(t){return new Rb(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=Ao(Ui(t).declarations).reduce((o,a)=>{const l=ct(a);return l&&o.push(new $h(l)),o},[]);return new F$(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const sA=new de(""),zm=new de("");let Jb,Yb=(()=>{class e{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Jb||(function r3(e){Jb=e}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{nt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||e)(te(nt),te(Qb),te(zm))};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac})}return e})(),Qb=(()=>{class e{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return Jb?.findTestabilityInTree(this,t,i)??null}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),_a=null;const oA=new de("AllowMultipleToken"),Xb=new de("PlatformDestroyListeners"),ew=new de("appBootstrapListener");class lA{constructor(n,t){this.name=n,this.token=t}}function uA(e,n,t=[]){const i=`Platform: ${n}`,r=new de(i);return(s=[])=>{let o=tw();if(!o||o.injector.get(oA,!1)){const a=[...t,...s,{provide:r,useValue:!0}];e?e(a):function a3(e){if(_a&&!_a.get(oA,!1))throw new G(400,!1);(function aA(){!function ia(e){fg=e}(()=>{throw new G(600,!1)})})(),_a=e;const n=e.get(hA);(function cA(e){e.get(yI,null)?.forEach(t=>t())})(e)}(function dA(e=[],n){return vi.create({name:n,providers:[{provide:M0,useValue:"platform"},{provide:Xb,useValue:new Set([()=>_a=null])},...e]})}(a,i))}return function c3(e){const n=tw();if(!n)throw new G(401,!1);return n}()}}function tw(){return _a?.get(hA)??null}let hA=(()=>{class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function u3(e="zone.js",n){return"noop"===e?new ZV:"zone.js"===e?new nt(n):e}(i?.ngZone,function fA(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const s=function wH(e,n,t){return new Ab(e,n,t)}(t.moduleType,this.injector,function vA(e){return[{provide:nt,useFactory:e},{provide:Fh,multi:!0,useFactory:()=>{const n=oe(h3,{optional:!0});return()=>n.initialize()}},{provide:_A,useFactory:d3},{provide:FI,useFactory:LI}]}(()=>r)),o=s.injector.get(No,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:l=>{o.handleError(l)}});s.onDestroy(()=>{qm(this._modules,s),a.unsubscribe()})}),function pA(e,n,t){try{const i=t();return Kh(i)?i.catch(r=>{throw n.runOutsideAngular(()=>e.handleError(r)),r}):i}catch(i){throw n.runOutsideAngular(()=>e.handleError(i)),i}}(o,r,()=>{const a=s.injector.get(qb);return a.runInitializers(),a.donePromise.then(()=>(function BS(e){Si(e,"Expected localeId to be defined"),"string"==typeof e&&(VS=e.toLowerCase().replace(/_/g,"-"))}(s.injector.get(gs,xu)||xu),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,i=[]){const r=gA({},i);return function s3(e,n,t){const i=new Rb(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(va);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new G(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new G(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(Xb,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||e)(te(vi))};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function gA(e,n){return Array.isArray(n)?n.reduce(gA,e):{...e,...n}}let va=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=oe(_A),this.zoneIsStable=oe(FI),this.componentTypes=[],this.components=[],this.isStable=oe(eA).hasPendingTasks.pipe(ft(t=>t?W(!1):this.zoneIsStable),Xt(),xe()),this._injector=oe(ar)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof CI;if(!this._injector.get(qb).done)throw!r&&function Ls(e){const n=ct(e)||Ln(e)||gi(e);return null!==n&&n.standalone}(t),new G(405,!1);let o;o=r?t:this._injector.get(wm).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function o3(e){return e.isBoundToModule}(o)?void 0:this._injector.get(Ol),d=o.create(vi.NULL,[],i||o.selector,a),p=d.location.nativeElement,g=d.injector.get(sA,null);return g?.registerApplication(p),d.onDestroy(()=>{this.detachView(d.hostView),qm(this.components,d),g?.unregisterApplication(p)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new G(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;qm(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(ew,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>qm(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new G(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function qm(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}const _A=new de("",{providedIn:"root",factory:()=>oe(No).handleError.bind(void 0)});function d3(){const e=oe(nt),n=oe(No);return t=>e.runOutsideAngular(()=>n.handleError(t))}let h3=(()=>{class e{constructor(){this.zone=oe(nt),this.applicationRef=oe(va)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();let ms=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=p3}return e})();function p3(e){return function g3(e,n,t){if(_o(e)&&!t){const i=Hi(e.index,n);return new Hh(i,i)}return 47&e.type?new Hh(n[cn],n):null}(Vn(),ne(),16==(16&e))}class DA{constructor(){}supports(n){return Rm(n)}create(n){return new w3(n)}}const b3=(e,n)=>n;class w3{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||b3}forEachItem(n){let t;for(t=this._itHead;null!==t;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<TA(i,r,s)?t:i,a=TA(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const d=a-r,p=l-r;if(d!=p){for(let _=0;_<d;_++){const v=_<s.length?s[_]:s[_]=0,w=v+_;p<=w&&w<d&&(s[_]=v+1)}s[o.previousIndex]=p-d}}a!==l&&n(o,a,l)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)n(t)}diff(n){if(null==n&&(n=[]),!Rm(n))throw new G(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let a=0;a<this.length;a++)s=n[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function iU(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{const t=e[Symbol.iterator]();let i;for(;!(i=t.next()).done;)n(i.value)}}(n,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,i,r){let s;return null===n?s=this._itTail:(s=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,s,r)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,s,r)):n=this._addAfter(new E3(t,i),s,r),n}_verifyReinsertion(n,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?n=this._reinsertAfter(s,n._prev,r):n.currentIndex!=r&&(n.currentIndex=r,this._addToMoves(n,r)),n}_truncate(n){for(;null!==n;){const t=n._next;this._addToRemovals(this._unlink(n)),n=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const r=n._prevRemoved,s=n._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(n,t,i),this._addToMoves(n,i),n}_moveAfter(n,t,i){return this._unlink(n),this._insertAfter(n,t,i),this._addToMoves(n,i),n}_addAfter(n,t,i){return this._insertAfter(n,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,t,i){const r=null===t?this._itHead:t._next;return n._next=r,n._prev=t,null===r?this._itTail=n:r._prev=n,null===t?this._itHead=n:t._next=n,null===this._linkedRecords&&(this._linkedRecords=new CA),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const t=n._prev,i=n._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new CA),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class E3{constructor(n,t){this.item=n,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class D3{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const t=n._prevDup,i=n._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class CA{constructor(){this.map=new Map}put(n){const t=n.trackById;let i=this.map.get(t);i||(i=new D3,this.map.set(t,i)),i.add(n)}get(n,t){const r=this.map.get(n);return r?r.get(n,t):null}remove(n){const t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function TA(e,n,t){const i=e.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+n+r}class IA{constructor(){}supports(n){return n instanceof Map||cb(n)}create(){return new C3}}class C3{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let t;for(t=this._mapHead;null!==t;t=t._next)n(t)}forEachPreviousItem(n){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)n(t)}forEachChangedItem(n){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}diff(n){if(n){if(!(n instanceof Map||cb(n)))throw new G(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(n,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,t){if(n){const i=n._prev;return t._next=n,t._prev=i,n._prev=t,i&&(i._next=t),n===this._mapHead&&(this._mapHead=t),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(n,t){if(this._records.has(n)){const r=this._records.get(n);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new T3(n);return this._records.set(n,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,t){Object.is(t,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=t,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,t){n instanceof Map?n.forEach(t):Object.keys(n).forEach(i=>t(n[i],i))}}class T3{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function SA(){return new Ym([new DA])}let Ym=(()=>{class e{static#e=this.\u0275prov=he({token:e,providedIn:"root",factory:SA});constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new e(t)}static extend(t){return{provide:e,useFactory:i=>e.create(t,i||SA()),deps:[[e,new iu,new Cl]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new G(901,!1)}}return e})();function NA(){return new uf([new IA])}let uf=(()=>{class e{static#e=this.\u0275prov=he({token:e,providedIn:"root",factory:NA});constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new e(t)}static extend(t){return{provide:e,useFactory:i=>e.create(t,i||NA()),deps:[[e,new iu,new Cl]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new G(901,!1)}}return e})();const N3=uA(null,"core",[]);let A3=(()=>{class e{constructor(t){}static#e=this.\u0275fac=function(i){return new(i||e)(te(va))};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({})}return e})();function aw(e,n){const t=ct(e),i=n.elementInjector||pm();return new $h(t).create(i,n.projectableNodes,n.hostElement,n.environmentInjector)}let lw=null;function ya(){return lw}class $3{}const ti=new de("DocumentToken");let cw=(()=>{class e{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=he({token:e,factory:function(){return oe(W3)},providedIn:"platform"})}return e})();const G3=new de("Location Initialized");let W3=(()=>{class e extends cw{constructor(){super(),this._doc=oe(ti),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ya().getBaseHref(this._doc)}onPopState(t){const i=ya().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=ya().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=he({token:e,factory:function(){return new e},providedIn:"platform"})}return e})();function uw(e,n){if(0==e.length)return n;if(0==n.length)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,2==t?e+n.substring(1):1==t?e+n:e+"/"+n}function LA(e){const n=e.match(/#|\?|$/),t=n&&n.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)}function Mo(e){return e&&"?"!==e[0]?"?"+e:e}let kl=(()=>{class e{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=he({token:e,factory:function(){return oe(BA)},providedIn:"root"})}return e})();const VA=new de("appBaseHref");let BA=(()=>{class e extends kl{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??oe(ti).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return uw(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Mo(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Mo(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Mo(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||e)(te(cw),te(VA,8))};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),z3=(()=>{class e extends kl{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=uw(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+Mo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+Mo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||e)(te(cw),te(VA,8))};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac})}return e})(),dw=(()=>{class e{constructor(t){this._subject=new Ie,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function K3(e){if(new RegExp("^(https?:)?//").test(e)){const[,t]=e.split(/\/\/[^\/]+/);return t}return e}(LA(UA(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Mo(i))}normalize(t){return e.stripTrailingSlash(function Z3(e,n){if(!e||!n.startsWith(e))return n;const t=n.substring(e.length);return""===t||["/",";","?","#"].includes(t[0])?t:n}(this._basePath,UA(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mo(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mo(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static#e=this.normalizeQueryParams=Mo;static#t=this.joinWithSlash=uw;static#n=this.stripTrailingSlash=LA;static#i=this.\u0275fac=function(i){return new(i||e)(te(kl))};static#r=this.\u0275prov=he({token:e,factory:function(){return function q3(){return new dw(te(kl))}()},providedIn:"root"})}return e})();function UA(e){return e.replace(/\/index.html$/,"")}class xG{constructor(n,t,i,r){this.$implicit=n,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Po=(()=>{class e{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new xG(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),XA(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{XA(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||e)(O(zr),O(En),O(Ym))};static#t=this.\u0275dir=ae({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return e})();function XA(e,n){e.context.$implicit=n.item}let ba=(()=>{class e{constructor(t,i){this._viewContainer=t,this._context=new PG,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){eR("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){eR("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||e)(O(zr),O(En))};static#t=this.\u0275dir=ae({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return e})();class PG{constructor(){this.$implicit=null,this.ngIf=null}}function eR(e,n){if(n&&!n.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${Vt(n)}'.`)}let nR=(()=>{class e{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split("."),o=-1===r.indexOf("-")?void 0:pa.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static#e=this.\u0275fac=function(i){return new(i||e)(O(Pt),O(uf),O(vr))};static#t=this.\u0275dir=ae({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return e})(),o8=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({})}return e})();function Sw(e){return"server"===e}let u8=(()=>{class e{static#e=this.\u0275prov=he({token:e,providedIn:"root",factory:()=>new d8(te(ti),window)})}return e})();class d8{constructor(n,t){this.document=n,this.window=t,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const t=function h8(e,n){const t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if("function"==typeof e.createTreeWalker&&e.body&&"function"==typeof e.body.attachShadow){const i=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(n)||s.querySelector(`[name="${n}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,n);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(n){this.supportsScrolling()&&(this.window.history.scrollRestoration=n)}scrollToElement(n){const t=n.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class F8 extends $3{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Rw extends F8{static makeCurrent(){!function H3(e){lw||(lw=e)}(new Rw)}onAndCancel(n,t,i){return n.addEventListener(t,i),()=>{n.removeEventListener(t,i)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function L8(){return pf=pf||document.querySelector("base"),pf?pf.getAttribute("href"):null}();return null==t?null:function V8(e){u_=u_||document.createElement("a"),u_.setAttribute("href",e);const n=u_.pathname;return"/"===n.charAt(0)?n:`/${n}`}(t)}resetBaseElement(){pf=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function RG(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===n)return decodeURIComponent(s)}return null}(document.cookie,n)}}let u_,pf=null,U8=(()=>{class e{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac})}return e})();const Mw=new de("EventManagerPlugins");let cR=(()=>{class e{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new G(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||e)(te(Mw),te(nt))};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac})}return e})();class uR{constructor(n){this._doc=n}}const Ow="ng-app-id";let dR=(()=>{class e{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Sw(s),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Ow}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(Ow),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(Ow,this.appId),o}}addStyleToHost(t,i){const r=this.getStyleElement(t,i);t.appendChild(r);const s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||e)(te(ti),te(gm),te(bI,8),te(Ks))};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac})}return e})();const xw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Pw=/%COMP%/g,G8=new de("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function fR(e,n){return n.map(t=>t.replace(Pw,e))}let pR=(()=>{class e{constructor(t,i,r,s,o,a,l,d=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Sw(a),this.defaultRenderer=new kw(t,o,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===tr.ShadowDom&&(i={...i,encapsulation:tr.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof mR?r.applyToHost(t):r instanceof Fw&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(i.encapsulation){case tr.Emulated:s=new mR(l,d,i,this.appId,p,o,a,g);break;case tr.ShadowDom:return new Z8(l,d,t,i,o,a,this.nonce,g);default:s=new Fw(l,d,i,p,o,a,g)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||e)(te(cR),te(dR),te(gm),te(G8),te(ti),te(Ks),te(nt),te(bI))};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac})}return e})();class kw{constructor(n,t,i,r){this.eventManager=n,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,t){return t?this.doc.createElementNS(xw[t]||t,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,t){(gR(n)?n.content:n).appendChild(t)}insertBefore(n,t,i){n&&(gR(n)?n.content:n).insertBefore(t,i)}removeChild(n,t){n&&n.removeChild(t)}selectRootElement(n,t){let i="string"==typeof n?this.doc.querySelector(n):n;if(!i)throw new G(-5104,!1);return t||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,i,r){if(r){t=r+":"+t;const s=xw[r];s?n.setAttributeNS(s,t,i):n.setAttribute(t,i)}else n.setAttribute(t,i)}removeAttribute(n,t,i){if(i){const r=xw[i];r?n.removeAttributeNS(r,t):n.removeAttribute(`${i}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,i,r){r&(pa.DashCase|pa.Important)?n.style.setProperty(t,i,r&pa.Important?"important":""):n.style[t]=i}removeStyle(n,t,i){i&pa.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,i){n[t]=i}setValue(n,t){n.nodeValue=t}listen(n,t,i){if("string"==typeof n&&!(n=ya().getGlobalEventTarget(this.doc,n)))throw new Error(`Unsupported event target ${n} for event ${t}`);return this.eventManager.addEventListener(n,t,this.decoratePreventDefault(i))}decoratePreventDefault(n){return t=>{if("__ngUnwrap__"===t)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(t)):n(t))&&t.preventDefault()}}}function gR(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class Z8 extends kw{constructor(n,t,i,r,s,o,a,l){super(n,s,o,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=fR(r.id,r.styles);for(const p of d){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=p,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,i){return super.insertBefore(this.nodeOrShadowRoot(n),t,i)}removeChild(n,t){return super.removeChild(this.nodeOrShadowRoot(n),t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Fw extends kw{constructor(n,t,i,r,s,o,a,l){super(n,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?fR(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class mR extends Fw{constructor(n,t,i,r,s,o,a,l){const d=r+"-"+i.id;super(n,t,i,s,o,a,l,d),this.contentAttr=function W8(e){return"_ngcontent-%COMP%".replace(Pw,e)}(d),this.hostAttr=function z8(e){return"_nghost-%COMP%".replace(Pw,e)}(d)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){const i=super.createElement(n,t);return super.setAttribute(i,this.contentAttr,""),i}}let K8=(()=>{class e extends uR{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||e)(te(ti))};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac})}return e})();const _R=["alt","control","meta","shift"],Y8={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Q8={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let J8=(()=>{class e extends uR{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,i,r){const s=e.parseEventName(i),o=e.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ya().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=e._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),_R.forEach(d=>{const p=i.indexOf(d);p>-1&&(i.splice(p,1),o+=d+".")}),o+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,i){let r=Y8[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),_R.forEach(o=>{o!==r&&(0,Q8[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{e.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||e)(te(ti))};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac})}return e})();const nW=uA(N3,"browser",[{provide:Ks,useValue:"browser"},{provide:yI,useValue:function X8(){Rw.makeCurrent()},multi:!0},{provide:ti,useFactory:function tW(){return function j2(e){w0=e}(document),document},deps:[]}]),iW=new de(""),bR=[{provide:zm,useClass:class B8{addToWindow(n){Nt.getAngularTestability=(i,r=!0)=>{const s=n.findTestabilityInTree(i,r);if(null==s)throw new G(5103,!1);return s},Nt.getAllAngularTestabilities=()=>n.getAllTestabilities(),Nt.getAllAngularRootElements=()=>n.getAllRootElements(),Nt.frameworkStabilizers||(Nt.frameworkStabilizers=[]),Nt.frameworkStabilizers.push(i=>{const r=Nt.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(n,t,i){return null==t?null:n.getTestability(t)??(i?ya().isShadowRoot(t)?this.findTestabilityInTree(n,t.host,!0):this.findTestabilityInTree(n,t.parentElement,!0):null)}},deps:[]},{provide:sA,useClass:Yb,deps:[nt,Qb,zm]},{provide:Yb,useClass:Yb,deps:[nt,Qb,zm]}],wR=[{provide:M0,useValue:"root"},{provide:No,useFactory:function eW(){return new No},deps:[]},{provide:Mw,useClass:K8,multi:!0,deps:[ti,nt,Ks]},{provide:Mw,useClass:J8,multi:!0,deps:[ti]},pR,dR,cR,{provide:W0,useExisting:pR},{provide:class f8{},useClass:U8,deps:[]},[]];let rW=(()=>{class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:gm,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||e)(te(iW,12))};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({providers:[...wR,...bR],imports:[o8,A3]})}return e})(),ER=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(i){return new(i||e)(te(ti))};static#t=this.\u0275prov=he({token:e,factory:function(i){let r=null;return r=i?new i:function oW(){return new ER(te(ti))}(),r},providedIn:"root"})}return e})();typeof window<"u"&&window;var no=ke(534);(0,no.registerVersion)("firebase","10.6.0","app");class fW extends et{constructor(n,t){super()}schedule(n,t=0){return this}}const d_={setInterval(e,n,...t){const{delegate:i}=d_;return i?.setInterval?i.setInterval(e,n,...t):setInterval(e,n,...t)},clearInterval(e){const{delegate:n}=d_;return(n?.clearInterval||clearInterval)(e)},delegate:void 0};class IR extends fW{constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){var i;if(this.closed)return this;this.state=n;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(n,t,i=0){return d_.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&d_.clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let r,i=!1;try{this.work(n)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:n,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Me(i,this),null!=n&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null,super.unsubscribe()}}}const Vw={now:()=>(Vw.delegate||Date).now(),delegate:void 0};class gf{constructor(n,t=gf.now){this.schedulerActionCtor=n,this.now=t}schedule(n,t=0,i){return new this.schedulerActionCtor(this,n).schedule(i,t)}}gf.now=Vw.now;class SR extends gf{constructor(n,t=gf.now){super(n,t),this.actions=[],this._active=!1}flush(n){const{actions:t}=this;if(this._active)return void t.push(n);let i;this._active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=t.shift());if(this._active=!1,i){for(;n=t.shift();)n.unsubscribe();throw i}}}const mW=new class gW extends SR{}(class pW extends IR{constructor(n,t){super(n,t),this.scheduler=n,this.work=t}schedule(n,t=0){return t>0?super.schedule(n,t):(this.delay=t,this.state=n,this.scheduler.flush(this),this)}execute(n,t){return t>0||this.closed?super.execute(n,t):this._execute(n,t)}requestAsyncId(n,t,i=0){return null!=i&&i>0||null==i&&this.delay>0?super.requestAsyncId(n,t,i):(n.flush(this),0)}}),mf=new SR(IR),_W=mf;function ni(e,n,t){const i=b(e)||n||t?{next:e,error:n,complete:t}:e;return i?H((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(ue(s,l=>{var d;null===(d=i.next)||void 0===d||d.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var d;a=!1,null===(d=i.error)||void 0===d||d.call(i,l),s.error(l)},()=>{var l,d;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(d=i.finalize)||void 0===d||d.call(i)}))}):ln}const Bw=new mu("ANGULARFIRE2_VERSION");class Uw{constructor(){return((e,n)=>{const t=(0,no.getApps)(),i=[];return t.forEach(r=>{r.container.getProvider(e).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i})(yW)}}const yW="app-check";function Uu(){}class NR{zone;delegate;constructor(n,t=mW){this.zone=n,this.delegate=t}now(){return this.delegate.now()}schedule(n,t,i){const r=this.zone;return this.delegate.schedule(function(o){r.runGuarded(()=>{n.apply(this,[o])})},t,i)}}class bW{zone;task=null;constructor(n){this.zone=n}call(n,t){const i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Uu,{},Uu,Uu)),t.pipe(ni({next:i,complete:i,error:i})).subscribe(n).add(i)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let jw=(()=>{class e{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new NR(Zone.current)),this.insideAngular=t.run(()=>new NR(Zone.current,mf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||e)(te(nt))};static \u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ju(){const e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return e}function AR(e){return e.pipe(ai(ju().outsideAngular))}function io(e){return function EW(e){return function(t){return(t=t.lift(new bW(e.ngZone))).pipe(Ii(e.outsideAngular),ai(e.insideAngular))}}(ju())(e)}var ko=ke(106);ko.Z.registerVersion("firebase","10.6.0","app-compat");const IW=["ngOnDestroy"];class RR{constructor(n){return n}}const _f=new de("angularfire2.app.options"),vf=new de("angularfire2.app.name");function h_(e,n,t){const r="object"==typeof t&&t||{};r.name=r.name||"string"==typeof t&&t||"[DEFAULT]";const o=ko.Z.apps.filter(a=>a&&a.name===r.name)[0]||n.runOutsideAngular(()=>ko.Z.initializeApp(e,r));try{if(JSON.stringify(e)!==JSON.stringify(o.options)){const a=!!module.hot;AW("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new RR(o)}const AW=(e,...n)=>{},RW={provide:RR,useFactory:h_,deps:[_f,nt,[new Cl,vf]]};let MW=(()=>{class e{static initializeApp(t,i){return{ngModule:e,providers:[{provide:_f,useValue:t},{provide:vf,useValue:i}]}}constructor(t){ko.Z.registerVersion("angularfire",Bw.full,"core"),ko.Z.registerVersion("angularfire",Bw.full,"app-compat"),ko.Z.registerVersion("angular",II.full,t.toString())}static \u0275fac=function(i){return new(i||e)(te(Ks))};static \u0275mod=bt({type:e});static \u0275inj=yt({providers:[RW]})}return e})();function Hw(e,n,t,i,r){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===e)||[];if(s)return function OW(e,n){try{return e.toString()===n.toString()}catch{return e===n}}(r,o)||(MR("error",`${n} was already initialized on the ${t} Firebase App with different settings.${xW?" You may need to reload as Firebase is not HMR aware.":""}`),MR("warn",{is:r,was:o})),s;{const a=i();return globalThis.\u0275AngularfireInstanceCache.push([e,a,r]),a}}const xW=typeof module<"u"&&!!module.hot,MR=(e,...n)=>{};globalThis.\u0275AngularfireInstanceCache||=[];var yf=ke(861),E=ke(58),Fo=ke(537);const OR="firebasestorage.googleapis.com",xR="storageBucket";class Cn extends E.ZR{constructor(n,t,i=0){super($w(n),`Firebase Storage: ${t} (${$w(n)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Cn.prototype)}get status(){return this.status_}set status(n){this.status_=n}_codeEquals(n){return $w(n)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(n){this.customData.serverResponse=n,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var gn=function(e){return e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment",e}(gn||{});function $w(e){return"storage/"+e}function Gw(){return new Cn(gn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function PR(){return new Cn(gn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function kR(){return new Cn(gn.CANCELED,"User canceled the upload/download.")}function FR(){return new Cn(gn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Hu(e){return new Cn(gn.INVALID_ARGUMENT,e)}function LR(){return new Cn(gn.APP_DELETED,"The Firebase app was deleted.")}function VR(e){return new Cn(gn.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bf(e,n){return new Cn(gn.INVALID_FORMAT,"String does not match format '"+e+"': "+n)}function wf(e){throw new Cn(gn.INTERNAL_ERROR,"Internal error: "+e)}class xi{constructor(n,t){this.bucket=n,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const n=encodeURIComponent;return"/b/"+n(this.bucket)+"/o/"+n(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(n,t){let i;try{i=xi.makeFromUrl(n,t)}catch{return new xi(n,"")}if(""===i.path)return i;throw function GW(e){return new Cn(gn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}(n)}static makeFromUrl(n,t){let i=null;const r="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+r+"(/(.*))?$","i");function d(Q){Q.path_=decodeURIComponent(Q.path)}const g=t.replace(/[.]/g,"\\."),Z=[{regex:a,indices:{bucket:1,path:3},postModify:function s(Q){"/"===Q.path.charAt(Q.path.length-1)&&(Q.path_=Q.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${g}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:d},{regex:new RegExp(`^https?://${t===OR?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:d}];for(let Q=0;Q<Z.length;Q++){const ce=Z[Q],Ae=ce.regex.exec(n);if(Ae){let lt=Ae[ce.indices.path];lt||(lt=""),i=new xi(Ae[ce.indices.bucket],lt),ce.postModify(i);break}}if(null==i)throw function $W(e){return new Cn(gn.INVALID_URL,"Invalid URL '"+e+"'.")}(n);return i}}class KW{constructor(n){this.promise_=Promise.reject(n)}getPromise(){return this.promise_}cancel(n=!1){}}function f_(e){return"string"==typeof e||e instanceof String}function BR(e){return Ww()&&e instanceof Blob}function Ww(){return typeof Blob<"u"&&!(0,E.UG)()}function zw(e,n,t,i){if(i<n)throw Hu(`Invalid value for '${e}'. Expected ${n} or greater.`);if(i>t)throw Hu(`Invalid value for '${e}'. Expected ${t} or less.`)}function Lo(e,n,t){let i=n;return null==t&&(i=`https://${n}`),`${t}://${i}/v0${e}`}function UR(e){const n=encodeURIComponent;let t="?";for(const i in e)e.hasOwnProperty(i)&&(t=t+(n(i)+"=")+n(e[i])+"&");return t=t.slice(0,-1),t}var $u=function(e){return e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT",e}($u||{});function jR(e,n){const t=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==n.indexOf(e);return t||r||s}class tz{constructor(n,t,i,r,s,o,a,l,d,p,g,_=!0){this.url_=n,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=d,this.progressCallback_=p,this.connectionFactory_=g,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,w)=>{this.resolve_=v,this.reject_=w,this.start_()})}start_(){const t=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());!function JW(e){return void 0!==e}(l)?s():s(l)}catch(l){o(l)}else if(null!==a){const l=Gw();l.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,l):l)}else o(r.canceled?this.appDelete_?LR():kR():PR())};this.canceled_?t(0,new p_(!1,null,!0)):this.backoffId_=function YW(e,n,t){let i=1,r=null,s=null,o=!1,a=0;function l(){return 2===a}let d=!1;function p(...A){d||(d=!0,n.apply(null,A))}function g(A){r=setTimeout(()=>{r=null,e(v,l())},A)}function _(){s&&clearTimeout(s)}function v(A,...B){if(d)return void _();if(A)return _(),void p.call(null,A,...B);if(l()||o)return _(),void p.call(null,A,...B);let Z;i<64&&(i*=2),1===a?(a=2,Z=0):Z=1e3*(i+Math.random()),g(Z)}let w=!1;function T(A){w||(w=!0,_(),!d&&(null!==r?(A||(a=2),clearTimeout(r),g(0)):A||(a=1)))}return g(0),s=setTimeout(()=>{o=!0,T(!0)},t),T}((i,r)=>{if(r)return void i(!1,new p_(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===$u.NO_ERROR,l=s.getStatus();if(!a||jR(l,this.additionalRetryCodes_)&&this.retry){const p=s.getErrorCode()===$u.ABORT;return void i(!1,new p_(!1,null,p))}const d=-1!==this.successCodes_.indexOf(l);i(!0,new p_(d,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(n){this.canceled_=!0,this.appDelete_=n||!1,null!==this.backoffId_&&function QW(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class p_{constructor(n,t,i){this.wasSuccessCode=n,this.connection=t,this.canceled=!!i}}function lz(...e){const n=function az(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==n){const t=new n;for(let i=0;i<e.length;i++)t.append(e[i]);return t.getBlob()}if(Ww())return new Blob(e);throw new Cn(gn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const wr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class qw{constructor(n,t){this.data=n,this.contentType=t||null}}function Zw(e,n){switch(e){case wr.RAW:return new qw(HR(n));case wr.BASE64:case wr.BASE64URL:return new qw($R(e,n));case wr.DATA_URL:return new qw(function hz(e){const n=new GR(e);return n.base64?$R(wr.BASE64,n.rest):function dz(e){let n;try{n=decodeURIComponent(e)}catch{throw bf(wr.DATA_URL,"Malformed data URL.")}return HR(n)}(n.rest)}(n),function fz(e){return new GR(e).contentType}(n))}throw Gw()}function HR(e){const n=[];for(let t=0;t<e.length;t++){let i=e.charCodeAt(t);i<=127?n.push(i):i<=2047?n.push(192|i>>6,128|63&i):55296==(64512&i)?t<e.length-1&&56320==(64512&e.charCodeAt(t+1))?(i=65536|(1023&i)<<10|1023&e.charCodeAt(++t),n.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):n.push(239,191,189):56320==(64512&i)?n.push(239,191,189):n.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(n)}function $R(e,n){switch(e){case wr.BASE64:{const r=-1!==n.indexOf("-"),s=-1!==n.indexOf("_");if(r||s)throw bf(e,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case wr.BASE64URL:{const r=-1!==n.indexOf("+"),s=-1!==n.indexOf("/");if(r||s)throw bf(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");n=n.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function uz(e){if(typeof atob>"u")throw function ZW(e){return new Cn(gn.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(e)}(n)}catch(r){throw r.message.includes("polyfill")?r:bf(e,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class GR{constructor(n){this.base64=!1,this.contentType=null;const t=n.match(/^data:([^,]+)?,/);if(null===t)throw bf(wr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;null!=i&&(this.base64=function pz(e,n){return e.length>=n.length&&e.substring(e.length-n.length)===n}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=n.substring(n.indexOf(",")+1)}}class ro{constructor(n,t){let i=0,r="";BR(n)?(this.data_=n,i=n.size,r=n.type):n instanceof ArrayBuffer?(t?this.data_=new Uint8Array(n):(this.data_=new Uint8Array(n.byteLength),this.data_.set(new Uint8Array(n))),i=this.data_.length):n instanceof Uint8Array&&(t?this.data_=n:(this.data_=new Uint8Array(n.length),this.data_.set(n)),i=n.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(n,t){if(BR(this.data_)){const r=function cz(e,n,t){return e.webkitSlice?e.webkitSlice(n,t):e.mozSlice?e.mozSlice(n,t):e.slice?e.slice(n,t):null}(this.data_,n,t);return null===r?null:new ro(r)}{const i=new Uint8Array(this.data_.buffer,n,t-n);return new ro(i,!0)}}static getBlob(...n){if(Ww()){const t=n.map(i=>i instanceof ro?i.data_:i);return new ro(lz.apply(null,t))}{const t=n.map(o=>f_(o)?Zw(wr.RAW,o).data:o.data_);let i=0;t.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new ro(r,!0)}}uploadData(){return this.data_}}function Kw(e){let n;try{n=JSON.parse(e)}catch{return null}return function ez(e){return"object"==typeof e&&!Array.isArray(e)}(n)?n:null}function WR(e){const n=e.lastIndexOf("/",e.length-2);return-1===n?e:e.slice(n+1)}function _z(e,n){return n}class qi{constructor(n,t,i,r){this.server=n,this.local=t||n,this.writable=!!i,this.xform=r||_z}}let g_=null;function Ef(){if(g_)return g_;const e=[];e.push(new qi("bucket")),e.push(new qi("generation")),e.push(new qi("metageneration")),e.push(new qi("name","fullPath",!0));const t=new qi("name");t.xform=function n(s,o){return function vz(e){return!f_(e)||e.length<2?e:WR(e)}(o)},e.push(t);const r=new qi("size");return r.xform=function i(s,o){return void 0!==o?Number(o):o},e.push(r),e.push(new qi("timeCreated")),e.push(new qi("updated")),e.push(new qi("md5Hash",null,!0)),e.push(new qi("cacheControl",null,!0)),e.push(new qi("contentDisposition",null,!0)),e.push(new qi("contentEncoding",null,!0)),e.push(new qi("contentLanguage",null,!0)),e.push(new qi("contentType",null,!0)),e.push(new qi("metadata","customMetadata",!0)),g_=e,g_}function zR(e,n,t){const i=Kw(n);return null===i?null:function bz(e,n,t){const i={type:"file"},r=t.length;for(let s=0;s<r;s++){const o=t[s];i[o.local]=o.xform(i,n[o.server])}return function yz(e,n){Object.defineProperty(e,"ref",{get:function t(){const s=new xi(e.bucket,e.fullPath);return n._makeStorageReference(s)}})}(i,e),i}(e,i,t)}function Yw(e,n){const t={},i=n.length;for(let r=0;r<i;r++){const s=n[r];s.writable&&(t[s.server]=e[s.local])}return JSON.stringify(t)}const qR="prefixes",ZR="items";class so{constructor(n,t,i,r){this.url=n,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function oo(e){if(!e)throw Gw()}function m_(e,n){return function t(i,r){const s=zR(e,r,n);return oo(null!==s),s}}function Gu(e){return function n(t,i){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function jW(){return new Cn(gn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function UW(){return new Cn(gn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function BW(e){return new Cn(gn.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(e.bucket):403===t.getStatus()?function HW(e){return new Cn(gn.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}(e.path):i,r.status=t.getStatus(),r.serverResponse=i.serverResponse,r}}function Df(e){const n=Gu(e);return function t(i,r){let s=n(i,r);return 404===i.getStatus()&&(s=function VW(e){return new Cn(gn.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}(e.path)),s.serverResponse=r.serverResponse,s}}function KR(e,n,t){const r=Lo(n.fullServerUrl(),e.host,e._protocol),o=e.maxOperationRetryTime,a=new so(r,"GET",m_(e,t),o);return a.errorHandler=Df(n),a}function Iz(e,n,t,i,r){const s={};s.prefix=n.isRoot?"":n.path+"/",t&&t.length>0&&(s.delimiter=t),i&&(s.pageToken=i),r&&(s.maxResults=r);const a=Lo(n.bucketOnlyServerUrl(),e.host,e._protocol),d=e.maxOperationRetryTime,p=new so(a,"GET",function Cz(e,n){return function t(i,r){const s=function Dz(e,n,t){const i=Kw(t);return null===i?null:function Ez(e,n,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[qR])for(const r of t[qR]){const s=r.replace(/\/$/,""),o=e._makeStorageReference(new xi(n,s));i.prefixes.push(o)}if(t[ZR])for(const r of t[ZR]){const s=e._makeStorageReference(new xi(n,r.name));i.items.push(s)}return i}(e,n,i)}(e,n,r);return oo(null!==s),s}}(e,n.bucket),d);return p.urlParams=s,p.errorHandler=Gu(n),p}function QR(e,n,t){const i=Object.assign({},t);return i.fullPath=e.path,i.size=n.size(),i.contentType||(i.contentType=function Rz(e,n){return e&&e.contentType||n&&n.type()||"application/octet-stream"}(null,n)),i}class __{constructor(n,t,i,r){this.current=n,this.total=t,this.finalized=!!i,this.metadata=r||null}}function Qw(e,n){let t=null;try{t=e.getResponseHeader("X-Goog-Upload-Status")}catch{oo(!1)}return oo(!!t&&-1!==(n||["active"]).indexOf(t)),t}const Pz={STATE_CHANGED:"state_changed"},Zi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Jw(e){switch(e){case"running":case"pausing":case"canceling":return Zi.RUNNING;case"paused":return Zi.PAUSED;case"success":return Zi.SUCCESS;case"canceled":return Zi.CANCELED;default:return Zi.ERROR}}class kz{constructor(n,t,i){if(function XW(e){return"function"==typeof e}(n)||null!=t||null!=i)this.next=n,this.error=t??void 0,this.complete=i??void 0;else{const s=n;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Wu(e){return(...n)=>{Promise.resolve().then(()=>e(...n))}}let eM=null;class Fz{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$u.NO_ERROR,this.sendPromise_=new Promise(n=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$u.ABORT,n()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$u.NETWORK_ERROR,n()}),this.xhr_.addEventListener("load",()=>{n()})})}send(n,t,i,r){if(this.sent_)throw wf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,n,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw wf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw wf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw wf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw wf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(n){return this.xhr_.getResponseHeader(n)}addUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",n)}removeUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",n)}}class Lz extends Fz{initXhr(){this.xhr_.responseType="text"}}function ys(){return eM?eM():new Lz}class tM{constructor(n,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=n,this._blob=t,this._metadata=i,this._mappings=Ef(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(gn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(jR(r.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=PR()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(gn.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const n=this._transferred;return t=>this._updateProgress(n+t)}_shouldDoResumable(n){return n.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(n){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":n(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((n,t)=>{const i=function Mz(e,n,t,i,r){const s=n.bucketOnlyServerUrl(),o=QR(n,i,r),a={name:o.fullPath},l=Lo(s,e.host,e._protocol),p={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},g=Yw(o,t),w=new so(l,"POST",function v(T){let A;Qw(T);try{A=T.getResponseHeader("X-Goog-Upload-URL")}catch{oo(!1)}return oo(f_(A)),A},e.maxUploadRetryTime);return w.urlParams=a,w.headers=p,w.body=g,w.errorHandler=Gu(n),w}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,ys,n,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const n=this._uploadUrl;this._resolveToken((t,i)=>{const r=function Oz(e,n,t,i){const l=new so(t,"POST",function s(d){const p=Qw(d,["active","final"]);let g=null;try{g=d.getResponseHeader("X-Goog-Upload-Size-Received")}catch{oo(!1)}g||oo(!1);const _=Number(g);return oo(!isNaN(_)),new __(_,i.size(),"final"===p)},e.maxUploadRetryTime);return l.headers={"X-Goog-Upload-Command":"query"},l.errorHandler=Gu(n),l}(this._ref.storage,this._ref._location,n,this._blob),s=this._ref.storage._makeRequest(r,ys,t,i);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const n=262144*this._chunkMultiplier,t=new __(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let o;try{o=function xz(e,n,t,i,r,s,o,a){const l=new __(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw function zW(){return new Cn(gn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const d=l.total-l.current;let p=d;r>0&&(p=Math.min(p,r));const g=l.current;let v="";v=0===p?"finalize":d===p?"upload, finalize":"upload";const w={"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":`${l.current}`},T=i.slice(g,g+p);if(null===T)throw FR();const Z=new so(t,"POST",function A(Q,ce){const Ae=Qw(Q,["active","final"]),at=l.current+p,lt=i.size();let on;return on="final"===Ae?m_(n,s)(Q,ce):null,new __(at,lt,"final"===Ae,on)},n.maxUploadRetryTime);return Z.headers=w,Z.body=T.uploadData(),Z.progressCallback=a||null,Z.errorHandler=Gu(e),Z}(this._ref._location,this._ref.storage,i,this._blob,n,this._mappings,t,this._makeProgressCallback())}catch(l){return this._error=l,void this._transition("error")}const a=this._ref.storage._makeRequest(o,ys,r,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((n,t)=>{const i=KR(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,ys,n,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((n,t)=>{const i=function JR(e,n,t,i,r){const s=n.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},l=function a(){let Z="";for(let Q=0;Q<2;Q++)Z+=Math.random().toString().slice(2);return Z}();o["Content-Type"]="multipart/related; boundary="+l;const d=QR(n,i,r),p=Yw(d,t),v=ro.getBlob("--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+p+"\r\n--"+l+"\r\nContent-Type: "+d.contentType+"\r\n\r\n",i,"\r\n--"+l+"--");if(null===v)throw FR();const w={name:d.fullPath},T=Lo(s,e.host,e._protocol),B=e.maxUploadRetryTime,R=new so(T,"POST",m_(e,t),B);return R.urlParams=w,R.headers=o,R.body=v.uploadData(),R.errorHandler=Gu(n),R}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,ys,n,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(n){const t=this._transferred;this._transferred=n,this._transferred!==t&&this._notifyObservers()}_transition(n){if(this._state!==n)switch(n){case"canceling":case"pausing":this._state=n,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=n,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=n,this._notifyObservers();break;case"canceled":this._error=kR(),this._state=n,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const n=Jw(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:n,metadata:this._metadata,task:this,ref:this._ref}}on(n,t,i,r){const s=new kz(t||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(n,t){return this._promise.then(n,t)}catch(n){return this.then(null,n)}_addObserver(n){this._observers.push(n),this._notifyObserver(n)}_removeObserver(n){const t=this._observers.indexOf(n);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let n=!0;switch(Jw(this._state)){case Zi.SUCCESS:Wu(this._resolve.bind(null,this.snapshot))();break;case Zi.CANCELED:case Zi.ERROR:Wu(this._reject.bind(null,this._error))();break;default:n=!1}n&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(n){switch(Jw(this._state)){case Zi.RUNNING:case Zi.PAUSED:n.next&&Wu(n.next.bind(n,this.snapshot))();break;case Zi.SUCCESS:n.complete&&Wu(n.complete.bind(n))();break;default:n.error&&Wu(n.error.bind(n,this._error))()}}resume(){const n="paused"===this._state||"pausing"===this._state;return n&&this._transition("running"),n}pause(){const n="running"===this._state;return n&&this._transition("pausing"),n}cancel(){const n="running"===this._state||"pausing"===this._state;return n&&this._transition("canceling"),n}}class Ll{constructor(n,t){this._service=n,this._location=t instanceof xi?t:xi.makeFromUrl(t,n.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(n,t){return new Ll(n,t)}get root(){const n=new xi(this._location.bucket,"");return this._newRef(this._service,n)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return WR(this._location.path)}get storage(){return this._service}get parent(){const n=function gz(e){if(0===e.length)return null;const n=e.lastIndexOf("/");return-1===n?"":e.slice(0,n)}(this._location.path);if(null===n)return null;const t=new xi(this._location.bucket,n);return new Ll(this._service,t)}_throwIfRoot(n){if(""===this._location.path)throw VR(n)}}function iM(e,n,t){return Xw.apply(this,arguments)}function Xw(){return(Xw=(0,yf.Z)(function*(e,n,t){const r=yield rM(e,{pageToken:t});n.prefixes.push(...r.prefixes),n.items.push(...r.items),null!=r.nextPageToken&&(yield iM(e,n,r.nextPageToken))})).apply(this,arguments)}function rM(e,n){null!=n&&"number"==typeof n.maxResults&&zw("options.maxResults",1,1e3,n.maxResults);const t=n||{},i=Iz(e.storage,e._location,"/",t.pageToken,t.maxResults);return e.storage.makeRequestWithTokens(i,ys)}function Kz(e){e._throwIfRoot("getDownloadURL");const n=function Sz(e,n,t){const r=Lo(n.fullServerUrl(),e.host,e._protocol),o=e.maxOperationRetryTime,a=new so(r,"GET",function Tz(e,n){return function t(i,r){const s=zR(e,r,n);return oo(null!==s),function wz(e,n,t,i){const r=Kw(n);if(null===r||!f_(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(d=>{const g=e.fullPath;return Lo("/b/"+o(e.bucket)+"/o/"+o(g),t,i)+UR({alt:"media",token:d})})[0]}(s,r,e.host,e._protocol)}}(e,t),o);return a.errorHandler=Df(n),a}(e.storage,e._location,Ef());return e.storage.makeRequestWithTokens(n,ys).then(t=>{if(null===t)throw function qW(){return new Cn(gn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function sM(e,n){const t=function mz(e,n){const t=n.split("/").filter(i=>i.length>0).join("/");return 0===e.length?t:e+"/"+t}(e._location.path,n),i=new xi(e._location.bucket,t);return new Ll(e.storage,i)}function oM(e,n){if(e instanceof eE){const t=e;if(null==t._bucket)throw function WW(){return new Cn(gn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+xR+"' property when initializing the app?")}();const i=new Ll(t,t._bucket);return null!=n?oM(i,n):i}return void 0!==n?sM(e,n):e}function Xz(e,n){if(n&&function Qz(e){return/^[A-Za-z]+:\/\//.test(e)}(n)){if(e instanceof eE)return function Jz(e,n){return new Ll(e,n)}(e,n);throw Hu("To use ref(service, url), the first argument must be a Storage instance.")}return oM(e,n)}function aM(e,n){const t=n?.[xR];return null==t?null:xi.makeFromBucketSpec(t,e)}class eE{constructor(n,t,i,r,s){this.app=n,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=OR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?xi.makeFromBucketSpec(r,this._host):aM(this._host,this.app.options)}get host(){return this._host}set host(n){this._host=n,this._bucket=null!=this._url?xi.makeFromBucketSpec(this._url,n):aM(n,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(n){zw("time",0,Number.POSITIVE_INFINITY,n),this._maxUploadRetryTime=n}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(n){zw("time",0,Number.POSITIVE_INFINITY,n),this._maxOperationRetryTime=n}_getAuthToken(){var n=this;return(0,yf.Z)(function*(){if(n._overrideAuthToken)return n._overrideAuthToken;const t=n._authProvider.getImmediate({optional:!0});if(t){const i=yield t.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var n=this;return(0,yf.Z)(function*(){const t=n._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(n=>n.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(n){return new Ll(this,n)}_makeRequest(n,t,i,r,s=!0){if(this._deleted)return new KW(LR());{const o=function oz(e,n,t,i,r,s,o=!0){const a=UR(e.urlParams),l=e.url+a,d=Object.assign({},e.headers);return function rz(e,n){n&&(e["X-Firebase-GMPID"]=n)}(d,n),function nz(e,n){null!==n&&n.length>0&&(e.Authorization="Firebase "+n)}(d,t),function iz(e,n){e["X-Firebase-Storage-Version"]="webjs/"+(n??"AppManager")}(d,s),function sz(e,n){null!==n&&(e["X-Firebase-AppCheck"]=n)}(d,i),new tz(l,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,o)}(n,this._appId,i,r,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(n,t){var i=this;return(0,yf.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(n,t,r,s).getPromise()})()}}const lM="@firebase/storage";function dM(e,n){return Xz(e=(0,E.m9)(e),n)}function c4(e,{instanceIdentifier:n}){const t=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return new eE(t,i,r,n,no.SDK_VERSION)}!function u4(){(0,no._registerComponent)(new Fo.wA("storage",c4,"PUBLIC").setMultipleInstances(!0)),(0,no.registerVersion)(lM,"0.11.2",""),(0,no.registerVersion)(lM,"0.11.2","esm2017")}();class v_{constructor(n,t,i){this._delegate=n,this.task=t,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class fM{constructor(n,t){this._delegate=n,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new v_(this._delegate.snapshot,this,this._ref)}then(n,t){return this._delegate.then(i=>{if(n)return n(new v_(i,this,this._ref))},t)}on(n,t,i,r){let s;return t&&(s="function"==typeof t?o=>t(new v_(o,this,this._ref)):{next:t.next?o=>t.next(new v_(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(n,s,i||void 0,r||void 0)}}class pM{constructor(n,t){this._delegate=n,this._service=t}get prefixes(){return this._delegate.prefixes.map(n=>new Vo(n,this._service))}get items(){return this._delegate.items.map(n=>new Vo(n,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Vo{constructor(n,t){this._delegate=n,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(n){const t=function l4(e,n){return sM(e,n)}(this._delegate,n);return new Vo(t,this.storage)}get root(){return new Vo(this._delegate.root,this.storage)}get parent(){const n=this._delegate.parent;return null==n?null:new Vo(n,this.storage)}put(n,t){return this._throwIfRoot("put"),new fM(function t4(e,n,t){return function Gz(e,n,t){return e._throwIfRoot("uploadBytesResumable"),new tM(e,new ro(n),t)}(e=(0,E.m9)(e),n,t)}(this._delegate,n,t),this)}putString(n,t=wr.RAW,i){this._throwIfRoot("putString");const r=Zw(t,n),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new fM(new tM(this._delegate,new ro(r.data,!0),s),this)}listAll(){return function s4(e){return function zz(e){const n={prefixes:[],items:[]};return iM(e,n).then(()=>n)}(e=(0,E.m9)(e))}(this._delegate).then(n=>new pM(n,this.storage))}list(n){return function r4(e,n){return rM(e=(0,E.m9)(e),n)}(this._delegate,n||void 0).then(t=>new pM(t,this.storage))}getMetadata(){return function n4(e){return function qz(e){e._throwIfRoot("getMetadata");const n=KR(e.storage,e._location,Ef());return e.storage.makeRequestWithTokens(n,ys)}(e=(0,E.m9)(e))}(this._delegate)}updateMetadata(n){return function i4(e,n){return function Zz(e,n){e._throwIfRoot("updateMetadata");const t=function Nz(e,n,t,i){const s=Lo(n.fullServerUrl(),e.host,e._protocol),a=Yw(t,i),d=e.maxOperationRetryTime,p=new so(s,"PATCH",m_(e,i),d);return p.headers={"Content-Type":"application/json; charset=utf-8"},p.body=a,p.errorHandler=Df(n),p}(e.storage,e._location,n,Ef());return e.storage.makeRequestWithTokens(t,ys)}(e=(0,E.m9)(e),n)}(this._delegate,n)}getDownloadURL(){return function o4(e){return Kz(e=(0,E.m9)(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function a4(e){return function Yz(e){e._throwIfRoot("deleteObject");const n=function Az(e,n){const i=Lo(n.fullServerUrl(),e.host,e._protocol),a=new so(i,"DELETE",function o(l,d){},e.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=Df(n),a}(e.storage,e._location);return e.storage.makeRequestWithTokens(n,ys)}(e=(0,E.m9)(e))}(this._delegate)}_throwIfRoot(n){if(""===this._delegate._location.path)throw VR(n)}}class gM{constructor(n,t){this.app=n,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(n){if(mM(n))throw Hu("ref() expected a child path but got a URL, use refFromURL instead.");return new Vo(dM(this._delegate,n),this)}refFromURL(n){if(!mM(n))throw Hu("refFromURL() expected a full URL but got a child path, use ref() instead.");try{xi.makeFromUrl(n,this._delegate.host)}catch{throw Hu("refFromUrl() expected a valid full URL but got an invalid one.")}return new Vo(dM(this._delegate,n),this)}setMaxUploadRetryTime(n){this._delegate.maxUploadRetryTime=n}setMaxOperationRetryTime(n){this._delegate.maxOperationRetryTime=n}useEmulator(n,t,i={}){!function hM(e,n,t,i={}){!function e4(e,n,t,i={}){e.host=`${n}:${t}`,e._protocol="http";const{mockUserToken:r}=i;r&&(e._overrideAuthToken="string"==typeof r?r:(0,E.Sg)(r,e.app.options.projectId))}(e,n,t,i)}(this._delegate,n,t,i)}}function mM(e){return/^[A-Za-z]+:\/\//.test(e)}function p4(e,{instanceIdentifier:n}){const t=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new gM(t,i)}function _M(e){const n=function m4(e){return new He(n=>{const t=o=>n.next(o);t(e.snapshot);const s=e.on("state_changed",t);return e.then(o=>{t(o),n.complete()},o=>{t(e.snapshot),(o=>{n.error(o)})(o)}),function(){s()}}).pipe(function PW(e,n=mf){return H((t,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const d=s;s=null,i.next(d)}};function l(){const d=o+e,p=n.now();if(p<d)return r=this.schedule(void 0,d-p),void i.add(r);a()}t.subscribe(ue(i,d=>{s=d,o=n.now(),r||(r=n.schedule(l,e),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}(0))}(e);return{task:e,then:e.then.bind(e),catch:e.catch.bind(e),pause:e.pause.bind(e),cancel:e.cancel.bind(e),resume:e.resume.bind(e),snapshotChanges:()=>n,percentageChanges:()=>n.pipe(me(t=>t.bytesTransferred/t.totalBytes*100))}}function y_(e){return{getDownloadURL:()=>W(void 0).pipe(AR,ft(()=>e.getDownloadURL()),io),getMetadata:()=>W(void 0).pipe(AR,ft(()=>e.getMetadata()),io),delete:()=>S(e.delete()),child:n=>y_(e.child(n)),updateMetadata:n=>S(e.updateMetadata(n)),put:(n,t)=>_M(e.put(n,t)),putString:(n,t,i)=>_M(e.putString(n,t,i)),list:n=>S(e.list(n)),listAll:()=>S(e.listAll())}}!function g4(e){const n={TaskState:Zi,TaskEvent:Pz,StringFormat:wr,Storage:gM,Reference:Vo};e.INTERNAL.registerComponent(new Fo.wA("storage-compat",p4,"PUBLIC").setServiceProps(n).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.2")}(ko.Z);const _4=new de("angularfire2.storageBucket"),v4=new de("angularfire2.storage.maxUploadRetryTime"),y4=new de("angularfire2.storage.maxOperationRetryTime"),b4=new de("angularfire2.storage.use-emulator");let vM=(()=>{class e{storage;constructor(t,i,r,s,o,a,l,d,p,g){const _=h_(t,o,i);this.storage=Hw(`${_.name}.storage.${r}`,"AngularFireStorage",_.name,()=>{const v=o.runOutsideAngular(()=>_.storage(r||void 0)),w=p;return w&&v.useEmulator(...w),l&&v.setMaxUploadRetryTime(l),d&&v.setMaxOperationRetryTime(d),v},[l,d])}ref(t){return y_(this.storage.ref(t))}refFromURL(t){return y_(this.storage.refFromURL(t))}upload(t,i,r){return y_(this.storage.ref(t)).put(i,r)}static \u0275fac=function(i){return new(i||e)(te(_f),te(vf,8),te(_4,8),te(Ks),te(nt),te(jw),te(v4,8),te(y4,8),te(b4,8),te(Uw,8))};static \u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})(),w4=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=bt({type:e});static \u0275inj=yt({})}return e})(),E4=(()=>{class e{constructor(){ko.Z.registerVersion("angularfire",Bw.full,"gcs-compat")}static \u0275fac=function(i){return new(i||e)};static \u0275mod=bt({type:e});static \u0275inj=yt({providers:[vM],imports:[w4]})}return e})();const{isArray:D4}=Array;function tE(e){return me(n=>function C4(e,n){return D4(n)?e(...n):e(n)}(e,n))}const T4=["addListener","removeListener"],I4=["addEventListener","removeEventListener"],S4=["on","off"];function bi(e,n,t,i){if(b(t)&&(i=t,t=void 0),i)return bi(e,n,t).pipe(tE(i));const[r,s]=function R4(e){return b(e.addEventListener)&&b(e.removeEventListener)}(e)?I4.map(o=>a=>e[o](n,a,t)):function N4(e){return b(e.addListener)&&b(e.removeListener)}(e)?T4.map(yM(e,n)):function A4(e){return b(e.on)&&b(e.off)}(e)?S4.map(yM(e,n)):[];if(!r&&ht(e))return wt(o=>bi(o,n,t))(se(e));if(!r)throw new TypeError("Invalid event target");return new He(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function yM(e,n){return t=>i=>e[t](n,i)}const{isArray:O4}=Array;function wM(e){return 1===e.length&&O4(e[0])?e[0]:e}function nE(...e){const n=ns(e),t=wM(e);return t.length?new He(i=>{let r=t.map(()=>[]),s=t.map(()=>!1);i.add(()=>{r=s=null});for(let o=0;!i.closed&&o<t.length;o++)se(t[o]).subscribe(ue(i,a=>{if(r[o].push(a),r.every(l=>l.length)){const l=r.map(d=>d.shift());i.next(n?n(...l):l),r.some((d,p)=>!d.length&&s[p])&&i.complete()}},()=>{s[o]=!0,!r[o].length&&i.complete()}));return()=>{r=s=null}}):Lt}function Cf(...e){return function P4(){return Et(1)}()(S(e,Ms(e)))}function xn(e){return H((n,t)=>{se(e).subscribe(ue(t,()=>t.complete(),ge)),!t.closed&&n.subscribe(t)})}function ii(e,n){return H((t,i)=>{let r=0;t.subscribe(ue(i,s=>e.call(n,s,r++)&&i.next(s)))})}function wi(e){return e<=0?()=>Lt:H((n,t)=>{let i=0;n.subscribe(ue(t,r=>{++i<=e&&(t.next(r),e<=i&&t.complete())}))})}function b_(...e){const n=ns(e);return H((t,i)=>{const r=e.length,s=new Array(r);let o=e.map(()=>!1),a=!1;for(let l=0;l<r;l++)se(e[l]).subscribe(ue(i,d=>{s[l]=d,!a&&!o[l]&&(o[l]=!0,(a=o.every(ln))&&(o=null))},ge));t.subscribe(ue(i,l=>{if(a){const d=[l,...s];i.next(n?n(...d):d)}}))})}const{isArray:t5}=Array,{getPrototypeOf:n5,prototype:i5,keys:r5}=Object;Math,Math,Math;const gq=["*"],Wq=["dialog"];function Hl(e){return"string"==typeof e}function $l(e){return null!=e}function Ju(e){return(e||document.body).getBoundingClientRect()}const ax={animation:!0,transitionTimerDelayMs:5},L9=()=>{},{transitionTimerDelayMs:V9}=ax,Lf=new Map,hr=(e,n,t,i)=>{let r=i.context||{};const s=Lf.get(n);if(s)switch(i.runningTransition){case"continue":return Lt;case"stop":e.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),Lf.delete(n)}const o=t(n,i.animation,r)||L9;if(!i.animation||"none"===window.getComputedStyle(n).transitionProperty)return e.run(()=>o()),W(void 0).pipe(function k9(e){return n=>new He(t=>n.subscribe({next:o=>e.run(()=>t.next(o)),error:o=>e.run(()=>t.error(o)),complete:()=>e.run(()=>t.complete())}))}(e));const a=new L,l=new L,d=a.pipe(function k4(...e){return n=>Cf(n,W(...e))}(!0));Lf.set(n,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});const p=function F9(e){const{transitionDelay:n,transitionDuration:t}=window.getComputedStyle(e);return 1e3*(parseFloat(n)+parseFloat(t))}(n);return e.runOutsideAngular(()=>{const g=bi(n,"transitionend").pipe(xn(d),ii(({target:v})=>v===n));(function EM(...e){return 1===(e=wM(e)).length?se(e[0]):new He(function x4(e){return n=>{let t=[];for(let i=0;t&&!n.closed&&i<e.length;i++)t.push(se(e[i]).subscribe(ue(n,r=>{if(t){for(let s=0;s<t.length;s++)s!==i&&t[s].unsubscribe();t=null}n.next(r)})))}}(e))})(function bM(e=0,n,t=_W){let i=-1;return null!=n&&(oi(n)?t=n:i=n),new He(r=>{let s=function M4(e){return e instanceof Date&&!isNaN(e)}(e)?+e-t.now():e;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}(p+V9).pipe(xn(d)),g,l).pipe(xn(d)).subscribe(()=>{Lf.delete(n),e.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};let L_=(()=>{class e{constructor(){this.animation=ax.animation}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),mx=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({})}return e})(),_x=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({})}return e})(),bx=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({})}return e})(),wx=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({})}return e})();var Kt=function(e){return e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.ArrowLeft=37]="ArrowLeft",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowRight=39]="ArrowRight",e[e.ArrowDown=40]="ArrowDown",e}(Kt||{});typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const Nx=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Ax(e){const n=Array.from(e.querySelectorAll(Nx)).filter(t=>-1!==t.tabIndex);return[n[0],n[n.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let Hx=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({})}return e})(),Wx=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({})}return e})();class Zl{constructor(n,t,i){this.nodes=n,this.viewRef=t,this.componentRef=i}}let LZ=(()=>{class e{constructor(t,i){this._el=t,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(wi(1)).subscribe(()=>{hr(this._zone,this._el.nativeElement,(t,i)=>{i&&Ju(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return hr(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}static#e=this.\u0275fac=function(i){return new(i||e)(O(Pt),O(nt))};static#t=this.\u0275cmp=qn({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(i,r){2&i&&(Rl("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),Ct("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Wr],decls:0,vars:0,template:function(i,r){},encapsulation:2})}return e})();class zx{update(n){}close(n){}dismiss(n){}}const VZ=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],BZ=["animation","backdropClass"];class UZ{_applyWindowOptions(n,t){VZ.forEach(i=>{$l(t[i])&&(n[i]=t[i])})}_applyBackdropOptions(n,t){BZ.forEach(i=>{$l(t[i])&&(n[i]=t[i])})}update(n){this._applyWindowOptions(this._windowCmptRef.instance,n),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,n)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(xn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(xn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(n,t,i,r){this._windowCmptRef=n,this._contentRef=t,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new L,this._dismissed=new L,this._hidden=new L,n.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,o)=>{this._resolve=s,this._reject=o}),this.result.then(null,()=>{})}close(n){this._windowCmptRef&&(this._closed.next(n),this._resolve(n),this._removeModalElements())}_dismiss(n){this._dismissed.next(n),this._reject(n),this._removeModalElements()}dismiss(n){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function rx(e){return e&&e.then}(t)?!1!==t&&this._dismiss(n):t.then(i=>{!1!==i&&this._dismiss(n)},()=>{})}else this._dismiss(n)}_removeModalElements(){const n=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():W(void 0);n.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),nE(n,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var QE=function(e){return e[e.BACKDROP_CLICK=0]="BACKDROP_CLICK",e[e.ESC=1]="ESC",e}(QE||{});let jZ=(()=>{class e{constructor(t,i,r){this._document=t,this._elRef=i,this._zone=r,this._closed$=new L,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Ie,this.shown=new L,this.hidden=new L}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":Hl(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(wi(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,i={animation:this.animation,runningTransition:"stop"},o=nE(hr(this._zone,t,()=>t.classList.remove("show"),i),hr(this._zone,this._dialogEl.nativeElement,()=>{},i));return o.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),o}_show(){const t={animation:this.animation,runningTransition:"continue"};nE(hr(this._zone,this._elRef.nativeElement,(s,o)=>{o&&Ju(s),s.classList.add("show")},t),hr(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{bi(t,"keydown").pipe(xn(this._closed$),ii(r=>r.which===Kt.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(QE.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;bi(this._dialogEl.nativeElement,"mousedown").pipe(xn(this._closed$),ni(()=>i=!1),ft(()=>bi(t,"mouseup").pipe(xn(this._closed$),wi(1))),ii(({target:r})=>t===r)).subscribe(()=>{i=!0}),bi(t,"click").pipe(xn(this._closed$)).subscribe(({target:r})=>{t===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(QE.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const i=t.querySelector("[ngbAutofocus]"),r=Ax(t)[0];(i||r||t).focus()}}_restoreFocus(){const t=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&t.contains(i)?i:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&hr(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static#e=this.\u0275fac=function(i){return new(i||e)(O(ti),O(Pt),O(nt))};static#t=this.\u0275cmp=qn({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(i,r){if(1&i&&xl(Wq,7),2&i){let s;Bt(s=function Ut(){return function d$(e,n){return e[Pr].queries[n].queryList}(ne(),$c())}())&&(r._dialogEl=s.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(i,r){2&i&&(At("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),Rl("modal d-block"+(r.windowClass?" "+r.windowClass:"")),Ct("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Wr],ngContentSelectors:gq,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(i,r){1&i&&(function q1(e){const n=ne()[cn][Hn];if(!n.projection){const i=n.projection=El(e?e.length:1,null),r=i.slice();let s=n.child;for(;null!==s;){const o=e?OU(s,e):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}(),Fe(0,"div",0,1)(2,"div",2),function Z1(e,n=0,t){const i=ne(),r=ut(),s=bu(r,Xe+e,16,null,t||null);null===s.projection&&(s.projection=n),dl(),(!i[as]||Gs())&&32!=(32&s.flags)&&function P2(e,n,t){YT(n[Pe],0,n,t,m0(e,t,n),GT(t.parent||n[Hn],t,n))}(r,i,s)}(3),Le()()),2&i&&Rl("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2})}return e})(),HZ=(()=>{class e{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:s,paddingRight:o}=r;if(t>0){const a=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${a+t}px`}return r.overflow="hidden",()=>{t>0&&(r.paddingRight=o),r.overflow=s}}static#e=this.\u0275fac=function(i){return new(i||e)(te(ti))};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),$Z=(()=>{class e{constructor(t,i,r,s,o,a,l){this._applicationRef=t,this._injector=i,this._environmentInjector=r,this._document=s,this._scrollBar=o,this._rendererFactory=a,this._ngZone=l,this._activeWindowCmptHasChanged=new L,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new Ie,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const d=this._windowCmpts[this._windowCmpts.length-1];((e,n,t,i=!1)=>{e.runOutsideAngular(()=>{const r=bi(n,"focusin").pipe(xn(t),me(s=>s.target));bi(n,"keydown").pipe(xn(t),ii(s=>s.which===Kt.Tab),b_(r)).subscribe(([s,o])=>{const[a,l]=Ax(n);(o===a||o===n)&&s.shiftKey&&(l.focus(),s.preventDefault()),o===l&&!s.shiftKey&&(a.focus(),s.preventDefault())}),i&&bi(n,"click").pipe(xn(t),b_(r),me(s=>s[1])).subscribe(s=>s.focus())})})(this._ngZone,d.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(d.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,i,r){const s=r.container instanceof HTMLElement?r.container:$l(r.container)?this._document.querySelector(r.container):this._document.body,o=this._rendererFactory.createRenderer(null,null);if(!s)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const a=new zx,l=(t=r.injector||t).get(ar,null)||this._environmentInjector,d=this._getContentRef(t,l,i,a,r);let p=!1!==r.backdrop?this._attachBackdrop(s):void 0,g=this._attachWindowComponent(s,d.nodes),_=new UZ(g,d,p,r.beforeDismiss);return this._registerModalRef(_),this._registerWindowCmpt(g),_.hidden.pipe(wi(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(o.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=v=>{_.close(v)},a.dismiss=v=>{_.dismiss(v)},a.update=v=>{_.update(v)},_.update(r),1===this._modalRefs.length&&o.addClass(this._document.body,"modal-open"),p&&p.instance&&p.changeDetectorRef.detectChanges(),g.changeDetectorRef.detectChanges(),_}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(i=>i.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let i=aw(LZ,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_attachWindowComponent(t,i){let r=aw(jZ,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_getContentRef(t,i,r,s,o){return r?r instanceof En?this._createFromTemplateRef(r,s):Hl(r)?this._createFromString(r):this._createFromComponent(t,i,r,s,o):new Zl([])}_createFromTemplateRef(t,i){const s=t.createEmbeddedView({$implicit:i,close(o){i.close(o)},dismiss(o){i.dismiss(o)}});return this._applicationRef.attachView(s),new Zl([s.rootNodes],s)}_createFromString(t){const i=this._document.createTextNode(`${t}`);return new Zl([[i]])}_createFromComponent(t,i,r,s,o){const l=aw(r,{environmentInjector:i,elementInjector:vi.create({providers:[{provide:zx,useValue:s}],parent:t})}),d=l.location.nativeElement;return o.scrollable&&d.classList.add("component-host-scrollable"),this._applicationRef.attachView(l.hostView),new Zl([[d]],l.hostView,l)}_setAriaHidden(t){const i=t.parentElement;i&&t!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==t&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,i)=>{t?i.setAttribute("aria-hidden",t):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const i=()=>{const r=this._modalRefs.indexOf(t);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(i,i)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const i=this._windowCmpts.indexOf(t);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}static#e=this.\u0275fac=function(i){return new(i||e)(te(va),te(vi),te(ar),te(ti),te(HZ),te(W0),te(nt))};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),GZ=(()=>{class e{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}static#e=this.\u0275fac=function(i){return new(i||e)(te(L_))};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),WZ=(()=>{class e{constructor(t,i,r){this._injector=t,this._modalStack=i,this._config=r}open(t,i={}){const r={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,t,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}static#e=this.\u0275fac=function(i){return new(i||e)(te(vi),te($Z),te(GZ))};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),qx=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({providers:[WZ]})}return e})(),Yx=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({})}return e})(),rP=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({})}return e})(),sP=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({})}return e})(),oP=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({})}return e})(),aP=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({})}return e})(),lP=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({})}return e})(),cP=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({})}return e})(),uP=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({})}return e})(),dP=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({})}return e})();new de("live announcer delay",{providedIn:"root",factory:function oK(){return 100}});let hP=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({})}return e})(),fP=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({})}return e})();const lK=[mx,_x,bx,wx,Hx,Wx,qx,Yx,fP,rP,sP,oP,aP,lP,cP,uP,dP,hP];let cK=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({imports:[lK,mx,_x,bx,wx,Hx,Wx,qx,Yx,fP,rP,sP,oP,aP,lP,cP,uP,dP,hP]})}return e})();function XE(...e){const n=Ms(e),t=ns(e),{args:i,keys:r}=function FM(e){if(1===e.length){const n=e[0];if(t5(n))return{args:n,keys:null};if(function s5(e){return e&&"object"==typeof e&&n5(e)===i5}(n)){const t=r5(n);return{args:t.map(i=>n[i]),keys:t}}}return{args:e,keys:null}}(e);if(0===i.length)return S([],n);const s=new He(function dK(e,n,t=ln){return i=>{pP(n,()=>{const{length:r}=e,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)pP(n,()=>{const d=S(e[l],n);let p=!1;d.subscribe(ue(i,g=>{s[l]=g,p||(p=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,n,r?o=>function LM(e,n){return e.reduce((t,i,r)=>(t[i]=n[r],t),{})}(r,o):ln));return t?s.pipe(tE(t)):s}function pP(e,n,t){e?Rn(t,e,n):n()}const Y_=Te(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function gP(e){return new He(n=>{se(e()).subscribe(n)})}function Hf(e,n){const t=b(e)?e:()=>e,i=r=>r.error(t());return new He(n?r=>n.schedule(i,0,r):i)}function eD(){return H((e,n)=>{let t=null;e._refCount++;const i=ue(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(t=null);const r=e._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),n.unsubscribe()});e.subscribe(i),i.closed||(t=e.connect())})}class mP extends He{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,X(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new et;const t=this.getSubject();n.add(this.source.subscribe(ue(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=et.EMPTY)}return n}refCount(){return eD()(this)}}function Q_(e){return H((n,t)=>{let i=!1;n.subscribe(ue(t,r=>{i=!0,t.next(r)},()=>{i||t.next(e),t.complete()}))})}function _P(e=hK){return H((n,t)=>{let i=!1;n.subscribe(ue(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(e())))})}function hK(){return new Y_}function Sa(e,n){const t=arguments.length>=2;return i=>i.pipe(e?ii((r,s)=>e(r,s,i)):ln,wi(1),t?Q_(n):_P(()=>new Y_))}function $f(e,n){return b(n)?wt(e,n,1):wt(e,1)}function Kl(e){return H((n,t)=>{let s,i=null,r=!1;i=n.subscribe(ue(t,void 0,void 0,o=>{s=se(e(o,Kl(e)(n))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function tD(e,n){return H(function fK(e,n,t,i,r){return(s,o)=>{let a=t,l=n,d=0;s.subscribe(ue(o,p=>{const g=d++;l=a?e(l,p,g):(a=!0,p),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}(e,n,arguments.length>=2,!0))}function nD(e){return e<=0?()=>Lt:H((n,t)=>{let i=[];n.subscribe(ue(t,r=>{i.push(r),e<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function J_(e){return H((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}const Ke="primary",Gf=Symbol("RouteTitle");class gK{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function nd(e){return new gK(e)}function mK(e,n,t){const i=t.path.split("/");if(i.length>e.length||"full"===t.pathMatch&&(n.hasChildren()||i.length<e.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=e[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function co(e,n){const t=e?Object.keys(e):void 0,i=n?Object.keys(n):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!vP(e[r],n[r]))return!1;return!0}function vP(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;const t=[...e].sort(),i=[...n].sort();return t.every((r,s)=>i[s]===r)}return e===n}function yP(e){return e.length>0?e[e.length-1]:null}function Na(e){return function uK(e){return!!e&&(e instanceof He||b(e.lift)&&b(e.subscribe))}(e)?e:Kh(e)?S(Promise.resolve(e)):W(e)}const vK={exact:function EP(e,n,t){if(!Yl(e.segments,n.segments)||!X_(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!e.children[i]||!EP(e.children[i],n.children[i],t))return!1;return!0},subset:DP},bP={exact:function yK(e,n){return co(e,n)},subset:function bK(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>vP(e[t],n[t]))},ignored:()=>!0};function wP(e,n,t){return vK[t.paths](e.root,n.root,t.matrixParams)&&bP[t.queryParams](e.queryParams,n.queryParams)&&!("exact"===t.fragment&&e.fragment!==n.fragment)}function DP(e,n,t){return CP(e,n,n.segments,t)}function CP(e,n,t,i){if(e.segments.length>t.length){const r=e.segments.slice(0,t.length);return!(!Yl(r,t)||n.hasChildren()||!X_(r,t,i))}if(e.segments.length===t.length){if(!Yl(e.segments,t)||!X_(e.segments,t,i))return!1;for(const r in n.children)if(!e.children[r]||!DP(e.children[r],n.children[r],i))return!1;return!0}{const r=t.slice(0,e.segments.length),s=t.slice(e.segments.length);return!!(Yl(e.segments,r)&&X_(e.segments,r,i)&&e.children[Ke])&&CP(e.children[Ke],n,s,i)}}function X_(e,n,t){return n.every((i,r)=>bP[t](e[r].parameters,i.parameters))}class id{constructor(n=new jt([],{}),t={},i=null){this.root=n,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=nd(this.queryParams)),this._queryParamMap}toString(){return DK.serialize(this)}}class jt{constructor(n,t){this.segments=n,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ev(this)}}class Wf{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=nd(this.parameters)),this._parameterMap}toString(){return SP(this)}}function Yl(e,n){return e.length===n.length&&e.every((t,i)=>t.path===n[i].path)}let zf=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=he({token:e,factory:function(){return new iD},providedIn:"root"})}return e})();class iD{parse(n){const t=new PK(n);return new id(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){const t=`/${qf(n.root,!0)}`,i=function IK(e){const n=Object.keys(e).map(t=>{const i=e[t];return Array.isArray(i)?i.map(r=>`${tv(t)}=${tv(r)}`).join("&"):`${tv(t)}=${tv(i)}`}).filter(t=>!!t);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${t}${i}${"string"==typeof n.fragment?`#${function CK(e){return encodeURI(e)}(n.fragment)}`:""}`}}const DK=new iD;function ev(e){return e.segments.map(n=>SP(n)).join("/")}function qf(e,n){if(!e.hasChildren())return ev(e);if(n){const t=e.children[Ke]?qf(e.children[Ke],!1):"",i=[];return Object.entries(e.children).forEach(([r,s])=>{r!==Ke&&i.push(`${r}:${qf(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function EK(e,n){let t=[];return Object.entries(e.children).forEach(([i,r])=>{i===Ke&&(t=t.concat(n(r,i)))}),Object.entries(e.children).forEach(([i,r])=>{i!==Ke&&(t=t.concat(n(r,i)))}),t}(e,(i,r)=>r===Ke?[qf(e.children[Ke],!1)]:[`${r}:${qf(i,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[Ke]?`${ev(e)}/${t[0]}`:`${ev(e)}/(${t.join("//")})`}}function TP(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function tv(e){return TP(e).replace(/%3B/gi,";")}function rD(e){return TP(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nv(e){return decodeURIComponent(e)}function IP(e){return nv(e.replace(/\+/g,"%20"))}function SP(e){return`${rD(e.path)}${function TK(e){return Object.keys(e).map(n=>`;${rD(n)}=${rD(e[n])}`).join("")}(e.parameters)}`}const SK=/^[^\/()?;#]+/;function sD(e){const n=e.match(SK);return n?n[0]:""}const NK=/^[^\/()?;=#]+/,RK=/^[^=?&#]+/,OK=/^[^&#]+/;class PK{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new jt([],{}):new jt([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(i[Ke]=new jt(n,t)),i}parseSegment(){const n=sD(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new G(4009,!1);return this.capture(n),new Wf(nv(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const t=function AK(e){const n=e.match(NK);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=sD(this.remaining);r&&(i=r,this.capture(i))}n[nv(t)]=nv(i)}parseQueryParam(n){const t=function MK(e){const n=e.match(RK);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function xK(e){const n=e.match(OK);return n?n[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=IP(t),s=IP(i);if(n.hasOwnProperty(r)){let o=n[r];Array.isArray(o)||(o=[o],n[r]=o),o.push(s)}else n[r]=s}parseParens(n){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=sD(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new G(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):n&&(s=Ke);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Ke]:new jt([],o),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new G(4011,!1)}}function NP(e){return e.segments.length>0?new jt([],{[Ke]:e}):e}function AP(e){const n={};for(const i of Object.keys(e.children)){const s=AP(e.children[i]);if(i===Ke&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))n[o]=a;else(s.segments.length>0||s.hasChildren())&&(n[i]=s)}return function kK(e){if(1===e.numberOfChildren&&e.children[Ke]){const n=e.children[Ke];return new jt(e.segments.concat(n.segments),n.children)}return e}(new jt(e.segments,n))}function Ql(e){return e instanceof id}function RP(e){let n;const r=NP(function t(s){const o={};for(const l of s.children){const d=t(l);o[l.outlet]=d}const a=new jt(s.url,o);return s===e&&(n=a),a}(e.root));return n??r}function MP(e,n,t,i){let r=e;for(;r.parent;)r=r.parent;if(0===n.length)return oD(r,r,r,t,i);const s=function LK(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new xP(!0,0,e);let n=0,t=!1;const i=e.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,d])=>{a[l]="string"==typeof d?d.split("/"):d}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?n++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new xP(t,n,i)}(n);if(s.toRoot())return oD(r,r,new jt([],{}),t,i);const o=function VK(e,n,t){if(e.isAbsolute)return new rv(n,!0,0);if(!t)return new rv(n,!1,NaN);if(null===t.parent)return new rv(t,!0,0);const i=iv(e.commands[0])?0:1;return function BK(e,n,t){let i=e,r=n,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new G(4005,!1);r=i.segments.length}return new rv(i,!1,r-s)}(t,t.segments.length-1+i,e.numberOfDoubleDots)}(s,r,e),a=o.processChildren?Kf(o.segmentGroup,o.index,s.commands):PP(o.segmentGroup,o.index,s.commands);return oD(r,o.segmentGroup,a,t,i)}function iv(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Zf(e){return"object"==typeof e&&null!=e&&e.outlets}function oD(e,n,t,i,r){let o,s={};i&&Object.entries(i).forEach(([l,d])=>{s[l]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`}),o=e===n?t:OP(e,n,t);const a=NP(AP(o));return new id(a,s,r)}function OP(e,n,t){const i={};return Object.entries(e.children).forEach(([r,s])=>{i[r]=s===n?t:OP(s,n,t)}),new jt(e.segments,i)}class xP{constructor(n,t,i){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=i,n&&i.length>0&&iv(i[0]))throw new G(4003,!1);const r=i.find(Zf);if(r&&r!==yP(i))throw new G(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class rv{constructor(n,t,i){this.segmentGroup=n,this.processChildren=t,this.index=i}}function PP(e,n,t){if(e||(e=new jt([],{})),0===e.segments.length&&e.hasChildren())return Kf(e,n,t);const i=function jK(e,n,t){let i=0,r=n;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(i>=t.length)return s;const o=e.segments[r],a=t[i];if(Zf(a))break;const l=`${a}`,d=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&d&&"object"==typeof d&&void 0===d.outlets){if(!FP(l,d,o))return s;i+=2}else{if(!FP(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(e,n,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){const s=new jt(e.segments.slice(0,i.pathIndex),{});return s.children[Ke]=new jt(e.segments.slice(i.pathIndex),e.children),Kf(s,0,r)}return i.match&&0===r.length?new jt(e.segments,{}):i.match&&!e.hasChildren()?aD(e,n,t):i.match?Kf(e,0,r):aD(e,n,t)}function Kf(e,n,t){if(0===t.length)return new jt(e.segments,{});{const i=function UK(e){return Zf(e[0])?e[0].outlets:{[Ke]:e}}(t),r={};if(Object.keys(i).some(s=>s!==Ke)&&e.children[Ke]&&1===e.numberOfChildren&&0===e.children[Ke].segments.length){const s=Kf(e.children[Ke],n,t);return new jt(e.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=PP(e.children[s],n,o))}),Object.entries(e.children).forEach(([s,o])=>{void 0===i[s]&&(r[s]=o)}),new jt(e.segments,r)}}function aD(e,n,t){const i=e.segments.slice(0,n);let r=0;for(;r<t.length;){const s=t[r];if(Zf(s)){const l=HK(s.outlets);return new jt(i,l)}if(0===r&&iv(t[0])){i.push(new Wf(e.segments[n].path,kP(t[0]))),r++;continue}const o=Zf(s)?s.outlets[Ke]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&iv(a)?(i.push(new Wf(o,kP(a))),r+=2):(i.push(new Wf(o,{})),r++)}return new jt(i,{})}function HK(e){const n={};return Object.entries(e).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(n[t]=aD(new jt([],{}),0,i))}),n}function kP(e){const n={};return Object.entries(e).forEach(([t,i])=>n[t]=`${i}`),n}function FP(e,n,t){return e==t.path&&co(n,t.parameters)}const Yf="imperative";class uo{constructor(n,t){this.id=n,this.url=t}}class sv extends uo{constructor(n,t,i="imperative",r=null){super(n,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Aa extends uo{constructor(n,t,i){super(n,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qf extends uo{constructor(n,t,i,r){super(n,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class rd extends uo{constructor(n,t,i,r){super(n,t),this.reason=i,this.code=r,this.type=16}}class ov extends uo{constructor(n,t,i,r){super(n,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class LP extends uo{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $K extends uo{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GK extends uo{constructor(n,t,i,r,s){super(n,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class WK extends uo{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zK extends uo{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qK{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ZK{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class KK{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class YK{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QK{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class JK{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class VP{constructor(n,t,i){this.routerEvent=n,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class lD{}class cD{constructor(n){this.url=n}}class XK{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Jf,this.attachRef=null}}let Jf=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new XK,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class BP{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){const t=uD(n,this._root);return t?t.children.map(i=>i.value):[]}firstChild(n){const t=uD(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){const t=dD(n,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return dD(n,this._root).map(t=>t.value)}}function uD(e,n){if(e===n.value)return n;for(const t of n.children){const i=uD(e,t);if(i)return i}return null}function dD(e,n){if(e===n.value)return[n];for(const t of n.children){const i=dD(e,t);if(i.length)return i.unshift(n),i}return[]}class Uo{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}}function sd(e){const n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}class UP extends BP{constructor(n,t){super(n),this.snapshot=t,hD(this,n)}toString(){return this.snapshot.toString()}}function jP(e,n){const t=function e7(e,n){const o=new av([],{},{},"",{},Ke,n,null,{});return new $P("",new Uo(o,[]))}(0,n),i=new k([new Wf("",{})]),r=new k({}),s=new k({}),o=new k({}),a=new k(""),l=new od(i,r,o,a,s,Ke,n,t.root);return l.snapshot=t.root,new UP(new Uo(l,[]),t)}class od{constructor(n,t,i,r,s,o,a,l){this.urlSubject=n,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(me(d=>d[Gf]))??W(void 0),this.url=n,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(me(n=>nd(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(me(n=>nd(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function HP(e,n="emptyOnly"){const t=e.pathFromRoot;let i=0;if("always"!==n)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function t7(e){return e.reduce((n,t)=>({params:{...n.params,...t.params},data:{...n.data,...t.data},resolve:{...t.data,...n.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class av{get title(){return this.data?.[Gf]}constructor(n,t,i,r,s,o,a,l,d){this.url=n,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=nd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=nd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $P extends BP{constructor(n,t){super(t),this.url=n,hD(this,t)}toString(){return GP(this._root)}}function hD(e,n){n.value._routerState=e,n.children.forEach(t=>hD(e,t))}function GP(e){const n=e.children.length>0?` { ${e.children.map(GP).join(", ")} } `:"";return`${e.value}${n}`}function fD(e){if(e.snapshot){const n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,co(n.queryParams,t.queryParams)||e.queryParamsSubject.next(t.queryParams),n.fragment!==t.fragment&&e.fragmentSubject.next(t.fragment),co(n.params,t.params)||e.paramsSubject.next(t.params),function _K(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!co(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.urlSubject.next(t.url),co(n.data,t.data)||e.dataSubject.next(t.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function pD(e,n){const t=co(e.params,n.params)&&function wK(e,n){return Yl(e,n)&&e.every((t,i)=>co(t.parameters,n[i].parameters))}(e.url,n.url);return t&&!(!e.parent!=!n.parent)&&(!e.parent||pD(e.parent,n.parent))}let WP=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ke,this.activateEvents=new Ie,this.deactivateEvents=new Ie,this.attachEvents=new Ie,this.detachEvents=new Ie,this.parentContexts=oe(Jf),this.location=oe(zr),this.changeDetector=oe(ms),this.environmentInjector=oe(ar),this.inputBinder=oe(lv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new G(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new G(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new G(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new G(4013,!1);this._activatedRoute=t;const r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new n7(t,a,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275dir=ae({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[$n]})}return e})();class n7{constructor(n,t,i){this.route=n,this.childContexts=t,this.parent=i}get(n,t){return n===od?this.route:n===Jf?this.childContexts:this.parent.get(n,t)}}const lv=new de("");let zP=(()=>{class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=XE([i.queryParams,i.params,i.data]).pipe(ft(([s,o,a],l)=>(a={...s,...o,...a},0===l?W(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const o=function j3(e){const n=ct(e);if(!n)return null;const t=new $h(n);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}(i.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac})}return e})();function Xf(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=n.value;const r=function r7(e,n,t){return n.children.map(i=>{for(const r of t.children)if(e.shouldReuseRoute(i.value,r.value.snapshot))return Xf(e,i,r);return Xf(e,i)})}(e,n,t);return new Uo(i,r)}{if(e.shouldAttach(n.value)){const s=e.retrieve(n.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=n.value,o.children=n.children.map(a=>Xf(e,a)),o}}const i=function s7(e){return new od(new k(e.url),new k(e.params),new k(e.queryParams),new k(e.fragment),new k(e.data),e.outlet,e.component,e)}(n.value),r=n.children.map(s=>Xf(e,s));return new Uo(i,r)}}const gD="ngNavigationCancelingError";function qP(e,n){const{redirectTo:t,navigationBehaviorOptions:i}=Ql(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,r=ZP(!1,0,n);return r.url=t,r.navigationBehaviorOptions=i,r}function ZP(e,n,t){const i=new Error("NavigationCancelingError: "+(e||""));return i[gD]=!0,i.cancellationCode=n,t&&(i.url=t),i}function KP(e){return e&&e[gD]}let YP=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275cmp=qn({type:e,selectors:[["ng-component"]],standalone:!0,features:[Wr],decls:1,vars:0,template:function(i,r){1&i&&us(0,"router-outlet")},dependencies:[WP],encapsulation:2})}return e})();function mD(e){const n=e.children&&e.children.map(mD),t=n?{...e,children:n}:{...e};return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==Ke&&(t.component=YP),t}function Ds(e){return e.outlet||Ke}function ep(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){const t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class f7{constructor(n,t,i,r,s){this.routeReuseStrategy=n,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(n){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,n),fD(this.futureState.root),this.activateChildRoutes(t,i,n)}deactivateChildRoutes(n,t,i){const r=sd(t);n.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(n,t,i){const r=n.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(n,t,o.children)}else this.deactivateChildRoutes(n,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){const i=t.getContext(n.value.outlet),r=i&&n.value.component?i.children:t,s=sd(n);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:o,route:n,contexts:a})}}deactivateRouteAndOutlet(n,t){const i=t.getContext(n.value.outlet),r=i&&n.value.component?i.children:t,s=sd(n);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(n,t,i){const r=sd(t);n.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new JK(s.value.snapshot))}),n.children.length&&this.forwardEvent(new YK(n.value.snapshot))}activateRoutes(n,t,i){const r=n.value,s=t?t.value:null;if(fD(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(n,t,o.children)}else this.activateChildRoutes(n,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),fD(a.route.value),this.activateChildRoutes(n,null,o.children)}else{const a=ep(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(n,null,o.children)}}else this.activateChildRoutes(n,null,i)}}class QP{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class cv{constructor(n,t){this.component=n,this.route=t}}function p7(e,n,t){const i=e._root;return tp(i,n?n._root:null,t,[i.value])}function ad(e,n){const t=Symbol(),i=n.get(e,t);return i===t?"function"!=typeof e||function oy(e){return null!==Ga(e)}(e)?n.get(e):e:i}function tp(e,n,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=sd(n);return e.children.forEach(o=>{(function m7(e,n,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,o=n?n.value:null,a=t?t.getContext(e.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function _7(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!Yl(e.url,n.url);case"pathParamsOrQueryParamsChange":return!Yl(e.url,n.url)||!co(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pD(e,n)||!co(e.queryParams,n.queryParams);default:return!pD(e,n)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new QP(i)):(s.data=o.data,s._resolvedData=o._resolvedData),tp(e,n,s.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new cv(a.outlet.component,o))}else o&&np(n,a,r),r.canActivateChecks.push(new QP(i)),tp(e,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>np(a,t.getContext(o),r)),r}function np(e,n,t){const i=sd(e),r=e.value;Object.entries(i).forEach(([s,o])=>{np(o,r.component?n?n.children.getContext(s):null:n,t)}),t.canDeactivateChecks.push(new cv(r.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,r))}function ip(e){return"function"==typeof e}function JP(e){return e instanceof Y_||"EmptyError"===e?.name}const uv=Symbol("INITIAL_VALUE");function ld(){return ft(e=>XE(e.map(n=>n.pipe(wi(1),function TM(...e){const n=Ms(e);return H((t,i)=>{(n?Cf(e,t,n):Cf(e,t)).subscribe(i)})}(uv)))).pipe(me(n=>{for(const t of n)if(!0!==t){if(t===uv)return uv;if(!1===t||t instanceof id)return t}return!0}),ii(n=>n!==uv),wi(1)))}function XP(e){return function Ji(...e){return Xi(e)}(ni(n=>{if(Ql(n))throw qP(0,n)}),me(n=>!0===n))}class dv{constructor(n){this.segmentGroup=n||null}}class ek{constructor(n){this.urlTree=n}}function cd(e){return Hf(new dv(e))}function tk(e){return Hf(new ek(e))}class L7{constructor(n,t){this.urlSerializer=n,this.urlTree=t}noMatchError(n){return new G(4002,!1)}lineralizeSegments(n,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return W(i);if(r.numberOfChildren>1||!r.children[Ke])return Hf(new G(4e3,!1));r=r.children[Ke]}}applyRedirectCommands(n,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,i)}applyRedirectCreateUrlTree(n,t,i,r){const s=this.createSegmentGroup(n,t.root,i,r);return new id(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){const i={};return Object.entries(n).forEach(([r,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(n,t,i,r){const s=this.createSegments(n,t.segments,i,r);let o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(n,l,i,r)}),new jt(s,o)}createSegments(n,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(n,s,r):this.findOrReturn(s,i))}findPosParam(n,t,i){const r=i[t.path.substring(1)];if(!r)throw new G(4001,!1);return r}findOrReturn(n,t){let i=0;for(const r of t){if(r.path===n.path)return t.splice(i),r;i++}return n}}const _D={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function V7(e,n,t,i,r){const s=vD(e,n,t);return s.matched?(i=function a7(e,n){return e.providers&&!e._injector&&(e._injector=Mb(e.providers,n,`Route: ${e.path}`)),e._injector??n}(n,i),function P7(e,n,t,i){const r=n.canMatch;return r&&0!==r.length?W(r.map(o=>{const a=ad(o,e);return Na(function D7(e){return e&&ip(e.canMatch)}(a)?a.canMatch(n,t):e.runInContext(()=>a(n,t)))})).pipe(ld(),XP()):W(!0)}(i,n,t).pipe(me(o=>!0===o?s:{..._D}))):W(s)}function vD(e,n,t){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{..._D}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(n.matcher||mK)(t,e,n);if(!r)return{..._D};const s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function nk(e,n,t,i){return t.length>0&&function j7(e,n,t){return t.some(i=>hv(e,n,i)&&Ds(i)!==Ke)}(e,t,i)?{segmentGroup:new jt(n,U7(i,new jt(t,e.children))),slicedSegments:[]}:0===t.length&&function H7(e,n,t){return t.some(i=>hv(e,n,i))}(e,t,i)?{segmentGroup:new jt(e.segments,B7(e,0,t,i,e.children)),slicedSegments:t}:{segmentGroup:new jt(e.segments,e.children),slicedSegments:t}}function B7(e,n,t,i,r){const s={};for(const o of i)if(hv(e,t,o)&&!r[Ds(o)]){const a=new jt([],{});s[Ds(o)]=a}return{...r,...s}}function U7(e,n){const t={};t[Ke]=n;for(const i of e)if(""===i.path&&Ds(i)!==Ke){const r=new jt([],{});t[Ds(i)]=r}return t}function hv(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path}class z7{constructor(n,t,i,r,s,o,a){this.injector=n,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new L7(this.urlSerializer,this.urlTree)}noMatchError(n){return new G(4002,!1)}recognize(){const n=nk(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,Ke).pipe(Kl(t=>{if(t instanceof ek)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof dv?this.noMatchError(t):t}),me(t=>{const i=new av([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ke,this.rootComponentType,null,{}),r=new Uo(i,t),s=new $P("",r),o=function FK(e,n,t=null,i=null){return MP(RP(e),n,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(n){return this.processSegmentGroup(this.injector,this.config,n.root,Ke).pipe(Kl(i=>{throw i instanceof dv?this.noMatchError(i):i}))}inheritParamsAndData(n){const t=n.value,i=HP(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),n.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(n,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(n,t,i):this.processSegment(n,t,i,i.segments,r,!0)}processChildren(n,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return S(r).pipe($f(s=>{const o=i.children[s],a=function d7(e,n){const t=e.filter(i=>Ds(i)===n);return t.push(...e.filter(i=>Ds(i)!==n)),t}(t,s);return this.processSegmentGroup(n,a,o,s)}),tD((s,o)=>(s.push(...o),s)),Q_(null),function pK(e,n){const t=arguments.length>=2;return i=>i.pipe(e?ii((r,s)=>e(r,s,i)):ln,nD(1),t?Q_(n):_P(()=>new Y_))}(),wt(s=>{if(null===s)return cd(i);const o=ik(s);return function q7(e){e.sort((n,t)=>n.value.outlet===Ke?-1:t.value.outlet===Ke?1:n.value.outlet.localeCompare(t.value.outlet))}(o),W(o)}))}processSegment(n,t,i,r,s,o){return S(t).pipe($f(a=>this.processSegmentAgainstRoute(a._injector??n,t,a,i,r,s,o).pipe(Kl(l=>{if(l instanceof dv)return W(null);throw l}))),Sa(a=>!!a),Kl(a=>{if(JP(a))return function G7(e,n,t){return 0===n.length&&!e.children[t]}(i,r,s)?W([]):cd(i);throw a}))}processSegmentAgainstRoute(n,t,i,r,s,o,a){return function $7(e,n,t,i){return!!(Ds(e)===i||i!==Ke&&hv(n,t,e))&&("**"===e.path||vD(n,e,t).matched)}(i,r,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(n,r,i,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,r,t,i,s,o):cd(r):cd(r)}expandSegmentAgainstRouteUsingRedirect(n,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(n,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,t,i,r){const s=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?tk(s):this.applyRedirects.lineralizeSegments(i,s).pipe(wt(o=>{const a=new jt(o,{});return this.processSegment(n,t,a,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,t,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:d,positionalParamSegments:p}=vD(t,r,s);if(!a)return cd(t);const g=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,p);return r.redirectTo.startsWith("/")?tk(g):this.applyRedirects.lineralizeSegments(r,g).pipe(wt(_=>this.processSegment(n,i,t,_.concat(d),o,!1)))}matchSegmentAgainstRoute(n,t,i,r,s,o){let a;if("**"===i.path){const l=r.length>0?yP(r).parameters:{};a=W({snapshot:new av(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rk(i),Ds(i),i.component??i._loadedComponent??null,i,sk(i)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=V7(t,i,r,n).pipe(me(({matched:l,consumedSegments:d,remainingSegments:p,parameters:g})=>l?{snapshot:new av(d,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rk(i),Ds(i),i.component??i._loadedComponent??null,i,sk(i)),consumedSegments:d,remainingSegments:p}:null));return a.pipe(ft(l=>null===l?cd(t):this.getChildConfig(n=i._injector??n,i,r).pipe(ft(({routes:d})=>{const p=i._loadedInjector??n,{snapshot:g,consumedSegments:_,remainingSegments:v}=l,{segmentGroup:w,slicedSegments:T}=nk(t,_,v,d);if(0===T.length&&w.hasChildren())return this.processChildren(p,d,w).pipe(me(B=>null===B?null:[new Uo(g,B)]));if(0===d.length&&0===T.length)return W([new Uo(g,[])]);const A=Ds(i)===s;return this.processSegment(p,d,w,T,A?Ke:s,!0).pipe(me(B=>[new Uo(g,B)]))}))))}getChildConfig(n,t,i){return t.children?W({routes:t.children,injector:n}):t.loadChildren?void 0!==t._loadedRoutes?W({routes:t._loadedRoutes,injector:t._loadedInjector}):function x7(e,n,t,i){const r=n.canLoad;return void 0===r||0===r.length?W(!0):W(r.map(o=>{const a=ad(o,e);return Na(function y7(e){return e&&ip(e.canLoad)}(a)?a.canLoad(n,t):e.runInContext(()=>a(n,t)))})).pipe(ld(),XP())}(n,t,i).pipe(wt(r=>r?this.configLoader.loadChildren(n,t).pipe(ni(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function F7(e){return Hf(ZP(!1,3))}())):W({routes:[],injector:n})}}function Z7(e){const n=e.value.routeConfig;return n&&""===n.path}function ik(e){const n=[],t=new Set;for(const i of e){if(!Z7(i)){n.push(i);continue}const r=n.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):n.push(i)}for(const i of t){const r=ik(i.children);n.push(new Uo(i.value,r))}return n.filter(i=>!t.has(i))}function rk(e){return e.data||{}}function sk(e){return e.resolve||{}}function Y7(e,n){return wt(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return W(t);let s=0;return S(r).pipe($f(o=>function Q7(e,n,t,i){const r=e.routeConfig,s=e._resolve;return void 0!==r?.title&&!ok(r)&&(s[Gf]=r.title),function J7(e,n,t,i){const r=function X7(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===r.length)return W({});const s={};return S(r).pipe(wt(o=>function eY(e,n,t,i){const r=ep(n)??i,s=ad(e,r);return Na(s.resolve?s.resolve(n,t):r.runInContext(()=>s(n,t)))}(e[o],n,t,i).pipe(Sa(),ni(a=>{s[o]=a}))),nD(1),function DM(e){return me(()=>e)}(s),Kl(o=>JP(o)?Lt:Hf(o)))}(s,e,n,i).pipe(me(o=>(e._resolvedData=o,e.data=HP(e,t).resolve,r&&ok(r)&&(e.data[Gf]=r.title),null)))}(o.route,i,e,n)),ni(()=>s++),nD(1),wt(o=>s===r.length?W(t):Lt))})}function ok(e){return"string"==typeof e.title||null===e.title}function yD(e){return ft(n=>{const t=e(n);return t?S(t).pipe(me(()=>n)):W(n)})}const ud=new de("ROUTES");let bD=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=oe(tA)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return W(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=Na(t.loadComponent()).pipe(me(ak),ni(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),J_(()=>{this.componentLoaders.delete(t)})),r=new mP(i,()=>new L).pipe(eD());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return W({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=function tY(e,n,t,i){return Na(e.loadChildren()).pipe(me(ak),wt(r=>r instanceof uN||Array.isArray(r)?W(r):S(n.compileModuleAsync(r))),me(r=>{i&&i(e);let s,o,a=!1;return Array.isArray(r)?(o=r,!0):(s=r.create(t).injector,o=s.get(ud,[],{optional:!0,self:!0}).flat()),{routes:o.map(mD),injector:s}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(J_(()=>{this.childrenLoaders.delete(i)})),o=new mP(s,()=>new L).pipe(eD());return this.childrenLoaders.set(i,o),o}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ak(e){return function nY(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let fv=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new L,this.transitionAbortSubject=new L,this.configLoader=oe(bD),this.environmentInjector=oe(ar),this.urlSerializer=oe(zf),this.rootContexts=oe(Jf),this.inputBindingEnabled=null!==oe(lv,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>W(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new ZK(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new qK(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,r){return this.transitions=new k({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:t.urlHandlingStrategy.extract(i),urlAfterRedirects:t.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Yf,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ii(s=>0!==s.id),me(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),ft(s=>{this.currentTransition=s;let o=!1,a=!1;return W(s).pipe(ni(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ft(l=>{const d=l.currentBrowserUrl.toString(),p=!t.navigated||l.extractedUrl.toString()!==d||d!==l.currentUrlTree.toString();if(!p&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const _="";return this.events.next(new rd(l.id,this.urlSerializer.serialize(l.rawUrl),_,0)),l.resolve(null),Lt}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return W(l).pipe(ft(_=>{const v=this.transitions?.getValue();return this.events.next(new sv(_.id,this.urlSerializer.serialize(_.extractedUrl),_.source,_.restoredState)),v!==this.transitions?.getValue()?Lt:Promise.resolve(_)}),function K7(e,n,t,i,r,s){return wt(o=>function W7(e,n,t,i,r,s,o="emptyOnly"){return new z7(e,n,t,i,r,o,s).recognize()}(e,n,t,i,o.extractedUrl,r,s).pipe(me(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),ni(_=>{s.targetSnapshot=_.targetSnapshot,s.urlAfterRedirects=_.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:_.urlAfterRedirects};const v=new LP(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(v)}));if(p&&t.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:_,extractedUrl:v,source:w,restoredState:T,extras:A}=l,B=new sv(_,this.urlSerializer.serialize(v),w,T);this.events.next(B);const R=jP(0,this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:R,urlAfterRedirects:v,extras:{...A,skipLocationChange:!1,replaceUrl:!1}},W(s)}{const _="";return this.events.next(new rd(l.id,this.urlSerializer.serialize(l.extractedUrl),_,1)),l.resolve(null),Lt}}),ni(l=>{const d=new $K(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),me(l=>(this.currentTransition=s={...l,guards:p7(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function T7(e,n){return wt(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?W({...t,guardsResult:!0}):function I7(e,n,t,i){return S(e).pipe(wt(r=>function O7(e,n,t,i,r){const s=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return s&&0!==s.length?W(s.map(a=>{const l=ep(n)??r,d=ad(a,l);return Na(function E7(e){return e&&ip(e.canDeactivate)}(d)?d.canDeactivate(e,n,t,i):l.runInContext(()=>d(e,n,t,i))).pipe(Sa())})).pipe(ld()):W(!0)}(r.component,r.route,t,n,i)),Sa(r=>!0!==r,!0))}(o,i,r,e).pipe(wt(a=>a&&function v7(e){return"boolean"==typeof e}(a)?function S7(e,n,t,i){return S(n).pipe($f(r=>Cf(function A7(e,n){return null!==e&&n&&n(new KK(e)),W(!0)}(r.route.parent,i),function N7(e,n){return null!==e&&n&&n(new QK(e)),W(!0)}(r.route,i),function M7(e,n,t){const i=n[n.length-1],s=n.slice(0,n.length-1).reverse().map(o=>function g7(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(o)).filter(o=>null!==o).map(o=>gP(()=>W(o.guards.map(l=>{const d=ep(o.node)??t,p=ad(l,d);return Na(function w7(e){return e&&ip(e.canActivateChild)}(p)?p.canActivateChild(i,e):d.runInContext(()=>p(i,e))).pipe(Sa())})).pipe(ld())));return W(s).pipe(ld())}(e,r.path,t),function R7(e,n,t){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return W(!0);const r=i.map(s=>gP(()=>{const o=ep(n)??t,a=ad(s,o);return Na(function b7(e){return e&&ip(e.canActivate)}(a)?a.canActivate(n,e):o.runInContext(()=>a(n,e))).pipe(Sa())}));return W(r).pipe(ld())}(e,r.route,t))),Sa(r=>!0!==r,!0))}(i,s,e,n):W(a)),me(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),ni(l=>{if(s.guardsResult=l.guardsResult,Ql(l.guardsResult))throw qP(0,l.guardsResult);const d=new GK(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),ii(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),yD(l=>{if(l.guards.canActivateChecks.length)return W(l).pipe(ni(d=>{const p=new WK(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}),ft(d=>{let p=!1;return W(d).pipe(Y7(t.paramsInheritanceStrategy,this.environmentInjector),ni({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(d,"",2)}}))}),ni(d=>{const p=new zK(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}))}),yD(l=>{const d=p=>{const g=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(p.routeConfig).pipe(ni(_=>{p.component=_}),me(()=>{})));for(const _ of p.children)g.push(...d(_));return g};return XE(d(l.targetSnapshot.root)).pipe(Q_(),wi(1))}),yD(()=>this.afterPreactivation()),me(l=>{const d=function i7(e,n,t){const i=Xf(e,n._root,t?t._root:void 0);return new UP(i,n)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:d},s}),ni(()=>{this.events.next(new lD)}),((e,n,t,i)=>me(r=>(new f7(n,r.targetRouterState,r.currentRouterState,t,i).activate(e),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),wi(1),ni({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Aa(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),xn(this.transitionAbortSubject.pipe(ni(l=>{throw l}))),J_(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Kl(l=>{if(a=!0,KP(l))this.events.next(new Qf(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function o7(e){return KP(e)&&Ql(e.url)}(l)?this.events.next(new cD(l.url)):s.resolve(!1);else{this.events.next(new ov(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(l))}catch(d){s.reject(d)}}return Lt}))}))}cancelNavigationTransition(t,i,r){const s=new Qf(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function lk(e){return e!==Yf}let ck=(()=>{class e{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===Ke);return i}getResolvedTitleForRoute(t){return t.data[Gf]}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=he({token:e,factory:function(){return oe(iY)},providedIn:"root"})}return e})(),iY=(()=>{class e extends ck{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||e)(te(ER))};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),rY=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=he({token:e,factory:function(){return oe(oY)},providedIn:"root"})}return e})();class sY{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}}let oY=(()=>{class e extends sY{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=function bn(e){return Ni(()=>{const n=e.prototype.constructor,t=n[Or]||aa(n),i=Object.prototype;let r=Object.getPrototypeOf(e.prototype).constructor;for(;r&&r!==i;){const s=r[Or]||aa(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}(e)))(r||e)}}();static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const pv=new de("",{providedIn:"root",factory:()=>({})});let aY=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=he({token:e,factory:function(){return oe(lY)},providedIn:"root"})}return e})(),lY=(()=>{class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var rp=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(rp||{});function uk(e,n){e.events.pipe(ii(t=>t instanceof Aa||t instanceof Qf||t instanceof ov||t instanceof rd),me(t=>t instanceof Aa||t instanceof rd?rp.COMPLETE:t instanceof Qf&&(0===t.code||1===t.code)?rp.REDIRECTING:rp.FAILED),ii(t=>t!==rp.REDIRECTING),wi(1)).subscribe(()=>{n()})}function cY(e){throw e}function uY(e,n,t){return n.parse("/")}const dY={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Qr=(()=>{class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=oe(XN),this.isNgZoneEnabled=!1,this._events=new L,this.options=oe(pv,{optional:!0})||{},this.pendingTasks=oe(eA),this.errorHandler=this.options.errorHandler||cY,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||uY,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=oe(aY),this.routeReuseStrategy=oe(rY),this.titleStrategy=oe(ck),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=oe(ud,{optional:!0})?.flat()??[],this.navigationTransitions=oe(fv),this.urlSerializer=oe(zf),this.location=oe(dw),this.componentInputBindingEnabled=!!oe(lv,{optional:!0}),this.eventsSubscription=new et,this.isNgZoneEnabled=oe(nt)instanceof nt&&nt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new id,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=jP(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(dk(i)&&this._events.next(i));if(i instanceof sv)lk(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof rd)this.rawUrlTree=r.rawUrl;else if(i instanceof LP){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(s,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof lD)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof Qf)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof cD){const s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),o={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||lk(r.source)};this.scheduleNavigation(s,Yf,null,o,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof ov&&this.restoreHistory(r,!0),i instanceof Aa&&(this.navigated=!0),dk(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Yf,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(mD),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,d=l?this.currentUrlTree.fragment:o;let g,p=null;switch(a){case"merge":p={...this.currentUrlTree.queryParams,...s};break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}null!==p&&(p=this.removeEmptyProps(p));try{g=RP(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),g=this.currentUrlTree.root}return MP(g,t,p,d??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Ql(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Yf,null,i)}navigate(t,i={skipLocationChange:!1}){return function fY(e){for(let n=0;n<e.length;n++)if(null==e[n])throw new G(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...dY}:!1===i?{...hY}:i,Ql(t))return wP(this.currentUrlTree,t,r);const s=this.parseUrl(t);return wP(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,d;o?(a=o.resolve,l=o.reject,d=o.promise):d=new Promise((g,_)=>{a=g,l=_});const p=this.pendingTasks.add();return uk(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",o)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",s)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function dk(e){return!(e instanceof lD||e instanceof cD)}class hk{}let mY=(()=>{class e{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ii(t=>t instanceof Aa),$f(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=Mb(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return S(r).pipe(Et())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):W(null);const s=r.pipe(wt(o=>null===o?W(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?S([s,this.loader.loadComponent(i)]).pipe(Et()):s})}static#e=this.\u0275fac=function(i){return new(i||e)(te(Qr),te(tA),te(ar),te(hk),te(bD))};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const ED=new de("");let fk=(()=>{class e{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof sv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Aa?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof rd&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof VP&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new VP(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){!function QI(){throw new Error("invalid")}()};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac})}return e})();function jo(e,n){return{\u0275kind:e,\u0275providers:n}}function gk(){const e=oe(vi);return n=>{const t=e.get(va);if(n!==t.components[0])return;const i=e.get(Qr),r=e.get(mk);1===e.get(DD)&&i.initialNavigation(),e.get(_k,null,rt.Optional)?.setUpPreloading(),e.get(ED,null,rt.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const mk=new de("",{factory:()=>new L}),DD=new de("",{providedIn:"root",factory:()=>1}),_k=new de("");function bY(e){return jo(0,[{provide:_k,useExisting:mY},{provide:hk,useExisting:e}])}const vk=new de("ROUTER_FORROOT_GUARD"),EY=[dw,{provide:zf,useClass:iD},Qr,Jf,{provide:od,useFactory:function pk(e){return e.routerState.root},deps:[Qr]},bD,[]];function DY(){return new lA("Router",Qr)}let yk=(()=>{class e{constructor(t){}static forRoot(t,i){return{ngModule:e,providers:[EY,[],{provide:ud,multi:!0,useValue:t},{provide:vk,useFactory:SY,deps:[[Qr,new Cl,new iu]]},{provide:pv,useValue:i||{}},i?.useHash?{provide:kl,useClass:z3}:{provide:kl,useClass:BA},{provide:ED,useFactory:()=>{const e=oe(u8),n=oe(nt),t=oe(pv),i=oe(fv),r=oe(zf);return t.scrollOffset&&e.setOffset(t.scrollOffset),new fk(r,i,e,n,t)}},i?.preloadingStrategy?bY(i.preloadingStrategy).\u0275providers:[],{provide:lA,multi:!0,useFactory:DY},i?.initialNavigation?NY(i):[],i?.bindToComponentInputs?jo(8,[zP,{provide:lv,useExisting:zP}]).\u0275providers:[],[{provide:bk,useFactory:gk},{provide:ew,multi:!0,useExisting:bk}]]}}static forChild(t){return{ngModule:e,providers:[{provide:ud,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(i){return new(i||e)(te(vk,8))};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({})}return e})();function SY(e){return"guarded"}function NY(e){return["disabled"===e.initialNavigation?jo(3,[{provide:zb,multi:!0,useFactory:()=>{const n=oe(Qr);return()=>{n.setUpLocationChangeListener()}}},{provide:DD,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?jo(2,[{provide:DD,useValue:0},{provide:zb,multi:!0,deps:[vi],useFactory:n=>{const t=n.get(G3,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=n.get(Qr),s=n.get(mk);uk(r,()=>{i(!0)}),n.get(fv).afterPreactivation=()=>(i(!0),s.closed?W(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const bk=new de(""),RY=[];let MY=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=bt({type:e});static#n=this.\u0275inj=yt({imports:[yk.forRoot(RY),yk]})}return e})();ke(956);class OY extends L{constructor(n=1/0,t=1/0,i=Vw){super(),this._bufferSize=n,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,t)}next(n){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;t||(i.push(n),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(n),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!n.closed;o+=i?1:2)n.next(s[o]);return this._checkFinalizedStatuses(n),t}_trimBuffer(){const{_bufferSize:n,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*n;if(n<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const o=t.now();let a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}}function wk(e,n,t){let i,r=!1;return e&&"object"==typeof e?({bufferSize:i=1/0,windowTime:n=1/0,refCount:r=!1,scheduler:t}=e):i=e??1/0,xe({connector:()=>new OY(i,n,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Ek(e,n){return b(n)?ft(()=>e,n):ft(()=>e)}const Dk=new de("angularfire2.auth.use-emulator"),Ck=new de("angularfire2.auth.settings"),Tk=new de("angularfire2.auth.tenant-id"),Ik=new de("angularfire2.auth.langugage-code"),Sk=new de("angularfire2.auth.use-device-language"),Nk=new de("angularfire.auth.persistence"),Ak=(e,n,t,i,r,s,o,a)=>Hw(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{const l=n.runOutsideAngular(()=>e.auth());if(t&&l.useEmulator(...t),i&&(l.tenantId=i),l.languageCode=r,s&&l.useDeviceLanguage(),o)for(const[d,p]of Object.entries(o))l.settings[d]=p;return a&&l.setPersistence(a),l},[t,i,r,s,o,a]);let Rk=(()=>{class e{authState;idToken;user;idTokenResult;credential;constructor(t,i,r,s,o,a,l,d,p,g,_,v){const w=new L,T=W(void 0).pipe(ai(o.outsideAngular),ft(()=>s.runOutsideAngular(()=>Promise.resolve().then(ke.bind(ke,956)))),me(()=>h_(t,s,i)),me(A=>Ak(A,s,a,d,p,g,l,_)),wk({bufferSize:1,refCount:!1}));if(Sw(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=W(null);else{T.pipe(Sa()).subscribe();const A=T.pipe(ft(Z=>Z.getRedirectResult().then(Q=>Q,()=>null)),io,wk({bufferSize:1,refCount:!1})),B=T.pipe(ft(Z=>new He(Q=>({unsubscribe:s.runOutsideAngular(()=>Z.onAuthStateChanged(ce=>Q.next(ce),ce=>Q.error(ce),()=>Q.complete()))})))),R=T.pipe(ft(Z=>new He(Q=>({unsubscribe:s.runOutsideAngular(()=>Z.onIdTokenChanged(ce=>Q.next(ce),ce=>Q.error(ce),()=>Q.complete()))}))));this.authState=A.pipe(Ek(B),Ii(o.outsideAngular),ai(o.insideAngular)),this.user=A.pipe(Ek(R),Ii(o.outsideAngular),ai(o.insideAngular)),this.idToken=this.user.pipe(ft(Z=>Z?S(Z.getIdToken()):W(null))),this.idTokenResult=this.user.pipe(ft(Z=>Z?S(Z.getIdTokenResult()):W(null))),this.credential=z(A,w,this.authState.pipe(ii(Z=>!Z))).pipe(me(Z=>Z?.user?Z:null),Ii(o.outsideAngular),ai(o.insideAngular))}return((e,n,t,i={})=>new Proxy(e,{get:(r,s)=>t.runOutsideAngular(()=>{if(e[s])return i?.spy?.get&&i.spy.get(s,e[s]),e[s];if(IW.indexOf(s)>-1)return()=>{};const o=n.toPromise().then(a=>{const l=a?.[s];return"function"==typeof l?l.bind(a):l?.then?l.then(d=>t.run(()=>d)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,d)=>o.then(p=>{const g=p?.(...d);return i?.spy?.apply&&i.spy.apply(s,d,g),g})})})}))(this,T,s,{spy:{apply:(A,B,R)=>{(A.startsWith("signIn")||A.startsWith("createUser"))&&R.then(Z=>w.next(Z))}}})}static \u0275fac=function(i){return new(i||e)(te(_f),te(vf,8),te(Ks),te(nt),te(jw),te(Dk,8),te(Ck,8),te(Tk,8),te(Ik,8),te(Sk,8),te(Nk,8),te(Uw,8))};static \u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})();var CD=ke(879);const Mk="@firebase/database";let TD="";function ID(e){TD=e}class kY{constructor(n){this.domStorage_=n,this.prefix_="firebase:"}set(n,t){null==t?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),(0,E.Wl)(t))}get(n){const t=this.domStorage_.getItem(this.prefixedName_(n));return null==t?null:(0,E.cI)(t)}remove(n){this.domStorage_.removeItem(this.prefixedName_(n))}prefixedName_(n){return this.prefix_+n}toString(){return this.domStorage_.toString()}}class FY{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(n,t){null==t?delete this.cache_[n]:this.cache_[n]=t}get(n){return(0,E.r3)(this.cache_,n)?this.cache_[n]:null}remove(n){delete this.cache_[n]}}const xk=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const n=window[e];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new kY(n)}}catch{}return new FY},Jl=xk("localStorage"),SD=xk("sessionStorage"),dd=new CD.Yd("@firebase/database"),Pk=function(){let e=1;return function(){return e++}}(),kk=function(e){const n=(0,E.dS)(e),t=new E.gQ;t.update(n);const i=t.digest();return E.US.encodeByteArray(i)},sp=function(...e){let n="";for(let t=0;t<e.length;t++){const i=e[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=sp.apply(null,i):n+="object"==typeof i?(0,E.Wl)(i):i,n+=" "}return n};let Xl=null,Fk=!0;const Lk=function(e,n){(0,E.hu)(!n||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(dd.logLevel=CD.in.VERBOSE,Xl=dd.log.bind(dd),n&&SD.set("logging_enabled",!0)):"function"==typeof e?Xl=e:(Xl=null,SD.remove("logging_enabled"))},ui=function(...e){if(!0===Fk&&(Fk=!1,null===Xl&&!0===SD.get("logging_enabled")&&Lk(!0)),Xl){const n=sp.apply(null,e);Xl(n)}},op=function(e){return function(...n){ui(e,...n)}},ND=function(...e){const n="FIREBASE INTERNAL ERROR: "+sp(...e);dd.error(n)},ho=function(...e){const n=`FIREBASE FATAL ERROR: ${sp(...e)}`;throw dd.error(n),new Error(n)},Pi=function(...e){const n="FIREBASE WARNING: "+sp(...e);dd.warn(n)},gv=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Ra="[MIN_NAME]",Ho="[MAX_NAME]",ec=function(e,n){if(e===n)return 0;if(e===Ra||n===Ho)return-1;if(n===Ra||e===Ho)return 1;{const t=Uk(e),i=Uk(n);return null!==t?null!==i?t-i==0?e.length-n.length:t-i:-1:null!==i?1:e<n?-1:1}},BY=function(e,n){return e===n?0:e<n?-1:1},ap=function(e,n){if(n&&e in n)return n[e];throw new Error("Missing required key ("+e+") in object: "+(0,E.Wl)(n))},AD=function(e){if("object"!=typeof e||null===e)return(0,E.Wl)(e);const n=[];for(const i in e)n.push(i);n.sort();let t="{";for(let i=0;i<n.length;i++)0!==i&&(t+=","),t+=(0,E.Wl)(n[i]),t+=":",t+=AD(e[n[i]]);return t+="}",t},Vk=function(e,n){const t=e.length;if(t<=n)return[e];const i=[];for(let r=0;r<t;r+=n)i.push(e.substring(r,r+n>t?t:r+n));return i};function di(e,n){for(const t in e)e.hasOwnProperty(t)&&n(t,e[t])}const Bk=function(e){(0,E.hu)(!gv(e),"Invalid JSON number");const i=1023;let r,s,o,a,l;0===e?(s=0,o=0,r=1/e==-1/0?1:0):(r=e<0,(e=Math.abs(e))>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),i),s=a+i,o=Math.round(e*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(e/Math.pow(2,-1074))));const d=[];for(l=52;l;l-=1)d.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)d.push(s%2?1:0),s=Math.floor(s/2);d.push(r?1:0),d.reverse();const p=d.join("");let g="";for(l=0;l<64;l+=8){let _=parseInt(p.substr(l,8),2).toString(16);1===_.length&&(_="0"+_),g+=_}return g.toLowerCase()},$Y=new RegExp("^-?(0*)\\d{1,10}$"),Uk=function(e){if($Y.test(e)){const n=Number(e);if(n>=-2147483648&&n<=2147483647)return n}return null},hd=function(e){try{e()}catch(n){setTimeout(()=>{throw Pi("Exception was thrown by user callback.",n.stack||""),n},Math.floor(0))}},lp=function(e,n){const t=setTimeout(e,n);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class qY{constructor(n,t){this.appName_=n,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(n){return this.appCheck?this.appCheck.getToken(n):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(n).then(t,i):t(null)},0)})}addTokenChangeListener(n){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(n))}notifyForInvalidToken(){Pi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ZY{constructor(n,t,i){this.appName_=n,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(n){return this.auth_?this.auth_.getToken(n).catch(t=>t&&"auth/token-not-initialized"===t.code?(ui("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(n).then(t,i):t(null)},0)})}addTokenChangeListener(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(t=>t.addAuthTokenListener(n))}removeTokenChangeListener(n){this.authProvider_.get().then(t=>t.removeAuthTokenListener(n))}notifyForInvalidToken(){let n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';n+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Pi(n)}}let cp=(()=>{class e{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return e.OWNER="owner",e})();const Wk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Zk="websocket",Kk="long_polling";class MD{constructor(n,t,i,r,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Jl.get("host:"+n)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&Jl.set("host:"+this._host,this.internalHost))}toString(){let n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Yk(e,n,t){let i;if((0,E.hu)("string"==typeof n,"typeof type must == string"),(0,E.hu)("object"==typeof t,"typeof params must == object"),n===Zk)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(n!==Kk)throw new Error("Unknown connection type: "+n);i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function KY(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(t.ns=e.namespace);const r=[];return di(t,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}class YY{constructor(){this.counters_={}}incrementCounter(n,t=1){(0,E.r3)(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=t}get(){return(0,E.p$)(this.counters_)}}const OD={},xD={};function PD(e){const n=e.toString();return OD[n]||(OD[n]=new YY),OD[n]}class JY{constructor(n){this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(n,t){this.closeAfterResponse=n,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(n,t){for(this.pendingResponses[n]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&hd(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ma{constructor(n,t,i,r,s,o,a){this.connId=n,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=op(n),this.stats_=PD(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),Yk(t,Kk,l))}open(n,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new JY(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if((0,E.Yr)()||"complete"===document.readyState)e();else{let n=!1;const t=function(){document.body?n||(n=!0,e()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new kD((...s)=>{const[o,a,l,d,p]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Wk.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ma.forceAllow_=!0}static forceDisallow(){Ma.forceDisallow_=!0}static isAvailable(){return!((0,E.Yr)()||!Ma.forceAllow_&&(Ma.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(n){const t=(0,E.Wl)(n);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,E.h$)(t),r=Vk(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(n,t){if((0,E.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=n,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(n){const t=(0,E.Wl)(n).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class kD{constructor(n,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,E.Yr)())this.commandCB=n,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Pk(),window["pLPCommand"+this.uniqueCallbackIdentifier]=n,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=kD.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ui("frame writing exception"),a.stack&&ui(a.stack),ui(a)}}}static createIFrame_(){const n=document.createElement("iframe");if(n.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(n);try{n.contentWindow.document||ui("No IE domain setting required")}catch{const i=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const n=this.onDisconnect;n&&(this.onDisconnect=null,n())}startLongPoll(n,t){for(this.myID=n,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const n={};n.id=this.myID,n.pw=this.myPW,n.ser=this.currentSerial;let t=this.urlFn(n),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const o=this.pendingSegs.shift();i=i+"&seg"+r+"="+o.seg+"&ts"+r+"="+o.ts+"&d"+r+"="+o.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(n,t,i){this.pendingSegs.push({seg:n,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(n,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(n,()=>{clearTimeout(r),i()})}addTag(n,t){(0,E.Yr)()?this.doNodeLongPoll(n,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=n,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{ui("Long-poll script failed to load: "+n),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let _v=null;typeof MozWebSocket<"u"?_v=MozWebSocket:typeof WebSocket<"u"&&(_v=WebSocket);let fd=(()=>{class e{constructor(t,i,r,s,o,a,l){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=op(this.connId),this.stats_=PD(i),this.connURL=e.connectionURL_(i,a,l,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,o){const a={v:"5"};return!(0,E.Yr)()&&typeof location<"u"&&location.hostname&&Wk.test(location.hostname)&&(a.r="f"),i&&(a.s=i),r&&(a.ls=r),s&&(a.ac=s),o&&(a.p=o),Yk(t,Zk,a)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Jl.set("previous_websocket_failure",!0);try{let r;if((0,E.Yr)()){r={headers:{"User-Agent":`Firebase/5/${TD}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new _v(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==_v&&!e.forceDisallow_}static previouslyFailed(){return Jl.isInMemoryStorage||!0===Jl.get("previous_websocket_failure")}markConnectionHealthy(){Jl.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,E.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,E.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,E.Wl)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=Vk(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e})(),iF=(()=>{class e{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Ma,fd]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=fd&&fd.isAvailable();let r=i&&!fd.previouslyFailed();if(t.webSocketOnly&&(i||Pi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[fd];else{const s=this.transports_=[];for(const o of e.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return e.globalTransportInitialized_=!1,e})();class uF{constructor(n,t,i,r,s,o,a,l,d,p){this.id=n,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=d,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=op("c:"+this.id+":"),this.transportManager_=new iF(t),this.log_("Connection created"),this.start_()}start_(){const n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=n.healthyTimeout||0;r>0&&(this.healthyTimeout_=lp(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(n){return t=>{n===this.conn_?this.onConnectionLost_(t):n===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(n){return t=>{2!==this.state_&&(n===this.rx_?this.onPrimaryMessageReceived_(t):n===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(n){this.sendData_({t:"d",d:n})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(n){if("t"in n){const t=n.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(n){const t=ap("t",n),i=ap("d",n);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(n){const t=ap("t",n),i=ap("d",n);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(n){this.onPrimaryResponse_(),this.onMessage_(n)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(n){const t=ap("t",n);if("d"in n){const i=n.d;if("h"===t){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?ND("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ND("Unknown control packet command: "+t)}}onHandshake_(n){const t=n.ts,i=n.v,r=n.h;this.sessionId=n.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&Pi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}startUpgrade_(n){this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),lp(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(n,t){this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):lp(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}onConnectionLost_(n){this.conn_=null,n||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Jl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(n){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(n)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class dF{put(n,t,i,r){}merge(n,t,i,r){}refreshAuthToken(n){}refreshAppCheckToken(n){}onDisconnectPut(n,t,i){}onDisconnectMerge(n,t,i){}onDisconnectCancel(n,t){}reportStats(n){}}class hF{constructor(n){this.allowedEvents_=n,this.listeners_={},(0,E.hu)(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}trigger(n,...t){if(Array.isArray(this.listeners_[n])){const i=[...this.listeners_[n]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(n,t,i){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:t,context:i});const r=this.getInitialEvent(n);r&&t.apply(i,r)}off(n,t,i){this.validateEventType_(n);const r=this.listeners_[n]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(n){(0,E.hu)(this.allowedEvents_.find(t=>t===n),"Unknown event: "+n)}}class vv extends hF{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,E.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new vv}getInitialEvent(n){return(0,E.hu)("online"===n,"Unknown event type: "+n),[this.online_]}currentlyOnline(){return this.online_}}class Ft{constructor(n,t){if(void 0===t){this.pieces_=n.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=t}toString(){let n="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(n+="/"+this.pieces_[t]);return n||"/"}}function Tt(){return new Ft("")}function st(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Oa(e){return e.pieces_.length-e.pieceNum_}function Yt(e){let n=e.pieceNum_;return n<e.pieces_.length&&n++,new Ft(e.pieces_,n)}function LD(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function up(e,n=0){return e.pieces_.slice(e.pieceNum_+n)}function gF(e){if(e.pieceNum_>=e.pieces_.length)return null;const n=[];for(let t=e.pieceNum_;t<e.pieces_.length-1;t++)n.push(e.pieces_[t]);return new Ft(n,0)}function _n(e,n){const t=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);if(n instanceof Ft)for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);else{const i=n.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new Ft(t,0)}function ot(e){return e.pieceNum_>=e.pieces_.length}function Yi(e,n){const t=st(e),i=st(n);if(null===t)return n;if(t===i)return Yi(Yt(e),Yt(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")}function bQ(e,n){const t=up(e,0),i=up(n,0);for(let r=0;r<t.length&&r<i.length;r++){const s=ec(t[r],i[r]);if(0!==s)return s}return t.length===i.length?0:t.length<i.length?-1:1}function VD(e,n){if(Oa(e)!==Oa(n))return!1;for(let t=e.pieceNum_,i=n.pieceNum_;t<=e.pieces_.length;t++,i++)if(e.pieces_[t]!==n.pieces_[i])return!1;return!0}function Jr(e,n){let t=e.pieceNum_,i=n.pieceNum_;if(Oa(e)>Oa(n))return!1;for(;t<e.pieces_.length;){if(e.pieces_[t]!==n.pieces_[i])return!1;++t,++i}return!0}class wQ{constructor(n,t){this.errorPrefix_=t,this.parts_=up(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,E.ug)(this.parts_[i]);mF(this)}}function mF(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+tc(e))}function tc(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class BD extends hF{constructor(){let n,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",n="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",n="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",n="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",n="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[n];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new BD}getInitialEvent(n){return(0,E.hu)("visible"===n,"Unknown event type: "+n),[this.visible_]}}const dp=1e3;let bv,nc=(()=>{class e extends dF{constructor(t,i,r,s,o,a,l,d){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=d,this.id=e.nextPersistentConnectionId_++,this.log_=op("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=dp,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d&&!(0,E.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");BD.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&vv.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const s=++this.requestNumber_,o={r:s,a:t,b:i};this.log_((0,E.Wl)(o)),(0,E.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const i=new E.BH,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?i.resolve(l):i.reject(l)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),(0,E.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,E.hu)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r};t.tag&&(o.q=i._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const d=l.d,p=l.s;e.warnOnListenWarnings_(d,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",l),"ok"!==p&&this.removeListen_(r,s),t.onComplete&&t.onComplete(p,d))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,E.r3)(t,"w")){const r=(0,E.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();Pi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,E.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,E.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,E.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);const o={p:t};s&&(o.q=r,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){const o={p:i,d:r};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,o){this.initConnection_();const a={p:i,d:r};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,E.Wl)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):ND("Unrecognized action received from server: "+(0,E.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,E.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=dp,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=dp,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=dp),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,yf.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+e.nextConnectionId_++,a=t.lastSessionId;let l=!1,d=null;const p=function(){d?d.close():(l=!0,s())};t.realtime_={close:p,sendRequest:function(v){(0,E.hu)(d,"sendRequest call when we're not connected not allowed."),d.sendRequest(v)}};const _=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[v,w]=yield Promise.all([t.authTokenProvider_.getToken(_),t.appCheckTokenProvider_.getToken(_)]);l?ui("getToken() completed but was canceled"):(ui("getToken() completed. Creating connection."),t.authToken_=v&&v.accessToken,t.appCheckToken_=w&&w.token,d=new uF(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,s,T=>{Pi(T+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(v){t.log_("Failed to get token: "+v),l||(t.repoInfo_.nodeAdmin&&Pi(v),p())}}})()}interrupt(t){ui("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ui("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,E.xb)(this.interruptReasons_)&&(this.reconnectDelay_=dp,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(o=>AD(o)).join("$"):"default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){const r=new Ft(t).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(i),o.delete(i),0===o.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){ui("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){ui("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,E.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+TD.replace(/\./g,"-")]=1,(0,E.uI)()?t["framework.cordova"]=1:(0,E.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=vv.getInstance().currentlyOnline();return(0,E.xb)(this.interruptReasons_)&&t}}return e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e})();class dt{constructor(n,t){this.name=n,this.node=t}static Wrap(n,t){return new dt(n,t)}}class yv{getCompare(){return this.compare.bind(this)}indexedValueChanged(n,t){const i=new dt(Ra,n),r=new dt(Ra,t);return 0!==this.compare(i,r)}minPost(){return dt.MIN}}class yF extends yv{static get __EMPTY_NODE(){return bv}static set __EMPTY_NODE(n){bv=n}compare(n,t){return ec(n.name,t.name)}isDefinedOn(n){throw(0,E.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(n,t){return!1}minPost(){return dt.MIN}maxPost(){return new dt(Ho,bv)}makePost(n,t){return(0,E.hu)("string"==typeof n,"KeyIndex indexValue must always be a string."),new dt(n,bv)}toString(){return".key"}}const fo=new yF;class wv{constructor(n,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!n.isEmpty();)if(o=t?i(n.key,t):1,r&&(o*=-1),o<0)n=this.isReverse_?n.left:n.right;else{if(0===o){this.nodeStack_.push(n);break}this.nodeStack_.push(n),n=this.isReverse_?n.right:n.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,n=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}}let jD,Cs=(()=>{class e{constructor(t,i,r,s,o){this.key=t,this.value=i,this.color=r??e.RED,this.left=s??fr.EMPTY_NODE,this.right=o??fr.EMPTY_NODE}copy(t,i,r,s,o){return new e(t??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const o=r(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,i,r),null):0===o?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return fr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return fr.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})();class fr{constructor(n,t=fr.EMPTY_NODE){this.comparator_=n,this.root_=t}insert(n,t){return new fr(this.comparator_,this.root_.insert(n,t,this.comparator_).copy(null,null,Cs.BLACK,null,null))}remove(n){return new fr(this.comparator_,this.root_.remove(n,this.comparator_).copy(null,null,Cs.BLACK,null,null))}get(n){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(n,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(n){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(n,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(n){return this.root_.inorderTraversal(n)}reverseTraversal(n){return this.root_.reverseTraversal(n)}getIterator(n){return new wv(this.root_,null,this.comparator_,!1,n)}getIteratorFrom(n,t){return new wv(this.root_,n,this.comparator_,!1,t)}getReverseIteratorFrom(n,t){return new wv(this.root_,n,this.comparator_,!0,t)}getReverseIterator(n){return new wv(this.root_,null,this.comparator_,!0,n)}}function AQ(e,n){return ec(e.name,n.name)}function UD(e,n){return ec(e,n)}fr.EMPTY_NODE=new class NQ{copy(n,t,i,r,s){return this}insert(n,t,i){return new Cs(n,t,null)}remove(n,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const bF=function(e){return"number"==typeof e?"number:"+Bk(e):"string:"+e},wF=function(e){if(e.isLeafNode()){const n=e.val();(0,E.hu)("string"==typeof n||"number"==typeof n||"object"==typeof n&&(0,E.r3)(n,".sv"),"Priority must be a string or number.")}else(0,E.hu)(e===jD||e.isEmpty(),"priority of unexpected type.");(0,E.hu)(e===jD||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let EF,DF,CF,pd=(()=>{class e{constructor(t,i=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,E.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),wF(this.priorityNode_)}static set __childrenNodeConstructor(t){EF=t}static get __childrenNodeConstructor(){return EF}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new e(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ot(t)?this:".priority"===st(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=st(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,E.hu)(".priority"!==r||1===Oa(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Yt(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+bF(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?Bk(this.value_):this.value_,this.lazyHash_=kk(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:((0,E.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,s=e.VALUE_TYPE_ORDER.indexOf(i),o=e.VALUE_TYPE_ORDER.indexOf(r);return(0,E.hu)(s>=0,"Unknown leaf type: "+i),(0,E.hu)(o>=0,"Unknown leaf type: "+r),s===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e})();const rn=new class xQ extends yv{compare(n,t){const i=n.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return 0===s?ec(n.name,t.name):s}isDefinedOn(n){return!n.getPriority().isEmpty()}indexedValueChanged(n,t){return!n.getPriority().equals(t.getPriority())}minPost(){return dt.MIN}maxPost(){return new dt(Ho,new pd("[PRIORITY-POST]",CF))}makePost(n,t){const i=DF(n);return new dt(t,new pd("[PRIORITY-POST]",i))}toString(){return".priority"}},PQ=Math.log(2);class kQ{constructor(n){this.count=parseInt(Math.log(n+1)/PQ,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=n+1&r}nextBitIsOne(){const n=!(this.bits_&1<<this.current_);return this.current_--,n}}const Ev=function(e,n,t,i){e.sort(n);const r=function(l,d){const p=d-l;let g,_;if(0===p)return null;if(1===p)return g=e[l],_=t?t(g):g,new Cs(_,g.node,Cs.BLACK,null,null);{const v=parseInt(p/2,10)+l,w=r(l,v),T=r(v+1,d);return g=e[v],_=t?t(g):g,new Cs(_,g.node,Cs.BLACK,w,T)}},a=function(l){let d=null,p=null,g=e.length;const _=function(w,T){const A=g-w,B=g;g-=w;const R=r(A+1,B),Z=e[A],Q=t?t(Z):Z;v(new Cs(Q,Z.node,T,null,R))},v=function(w){d?(d.left=w,d=w):(p=w,d=w)};for(let w=0;w<l.count;++w){const T=l.nextBitIsOne(),A=Math.pow(2,l.count-(w+1));T?_(A,Cs.BLACK):(_(A,Cs.BLACK),_(A,Cs.RED))}return p}(new kQ(e.length));return new fr(i||n,a)};let HD;const gd={};class $o{constructor(n,t){this.indexes_=n,this.indexSet_=t}static get Default(){return(0,E.hu)(gd&&rn,"ChildrenNode.ts has not been loaded"),HD=HD||new $o({".priority":gd},{".priority":rn}),HD}get(n){const t=(0,E.DV)(this.indexes_,n);if(!t)throw new Error("No index defined for "+n);return t instanceof fr?t:null}hasIndex(n){return(0,E.r3)(this.indexSet_,n.toString())}addIndex(n,t){(0,E.hu)(n!==fo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(dt.Wrap);let a,o=s.getNext();for(;o;)r=r||n.isDefinedOn(o.node),i.push(o),o=s.getNext();a=r?Ev(i,n.getCompare()):gd;const l=n.toString(),d=Object.assign({},this.indexSet_);d[l]=n;const p=Object.assign({},this.indexes_);return p[l]=a,new $o(p,d)}addToIndexes(n,t){const i=(0,E.UI)(this.indexes_,(r,s)=>{const o=(0,E.DV)(this.indexSet_,s);if((0,E.hu)(o,"Missing index implementation for "+s),r===gd){if(o.isDefinedOn(n.node)){const a=[],l=t.getIterator(dt.Wrap);let d=l.getNext();for(;d;)d.name!==n.name&&a.push(d),d=l.getNext();return a.push(n),Ev(a,o.getCompare())}return gd}{const a=t.get(n.name);let l=r;return a&&(l=l.remove(new dt(n.name,a))),l.insert(n,n.node)}});return new $o(i,this.indexSet_)}removeFromIndexes(n,t){const i=(0,E.UI)(this.indexes_,r=>{if(r===gd)return r;{const s=t.get(n.name);return s?r.remove(new dt(n.name,s)):r}});return new $o(i,this.indexSet_)}}let hp,We=(()=>{class e{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&wF(this.priorityNode_),this.children_.isEmpty()&&(0,E.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return hp||(hp=new e(new fr(UD),null,$o.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||hp}updatePriority(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?hp:i}}getChild(t){const i=st(t);return null===i?this:this.getImmediateChild(i).getChild(Yt(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,E.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new dt(t,i);let s,o;i.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),o=this.indexMap_.addToIndexes(r,this.children_));const a=s.isEmpty()?hp:this.priorityNode_;return new e(s,a,o)}}updateChild(t,i){const r=st(t);if(null===r)return i;{(0,E.hu)(".priority"!==st(t)||1===Oa(t),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Yt(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,s=0,o=!0;if(this.forEachChild(rn,(a,l)=>{i[a]=l.val(t),r++,o&&e.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*r){const a=[];for(const l in i)a[l]=i[l];return a}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+bF(this.getPriority().val())+":"),this.forEachChild(rn,(i,r)=>{const s=r.hash();""!==s&&(t+=":"+i+":"+s)}),this.lazyHash_=""===t?"":kk(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new dt(t,i));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new dt(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new dt(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,dt.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,dt.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===fp?-1:0}withIndex(t){if(t===fo||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===fo||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(rn),s=i.getIterator(rn);let o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===fo?null:this.indexMap_.get(t.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})();const fp=new class FQ extends We{constructor(){super(new fr(UD),We.EMPTY_NODE,$o.Default)}compareTo(n){return n===this?0:1}equals(n){return n===this}getPriority(){return this}getImmediateChild(n){return We.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(dt,{MIN:{value:new dt(Ra,We.EMPTY_NODE)},MAX:{value:new dt(Ho,fp)}}),yF.__EMPTY_NODE=We.EMPTY_NODE,pd.__childrenNodeConstructor=We,function RQ(e){jD=e}(fp),function OQ(e){CF=e}(fp);const LQ=!0;function Tn(e,n=null){if(null===e)return We.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(n=e[".priority"]),(0,E.hu)(null===n||"string"==typeof n||"number"==typeof n||"object"==typeof n&&".sv"in n,"Invalid priority type found: "+typeof n),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new pd(e,Tn(n));if(e instanceof Array||!LQ){let t=We.EMPTY_NODE;return di(e,(i,r)=>{if((0,E.r3)(e,i)&&"."!==i.substring(0,1)){const s=Tn(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(Tn(n))}{const t=[];let i=!1;if(di(e,(o,a)=>{if("."!==o.substring(0,1)){const l=Tn(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),t.push(new dt(o,l)))}}),0===t.length)return We.EMPTY_NODE;const s=Ev(t,AQ,o=>o.name,UD);if(i){const o=Ev(t,rn.getCompare());return new We(s,Tn(n),new $o({".priority":o},{".priority":rn}))}return new We(s,Tn(n),$o.Default)}}!function MQ(e){DF=e}(Tn);class $D extends yv{constructor(n){super(),this.indexPath_=n,(0,E.hu)(!ot(n)&&".priority"!==st(n),"Can't create PathIndex with empty path or .priority key")}extractChild(n){return n.getChild(this.indexPath_)}isDefinedOn(n){return!n.getChild(this.indexPath_).isEmpty()}compare(n,t){const i=this.extractChild(n.node),r=this.extractChild(t.node),s=i.compareTo(r);return 0===s?ec(n.name,t.name):s}makePost(n,t){const i=Tn(n),r=We.EMPTY_NODE.updateChild(this.indexPath_,i);return new dt(t,r)}maxPost(){const n=We.EMPTY_NODE.updateChild(this.indexPath_,fp);return new dt(Ho,n)}toString(){return up(this.indexPath_,0).join("/")}}const GD=new class VQ extends yv{compare(n,t){const i=n.node.compareTo(t.node);return 0===i?ec(n.name,t.name):i}isDefinedOn(n){return!0}indexedValueChanged(n,t){return!n.equals(t)}minPost(){return dt.MIN}maxPost(){return dt.MAX}makePost(n,t){const i=Tn(n);return new dt(t,i)}toString(){return".value"}};function TF(e){return{type:"value",snapshotNode:e}}function md(e,n){return{type:"child_added",snapshotNode:n,childName:e}}function pp(e,n){return{type:"child_removed",snapshotNode:n,childName:e}}function gp(e,n,t){return{type:"child_changed",snapshotNode:n,childName:e,oldSnap:t}}class WD{constructor(n){this.index_=n}updateChild(n,t,i,r,s,o){(0,E.hu)(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=n.getImmediateChild(t);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(null!=o&&(i.isEmpty()?n.hasChild(t)?o.trackChildChange(pp(t,a)):(0,E.hu)(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(md(t,i)):o.trackChildChange(gp(t,i,a))),n.isLeafNode()&&i.isEmpty())?n:n.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(n,t,i){return null!=i&&(n.isLeafNode()||n.forEachChild(rn,(r,s)=>{t.hasChild(r)||i.trackChildChange(pp(r,s))}),t.isLeafNode()||t.forEachChild(rn,(r,s)=>{if(n.hasChild(r)){const o=n.getImmediateChild(r);o.equals(s)||i.trackChildChange(gp(r,s,o))}else i.trackChildChange(md(r,s))})),t.withIndex(this.index_)}updatePriority(n,t){return n.isEmpty()?We.EMPTY_NODE:n.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class mp{constructor(n){this.indexedFilter_=new WD(n.getIndex()),this.index_=n.getIndex(),this.startPost_=mp.getStartPost_(n),this.endPost_=mp.getEndPost_(n),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(n){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),n)<=0:this.index_.compare(this.getStartPost(),n)<0,i=this.endIsInclusive_?this.index_.compare(n,this.getEndPost())<=0:this.index_.compare(n,this.getEndPost())<0;return t&&i}updateChild(n,t,i,r,s,o){return this.matches(new dt(t,i))||(i=We.EMPTY_NODE),this.indexedFilter_.updateChild(n,t,i,r,s,o)}updateFullNode(n,t,i){t.isLeafNode()&&(t=We.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(We.EMPTY_NODE);const s=this;return t.forEachChild(rn,(o,a)=>{s.matches(new dt(o,a))||(r=r.updateImmediateChild(o,We.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,r,i)}updatePriority(n,t){return n}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(n){if(n.hasStart()){const t=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),t)}return n.getIndex().minPost()}static getEndPost_(n){if(n.hasEnd()){const t=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),t)}return n.getIndex().maxPost()}}class UQ{constructor(n){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new mp(n),this.index_=n.getIndex(),this.limit_=n.getLimit(),this.reverse_=!n.isViewFromLeft(),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}updateChild(n,t,i,r,s,o){return this.rangedFilter_.matches(new dt(t,i))||(i=We.EMPTY_NODE),n.getImmediateChild(t).equals(i)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,t,i,r,s,o):this.fullLimitUpdateChild_(n,t,i,s,o)}updateFullNode(n,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=We.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;r=We.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;r=r.updateImmediateChild(a.name,a.node),o++}}}else{let s;r=t.withIndex(this.index_),r=r.updatePriority(We.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,We.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,r,i)}updatePriority(n,t){return n}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(n,t,i,r,s){let o;if(this.reverse_){const g=this.index_.getCompare();o=(_,v)=>g(v,_)}else o=this.index_.getCompare();const a=n;(0,E.hu)(a.numChildren()===this.limit_,"");const l=new dt(t,i),d=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),p=this.rangedFilter_.matches(l);if(a.hasChild(t)){const g=a.getImmediateChild(t);let _=r.getChildAfterChild(this.index_,d,this.reverse_);for(;null!=_&&(_.name===t||a.hasChild(_.name));)_=r.getChildAfterChild(this.index_,_,this.reverse_);const v=null==_?1:o(_,l);if(p&&!i.isEmpty()&&v>=0)return s?.trackChildChange(gp(t,i,g)),a.updateImmediateChild(t,i);{s?.trackChildChange(pp(t,g));const T=a.updateImmediateChild(t,We.EMPTY_NODE);return null!=_&&this.rangedFilter_.matches(_)?(s?.trackChildChange(md(_.name,_.node)),T.updateImmediateChild(_.name,_.node)):T}}return i.isEmpty()?n:p&&o(d,l)>=0?(null!=s&&(s.trackChildChange(pp(d.name,d.node)),s.trackChildChange(md(t,i))),a.updateImmediateChild(t,i).updateImmediateChild(d.name,We.EMPTY_NODE)):n}}class Dv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=rn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,E.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,E.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ra}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,E.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,E.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ho}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,E.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===rn}copy(){const n=new Dv;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.startAfterSet_=this.startAfterSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.endBeforeSet_=this.endBeforeSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}}function zD(e,n,t){const i=e.copy();return i.startSet_=!0,void 0===n&&(n=null),i.indexStartValue_=n,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function qD(e,n,t){const i=e.copy();return i.endSet_=!0,void 0===n&&(n=null),i.indexEndValue_=n,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function Cv(e,n){const t=e.copy();return t.index_=n,t}function IF(e){const n={};if(e.isDefault())return n;let t;if(e.index_===rn?t="$priority":e.index_===GD?t="$value":e.index_===fo?t="$key":((0,E.hu)(e.index_ instanceof $D,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=(0,E.Wl)(t),e.startSet_){const i=e.startAfterSet_?"startAfter":"startAt";n[i]=(0,E.Wl)(e.indexStartValue_),e.startNameSet_&&(n[i]+=","+(0,E.Wl)(e.indexStartName_))}if(e.endSet_){const i=e.endBeforeSet_?"endBefore":"endAt";n[i]=(0,E.Wl)(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+(0,E.Wl)(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function SF(e){const n={};if(e.startSet_&&(n.sp=e.indexStartValue_,e.startNameSet_&&(n.sn=e.indexStartName_),n.sin=!e.startAfterSet_),e.endSet_&&(n.ep=e.indexEndValue_,e.endNameSet_&&(n.en=e.indexEndName_),n.ein=!e.endBeforeSet_),e.limitSet_){n.l=e.limit_;let t=e.viewFrom_;""===t&&(t=e.isViewFromLeft()?"l":"r"),n.vf=t}return e.index_!==rn&&(n.i=e.index_.toString()),n}class Tv extends dF{constructor(n,t,i,r){super(),this.repoInfo_=n,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=op("p:rest:"),this.listens_={}}reportStats(n){throw new Error("Method not implemented.")}static getListenId_(n,t){return void 0!==t?"tag$"+t:((0,E.hu)(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())}listen(n,t,i,r){const s=n._path.toString();this.log_("Listen called for "+s+" "+n._queryIdentifier);const o=Tv.getListenId_(n,i),a={};this.listens_[o]=a;const l=IF(n._queryParams);this.restRequest_(s+".json",l,(d,p)=>{let g=p;if(404===d&&(g=null,d=null),null===d&&this.onDataUpdate_(s,g,!1,i),(0,E.DV)(this.listens_,o)===a){let _;_=d?401===d?"permission_denied":"rest_error:"+d:"ok",r(_,null)}})}unlisten(n,t){const i=Tv.getListenId_(n,t);delete this.listens_[i]}get(n){const t=IF(n._queryParams),i=n._path.toString(),r=new E.BH;return this.restRequest_(i+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(n){}restRequest_(n,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+n+"?ns="+this.repoInfo_.namespace+(0,E.xO)(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=(0,E.cI)(a.responseText)}catch{Pi("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else 401!==a.status&&404!==a.status&&Pi("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}class zQ{constructor(){this.rootNode_=We.EMPTY_NODE}getNode(n){return this.rootNode_.getChild(n)}updateSnapshot(n,t){this.rootNode_=this.rootNode_.updateChild(n,t)}}function Iv(){return{value:null,children:new Map}}function _d(e,n,t){if(ot(n))e.value=t,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(n,t);else{const i=st(n);e.children.has(i)||e.children.set(i,Iv()),_d(e.children.get(i),n=Yt(n),t)}}function ZD(e,n){if(ot(n))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const t=e.value;return e.value=null,t.forEachChild(rn,(i,r)=>{_d(e,new Ft(i),r)}),ZD(e,n)}}if(e.children.size>0){const t=st(n);return n=Yt(n),e.children.has(t)&&ZD(e.children.get(t),n)&&e.children.delete(t),0===e.children.size}return!0}function KD(e,n,t){null!==e.value?t(n,e.value):function qQ(e,n){e.children.forEach((t,i)=>{n(i,t)})}(e,(i,r)=>{KD(r,new Ft(n.toString()+"/"+i),t)})}class ZQ{constructor(n){this.collection_=n,this.last_=null}get(){const n=this.collection_.get(),t=Object.assign({},n);return this.last_&&di(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=n,t}}class QQ{constructor(n,t){this.server_=t,this.statsToReport_={},this.statsListener_=new ZQ(n);const i=1e4+2e4*Math.random();lp(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const n=this.statsListener_.get(),t={};let i=!1;di(n,(r,s)=>{s>0&&(0,E.r3)(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),lp(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var po=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(po||{});function JD(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}class Sv{constructor(n,t,i){this.path=n,this.affectedTree=t,this.revert=i,this.type=po.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(n){if(ot(this.path)){if(null!=this.affectedTree.value)return(0,E.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ft(n));return new Sv(Tt(),t,this.revert)}}return(0,E.hu)(st(this.path)===n,"operationForChild called for unrelated child."),new Sv(Yt(this.path),this.affectedTree,this.revert)}}class _p{constructor(n,t){this.source=n,this.path=t,this.type=po.LISTEN_COMPLETE}operationForChild(n){return ot(this.path)?new _p(this.source,Tt()):new _p(this.source,Yt(this.path))}}class ic{constructor(n,t,i){this.source=n,this.path=t,this.snap=i,this.type=po.OVERWRITE}operationForChild(n){return ot(this.path)?new ic(this.source,Tt(),this.snap.getImmediateChild(n)):new ic(this.source,Yt(this.path),this.snap)}}class vd{constructor(n,t,i){this.source=n,this.path=t,this.children=i,this.type=po.MERGE}operationForChild(n){if(ot(this.path)){const t=this.children.subtree(new Ft(n));return t.isEmpty()?null:t.value?new ic(this.source,Tt(),t.value):new vd(this.source,Tt(),t)}return(0,E.hu)(st(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new vd(this.source,Yt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class xa{constructor(n,t,i){this.node_=n,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(n){if(ot(n))return this.isFullyInitialized()&&!this.filtered_;const t=st(n);return this.isCompleteForChild(t)}isCompleteForChild(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}getNode(){return this.node_}}class JQ{constructor(n){this.query_=n,this.index_=this.query_._queryParams.getIndex()}}function vp(e,n,t,i,r,s){const o=i.filter(a=>a.type===t);o.sort((a,l)=>function tJ(e,n,t){if(null==n.childName||null==t.childName)throw(0,E.g5)("Should only compare child_ events.");const i=new dt(n.childName,n.snapshotNode),r=new dt(t.childName,t.snapshotNode);return e.index_.compare(i,r)}(e,a,l)),o.forEach(a=>{const l=function eJ(e,n,t){return"value"===n.type||"child_removed"===n.type||(n.prevName=t.getPredecessorChildName(n.childName,n.snapshotNode,e.index_)),n}(e,a,s);r.forEach(d=>{d.respondsTo(a.type)&&n.push(d.createEvent(l,e.query_))})})}function Nv(e,n){return{eventCache:e,serverCache:n}}function yp(e,n,t,i){return Nv(new xa(n,t,i),e.serverCache)}function AF(e,n,t,i){return Nv(e.eventCache,new xa(n,t,i))}function Av(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function rc(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let XD;class sn{constructor(n,t=(()=>(XD||(XD=new fr(BY)),XD))()){this.value=n,this.children=t}static fromObject(n){let t=new sn(null);return di(n,(i,r)=>{t=t.set(new Ft(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(n,t){if(null!=this.value&&t(this.value))return{path:Tt(),value:this.value};if(ot(n))return null;{const i=st(n),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Yt(n),t);return null!=s?{path:_n(new Ft(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(n){return this.findRootMostMatchingPathAndValue(n,()=>!0)}subtree(n){if(ot(n))return this;{const t=st(n),i=this.children.get(t);return null!==i?i.subtree(Yt(n)):new sn(null)}}set(n,t){if(ot(n))return new sn(t,this.children);{const i=st(n),s=(this.children.get(i)||new sn(null)).set(Yt(n),t),o=this.children.insert(i,s);return new sn(this.value,o)}}remove(n){if(ot(n))return this.children.isEmpty()?new sn(null):new sn(null,this.children);{const t=st(n),i=this.children.get(t);if(i){const r=i.remove(Yt(n));let s;return s=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&s.isEmpty()?new sn(null):new sn(this.value,s)}return this}}get(n){if(ot(n))return this.value;{const t=st(n),i=this.children.get(t);return i?i.get(Yt(n)):null}}setTree(n,t){if(ot(n))return t;{const i=st(n),s=(this.children.get(i)||new sn(null)).setTree(Yt(n),t);let o;return o=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new sn(this.value,o)}}fold(n){return this.fold_(Tt(),n)}fold_(n,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(_n(n,r),t)}),t(n,this.value,i)}findOnPath(n,t){return this.findOnPath_(n,Tt(),t)}findOnPath_(n,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(ot(n))return null;{const s=st(n),o=this.children.get(s);return o?o.findOnPath_(Yt(n),_n(t,s),i):null}}foreachOnPath(n,t){return this.foreachOnPath_(n,Tt(),t)}foreachOnPath_(n,t,i){if(ot(n))return this;{this.value&&i(t,this.value);const r=st(n),s=this.children.get(r);return s?s.foreachOnPath_(Yt(n),_n(t,r),i):new sn(null)}}foreach(n){this.foreach_(Tt(),n)}foreach_(n,t){this.children.inorderTraversal((i,r)=>{r.foreach_(_n(n,i),t)}),this.value&&t(n,this.value)}foreachChild(n){this.children.inorderTraversal((t,i)=>{i.value&&n(t,i.value)})}}class Ts{constructor(n){this.writeTree_=n}static empty(){return new Ts(new sn(null))}}function bp(e,n,t){if(ot(n))return new Ts(new sn(t));{const i=e.writeTree_.findRootMostValueAndPath(n);if(null!=i){const r=i.path;let s=i.value;const o=Yi(r,n);return s=s.updateChild(o,t),new Ts(e.writeTree_.set(r,s))}{const r=new sn(t),s=e.writeTree_.setTree(n,r);return new Ts(s)}}}function eC(e,n,t){let i=e;return di(t,(r,s)=>{i=bp(i,_n(n,r),s)}),i}function RF(e,n){if(ot(n))return Ts.empty();{const t=e.writeTree_.setTree(n,new sn(null));return new Ts(t)}}function tC(e,n){return null!=sc(e,n)}function sc(e,n){const t=e.writeTree_.findRootMostValueAndPath(n);return null!=t?e.writeTree_.get(t.path).getChild(Yi(t.path,n)):null}function MF(e){const n=[],t=e.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(rn,(i,r)=>{n.push(new dt(i,r))}):e.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&n.push(new dt(i,r.value))}),n}function Pa(e,n){if(ot(n))return e;{const t=sc(e,n);return new Ts(null!=t?new sn(t):e.writeTree_.subtree(n))}}function nC(e){return e.writeTree_.isEmpty()}function yd(e,n){return OF(Tt(),e.writeTree_,n)}function OF(e,n,t){if(null!=n.value)return t.updateChild(e,n.value);{let i=null;return n.children.inorderTraversal((r,s)=>{".priority"===r?((0,E.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):t=OF(_n(e,r),s,t)}),!t.getChild(e).isEmpty()&&null!==i&&(t=t.updateChild(_n(e,".priority"),i)),t}}function Rv(e,n){return LF(n,e)}function aJ(e,n){if(e.snap)return Jr(e.path,n);for(const t in e.children)if(e.children.hasOwnProperty(t)&&Jr(_n(e.path,t),n))return!0;return!1}function cJ(e){return e.visible}function xF(e,n,t){let i=Ts.empty();for(let r=0;r<e.length;++r){const s=e[r];if(n(s)){const o=s.path;let a;if(s.snap)Jr(t,o)?(a=Yi(t,o),i=bp(i,a,s.snap)):Jr(o,t)&&(a=Yi(o,t),i=bp(i,Tt(),s.snap.getChild(a)));else{if(!s.children)throw(0,E.g5)("WriteRecord should have .snap or .children");if(Jr(t,o))a=Yi(t,o),i=eC(i,a,s.children);else if(Jr(o,t))if(a=Yi(o,t),ot(a))i=eC(i,Tt(),s.children);else{const l=(0,E.DV)(s.children,st(a));if(l){const d=l.getChild(Yt(a));i=bp(i,Tt(),d)}}}}}return i}function PF(e,n,t,i,r){if(i||r){const s=Pa(e.visibleWrites,n);return!r&&nC(s)?t:r||null!=t||tC(s,Tt())?yd(xF(e.allWrites,function(d){return(d.visible||r)&&(!i||!~i.indexOf(d.writeId))&&(Jr(d.path,n)||Jr(n,d.path))},n),t||We.EMPTY_NODE):null}{const s=sc(e.visibleWrites,n);if(null!=s)return s;{const o=Pa(e.visibleWrites,n);return nC(o)?t:null!=t||tC(o,Tt())?yd(o,t||We.EMPTY_NODE):null}}}function Mv(e,n,t,i){return PF(e.writeTree,e.treePath,n,t,i)}function iC(e,n){return function uJ(e,n,t){let i=We.EMPTY_NODE;const r=sc(e.visibleWrites,n);if(r)return r.isLeafNode()||r.forEachChild(rn,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(t){const s=Pa(e.visibleWrites,n);return t.forEachChild(rn,(o,a)=>{const l=yd(Pa(s,new Ft(o)),a);i=i.updateImmediateChild(o,l)}),MF(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}return MF(Pa(e.visibleWrites,n)).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}(e.writeTree,e.treePath,n)}function kF(e,n,t,i){return function dJ(e,n,t,i,r){(0,E.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=_n(n,t);if(tC(e.visibleWrites,s))return null;{const o=Pa(e.visibleWrites,s);return nC(o)?r.getChild(t):yd(o,r.getChild(t))}}(e.writeTree,e.treePath,n,t,i)}function Ov(e,n){return function fJ(e,n){return sc(e.visibleWrites,n)}(e.writeTree,_n(e.treePath,n))}function rC(e,n,t){return function hJ(e,n,t,i){const r=_n(n,t),s=sc(e.visibleWrites,r);return null!=s?s:i.isCompleteForChild(t)?yd(Pa(e.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(e.writeTree,e.treePath,n,t)}function FF(e,n){return LF(_n(e.treePath,n),e.writeTree)}function LF(e,n){return{treePath:e,writeTree:n}}class _J{constructor(){this.changeMap=new Map}trackChildChange(n){const t=n.type,i=n.childName;(0,E.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,E.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(i,gp(i,n.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(i,pp(i,r.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(i,md(i,n.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,E.g5)("Illegal combination of changes: "+n+" occurred after "+r);this.changeMap.set(i,gp(i,n.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,n)}getChanges(){return Array.from(this.changeMap.values())}}const VF=new class vJ{getCompleteChild(n){return null}getChildAfterChild(n,t,i){return null}};class sC{constructor(n,t,i=null){this.writes_=n,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(n){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(n))return t.getNode().getImmediateChild(n);{const i=null!=this.optCompleteServerCache_?new xa(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return rC(this.writes_,n,i)}}getChildAfterChild(n,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:rc(this.viewCache_),s=function mJ(e,n,t,i,r,s){return function pJ(e,n,t,i,r,s,o){let a;const l=Pa(e.visibleWrites,n),d=sc(l,Tt());if(null!=d)a=d;else{if(null==t)return[];a=yd(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const p=[],g=o.getCompare(),_=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let v=_.getNext();for(;v&&p.length<r;)0!==g(v,i)&&p.push(v),v=_.getNext();return p}}(e.writeTree,e.treePath,n,t,i,r,s)}(this.writes_,r,t,1,i,n);return 0===s.length?null:s[0]}}function BF(e,n,t,i,r,s){const o=n.eventCache;if(null!=Ov(i,t))return n;{let a,l;if(ot(t))if((0,E.hu)(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){const d=rc(n),g=iC(i,d instanceof We?d:We.EMPTY_NODE);a=e.filter.updateFullNode(n.eventCache.getNode(),g,s)}else{const d=Mv(i,rc(n));a=e.filter.updateFullNode(n.eventCache.getNode(),d,s)}else{const d=st(t);if(".priority"===d){(0,E.hu)(1===Oa(t),"Can't have a priority with additional path components");const p=o.getNode();l=n.serverCache.getNode();const g=kF(i,t,p,l);a=null!=g?e.filter.updatePriority(p,g):o.getNode()}else{const p=Yt(t);let g;if(o.isCompleteForChild(d)){l=n.serverCache.getNode();const _=kF(i,t,o.getNode(),l);g=null!=_?o.getNode().getImmediateChild(d).updateChild(p,_):o.getNode().getImmediateChild(d)}else g=rC(i,d,n.serverCache);a=null!=g?e.filter.updateChild(o.getNode(),d,g,p,r,s):o.getNode()}}return yp(n,a,o.isFullyInitialized()||ot(t),e.filter.filtersNodes())}}function xv(e,n,t,i,r,s,o,a){const l=n.serverCache;let d;const p=o?e.filter:e.filter.getIndexedFilter();if(ot(t))d=p.updateFullNode(l.getNode(),i,null);else if(p.filtersNodes()&&!l.isFiltered()){const v=l.getNode().updateChild(t,i);d=p.updateFullNode(l.getNode(),v,null)}else{const v=st(t);if(!l.isCompleteForPath(t)&&Oa(t)>1)return n;const w=Yt(t),A=l.getNode().getImmediateChild(v).updateChild(w,i);d=".priority"===v?p.updatePriority(l.getNode(),A):p.updateChild(l.getNode(),v,A,w,VF,null)}const g=AF(n,d,l.isFullyInitialized()||ot(t),p.filtersNodes());return BF(e,g,t,r,new sC(r,g,s),a)}function oC(e,n,t,i,r,s,o){const a=n.eventCache;let l,d;const p=new sC(r,n,s);if(ot(t))d=e.filter.updateFullNode(n.eventCache.getNode(),i,o),l=yp(n,d,!0,e.filter.filtersNodes());else{const g=st(t);if(".priority"===g)d=e.filter.updatePriority(n.eventCache.getNode(),i),l=yp(n,d,a.isFullyInitialized(),a.isFiltered());else{const _=Yt(t),v=a.getNode().getImmediateChild(g);let w;if(ot(_))w=i;else{const T=p.getCompleteChild(g);w=null!=T?".priority"===LD(_)&&T.getChild(gF(_)).isEmpty()?T:T.updateChild(_,i):We.EMPTY_NODE}l=v.equals(w)?n:yp(n,e.filter.updateChild(a.getNode(),g,w,_,p,o),a.isFullyInitialized(),e.filter.filtersNodes())}}return l}function UF(e,n){return e.eventCache.isCompleteForChild(n)}function jF(e,n,t){return t.foreach((i,r)=>{n=n.updateChild(i,r)}),n}function aC(e,n,t,i,r,s,o,a){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;let d,l=n;d=ot(t)?i:new sn(null).setTree(t,i);const p=n.serverCache.getNode();return d.children.inorderTraversal((g,_)=>{if(p.hasChild(g)){const w=jF(0,n.serverCache.getNode().getImmediateChild(g),_);l=xv(e,l,new Ft(g),w,r,s,o,a)}}),d.children.inorderTraversal((g,_)=>{const v=!n.serverCache.isCompleteForChild(g)&&null===_.value;if(!p.hasChild(g)&&!v){const T=jF(0,n.serverCache.getNode().getImmediateChild(g),_);l=xv(e,l,new Ft(g),T,r,s,o,a)}}),l}class SJ{constructor(n,t){this.query_=n,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new WD(i.getIndex()),s=function jQ(e){return e.loadsAllData()?new WD(e.getIndex()):e.hasLimit()?new UQ(e):new mp(e)}(i);this.processor_=function yJ(e){return{filter:e}}(s);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(We.EMPTY_NODE,o.getNode(),null),d=s.updateFullNode(We.EMPTY_NODE,a.getNode(),null),p=new xa(l,o.isFullyInitialized(),r.filtersNodes()),g=new xa(d,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Nv(g,p),this.eventGenerator_=new JQ(this.query_)}get query(){return this.query_}}function RJ(e,n){const t=rc(e.viewCache_);return t&&(e.query._queryParams.loadsAllData()||!ot(n)&&!t.getImmediateChild(st(n)).isEmpty())?t.getChild(n):null}function HF(e){return 0===e.eventRegistrations_.length}function $F(e,n,t){const i=[];if(t){(0,E.hu)(null==n,"A cancel should cancel all event registrations.");const r=e.query._path;e.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,r);o&&i.push(o)})}if(n){let r=[];for(let s=0;s<e.eventRegistrations_.length;++s){const o=e.eventRegistrations_[s];if(o.matches(n)){if(n.hasAnyCallback()){r=r.concat(e.eventRegistrations_.slice(s+1));break}}else r.push(o)}e.eventRegistrations_=r}else e.eventRegistrations_=[];return i}function GF(e,n,t,i){n.type===po.MERGE&&null!==n.source.queryId&&((0,E.hu)(rc(e.viewCache_),"We should always have a full cache before handling merges"),(0,E.hu)(Av(e.viewCache_),"Missing event cache, even though we have a server cache"));const r=e.viewCache_,s=function wJ(e,n,t,i,r){const s=new _J;let o,a;if(t.type===po.OVERWRITE){const d=t;d.source.fromUser?o=oC(e,n,d.path,d.snap,i,r,s):((0,E.hu)(d.source.fromServer,"Unknown source."),a=d.source.tagged||n.serverCache.isFiltered()&&!ot(d.path),o=xv(e,n,d.path,d.snap,i,r,a,s))}else if(t.type===po.MERGE){const d=t;d.source.fromUser?o=function DJ(e,n,t,i,r,s,o){let a=n;return i.foreach((l,d)=>{const p=_n(t,l);UF(n,st(p))&&(a=oC(e,a,p,d,r,s,o))}),i.foreach((l,d)=>{const p=_n(t,l);UF(n,st(p))||(a=oC(e,a,p,d,r,s,o))}),a}(e,n,d.path,d.children,i,r,s):((0,E.hu)(d.source.fromServer,"Unknown source."),a=d.source.tagged||n.serverCache.isFiltered(),o=aC(e,n,d.path,d.children,i,r,a,s))}else if(t.type===po.ACK_USER_WRITE){const d=t;o=d.revert?function IJ(e,n,t,i,r,s){let o;if(null!=Ov(i,t))return n;{const a=new sC(i,n,r),l=n.eventCache.getNode();let d;if(ot(t)||".priority"===st(t)){let p;if(n.serverCache.isFullyInitialized())p=Mv(i,rc(n));else{const g=n.serverCache.getNode();(0,E.hu)(g instanceof We,"serverChildren would be complete if leaf node"),p=iC(i,g)}d=e.filter.updateFullNode(l,p,s)}else{const p=st(t);let g=rC(i,p,n.serverCache);null==g&&n.serverCache.isCompleteForChild(p)&&(g=l.getImmediateChild(p)),d=null!=g?e.filter.updateChild(l,p,g,Yt(t),a,s):n.eventCache.getNode().hasChild(p)?e.filter.updateChild(l,p,We.EMPTY_NODE,Yt(t),a,s):l,d.isEmpty()&&n.serverCache.isFullyInitialized()&&(o=Mv(i,rc(n)),o.isLeafNode()&&(d=e.filter.updateFullNode(d,o,s)))}return o=n.serverCache.isFullyInitialized()||null!=Ov(i,Tt()),yp(n,d,o,e.filter.filtersNodes())}}(e,n,d.path,i,r,s):function CJ(e,n,t,i,r,s,o){if(null!=Ov(r,t))return n;const a=n.serverCache.isFiltered(),l=n.serverCache;if(null!=i.value){if(ot(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return xv(e,n,t,l.getNode().getChild(t),r,s,a,o);if(ot(t)){let d=new sn(null);return l.getNode().forEachChild(fo,(p,g)=>{d=d.set(new Ft(p),g)}),aC(e,n,t,d,r,s,a,o)}return n}{let d=new sn(null);return i.foreach((p,g)=>{const _=_n(t,p);l.isCompleteForPath(_)&&(d=d.set(p,l.getNode().getChild(_)))}),aC(e,n,t,d,r,s,a,o)}}(e,n,d.path,d.affectedTree,i,r,s)}else{if(t.type!==po.LISTEN_COMPLETE)throw(0,E.g5)("Unknown operation type: "+t.type);o=function TJ(e,n,t,i,r){const s=n.serverCache;return BF(e,AF(n,s.getNode(),s.isFullyInitialized()||ot(t),s.isFiltered()),t,i,VF,r)}(e,n,t.path,i,s)}const l=s.getChanges();return function EJ(e,n,t){const i=n.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Av(e);(t.length>0||!e.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(TF(Av(n)))}}(n,o,l),{viewCache:o,changes:l}}(e.processor_,r,n,t,i);return function bJ(e,n){(0,E.hu)(n.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),(0,E.hu)(n.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}(e.processor_,s.viewCache),(0,E.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,WF(e,s.changes,s.viewCache.eventCache.getNode(),null)}function WF(e,n,t,i){return function XQ(e,n,t,i){const r=[],s=[];return n.forEach(o=>{"child_changed"===o.type&&e.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function BQ(e,n){return{type:"child_moved",snapshotNode:n,childName:e}}(o.childName,o.snapshotNode))}),vp(e,r,"child_removed",n,i,t),vp(e,r,"child_added",n,i,t),vp(e,r,"child_moved",s,i,t),vp(e,r,"child_changed",n,i,t),vp(e,r,"value",n,i,t),r}(e.eventGenerator_,n,t,i?[i]:e.eventRegistrations_)}let Pv,Fv;class zF{constructor(){this.views=new Map}}function lC(e,n,t,i){const r=n.source.queryId;if(null!==r){const s=e.views.get(r);return(0,E.hu)(null!=s,"SyncTree gave us an op for an invalid query."),GF(s,n,t,i)}{let s=[];for(const o of e.views.values())s=s.concat(GF(o,n,t,i));return s}}function qF(e,n,t,i,r){const o=e.views.get(n._queryIdentifier);if(!o){let a=Mv(t,r?i:null),l=!1;a?l=!0:i instanceof We?(a=iC(t,i),l=!1):(a=We.EMPTY_NODE,l=!1);const d=Nv(new xa(a,l,!1),new xa(i,r,!1));return new SJ(n,d)}return o}function ZF(e){const n=[];for(const t of e.views.values())t.query._queryParams.loadsAllData()||n.push(t);return n}function ka(e,n){let t=null;for(const i of e.views.values())t=t||RJ(i,n);return t}function KF(e,n){return n._queryParams.loadsAllData()?kv(e):e.views.get(n._queryIdentifier)}function YF(e,n){return null!=KF(e,n)}function Fa(e){return null!=kv(e)}function kv(e){for(const n of e.views.values())if(n.query._queryParams.loadsAllData())return n;return null}let UJ=1;class QF{constructor(n){this.listenProvider_=n,this.syncPointTree_=new sn(null),this.pendingWriteTree_=function gJ(){return{visibleWrites:Ts.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function cC(e,n,t,i,r){return function iJ(e,n,t,i,r){(0,E.hu)(i>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),e.allWrites.push({path:n,snap:t,writeId:i,visible:r}),r&&(e.visibleWrites=bp(e.visibleWrites,n,t)),e.lastWriteId=i}(e.pendingWriteTree_,n,t,i,r),r?bd(e,new ic({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,t)):[]}function La(e,n,t=!1){const i=function sJ(e,n){for(let t=0;t<e.allWrites.length;t++){const i=e.allWrites[t];if(i.writeId===n)return i}return null}(e.pendingWriteTree_,n);if(function oJ(e,n){const t=e.allWrites.findIndex(a=>a.writeId===n);(0,E.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[t];e.allWrites.splice(t,1);let r=i.visible,s=!1,o=e.allWrites.length-1;for(;r&&o>=0;){const a=e.allWrites[o];a.visible&&(o>=t&&aJ(a,i.path)?r=!1:Jr(i.path,a.path)&&(s=!0)),o--}return!!r&&(s?(function lJ(e){e.visibleWrites=xF(e.allWrites,cJ,Tt()),e.lastWriteId=e.allWrites.length>0?e.allWrites[e.allWrites.length-1].writeId:-1}(e),!0):(i.snap?e.visibleWrites=RF(e.visibleWrites,i.path):di(i.children,l=>{e.visibleWrites=RF(e.visibleWrites,_n(i.path,l))}),!0))}(e.pendingWriteTree_,n)){let s=new sn(null);return null!=i.snap?s=s.set(Tt(),!0):di(i.children,o=>{s=s.set(new Ft(o),!0)}),bd(e,new Sv(i.path,s,t))}return[]}function wp(e,n,t){return bd(e,new ic({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n,t))}function Lv(e,n,t,i,r=!1){const s=n._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===n._queryIdentifier||YF(o,n))){const l=function LJ(e,n,t,i){const r=n._queryIdentifier,s=[];let o=[];const a=Fa(e);if("default"===r)for(const[l,d]of e.views.entries())o=o.concat($F(d,t,i)),HF(d)&&(e.views.delete(l),d.query._queryParams.loadsAllData()||s.push(d.query));else{const l=e.views.get(r);l&&(o=o.concat($F(l,t,i)),HF(l)&&(e.views.delete(r),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Fa(e)&&s.push(new(function PJ(){return(0,E.hu)(Pv,"Reference.ts has not been loaded"),Pv}())(n._repo,n._path)),{removed:s,events:o}}(o,n,t,i);(function kJ(e){return 0===e.views.size})(o)&&(e.syncPointTree_=e.syncPointTree_.remove(s));const d=l.removed;if(a=l.events,!r){const p=-1!==d.findIndex(_=>_._queryParams.loadsAllData()),g=e.syncPointTree_.findOnPath(s,(_,v)=>Fa(v));if(p&&!g){const _=e.syncPointTree_.subtree(s);if(!_.isEmpty()){const v=function qJ(e){return e.fold((n,t,i)=>{if(t&&Fa(t))return[kv(t)];{let r=[];return t&&(r=ZF(t)),di(i,(s,o)=>{r=r.concat(o)}),r}})}(_);for(let w=0;w<v.length;++w){const T=v[w],A=T.query,B=tL(e,T);e.listenProvider_.startListening(Dp(A),Ep(e,A),B.hashFn,B.onComplete)}}}!g&&d.length>0&&!i&&(p?e.listenProvider_.stopListening(Dp(n),null):d.forEach(_=>{const v=e.queryToTagMap.get(Bv(_));e.listenProvider_.stopListening(Dp(_),v)}))}!function ZJ(e,n){for(let t=0;t<n.length;++t){const i=n[t];if(!i._queryParams.loadsAllData()){const r=Bv(i),s=e.queryToTagMap.get(r);e.queryToTagMap.delete(r),e.tagToQueryMap.delete(s)}}}(e,d)}return a}function JF(e,n,t,i){const r=dC(e,i);if(null!=r){const s=hC(r),o=s.path,a=s.queryId,l=Yi(o,n);return fC(e,o,new ic(JD(a),l,t))}return[]}function uC(e,n,t,i=!1){const r=n._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(r,(_,v)=>{const w=Yi(_,r);s=s||ka(v,w),o=o||Fa(v)});let l,a=e.syncPointTree_.get(r);a?(o=o||Fa(a),s=s||ka(a,Tt())):(a=new zF,e.syncPointTree_=e.syncPointTree_.set(r,a)),null!=s?l=!0:(l=!1,s=We.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((v,w)=>{const T=ka(w,Tt());T&&(s=s.updateImmediateChild(v,T))}));const d=YF(a,n);if(!d&&!n._queryParams.loadsAllData()){const _=Bv(n);(0,E.hu)(!e.queryToTagMap.has(_),"View does not exist, but we have a tag");const v=function KJ(){return UJ++}();e.queryToTagMap.set(_,v),e.tagToQueryMap.set(v,_)}let g=function FJ(e,n,t,i,r,s){const o=qF(e,n,i,r,s);return e.views.has(n._queryIdentifier)||e.views.set(n._queryIdentifier,o),function MJ(e,n){e.eventRegistrations_.push(n)}(o,t),function OJ(e,n){const t=e.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(rn,(s,o)=>{i.push(md(s,o))}),t.isFullyInitialized()&&i.push(TF(t.getNode())),WF(e,i,t.getNode(),n)}(o,t)}(a,n,t,Rv(e.pendingWriteTree_,r),s,l);if(!d&&!o&&!i){const _=KF(a,n);g=g.concat(function YJ(e,n,t){const i=n._path,r=Ep(e,n),s=tL(e,t),o=e.listenProvider_.startListening(Dp(n),r,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(i);if(r)(0,E.hu)(!Fa(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((d,p,g)=>{if(!ot(d)&&p&&Fa(p))return[kv(p).query];{let _=[];return p&&(_=_.concat(ZF(p).map(v=>v.query))),di(g,(v,w)=>{_=_.concat(w)}),_}});for(let d=0;d<l.length;++d){const p=l[d];e.listenProvider_.stopListening(Dp(p),Ep(e,p))}}return o}(e,n,_))}return g}function Vv(e,n,t){const r=e.pendingWriteTree_,s=e.syncPointTree_.findOnPath(n,(o,a)=>{const d=ka(a,Yi(o,n));if(d)return d});return PF(r,n,s,t,!0)}function bd(e,n){return XF(n,e.syncPointTree_,null,Rv(e.pendingWriteTree_,Tt()))}function XF(e,n,t,i){if(ot(e.path))return eL(e,n,t,i);{const r=n.get(Tt());null==t&&null!=r&&(t=ka(r,Tt()));let s=[];const o=st(e.path),a=e.operationForChild(o),l=n.children.get(o);if(l&&a){const d=t?t.getImmediateChild(o):null,p=FF(i,o);s=s.concat(XF(a,l,d,p))}return r&&(s=s.concat(lC(r,e,i,t))),s}}function eL(e,n,t,i){const r=n.get(Tt());null==t&&null!=r&&(t=ka(r,Tt()));let s=[];return n.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,d=FF(i,o),p=e.operationForChild(o);p&&(s=s.concat(eL(p,a,l,d)))}),r&&(s=s.concat(lC(r,e,i,t))),s}function tL(e,n){const t=n.query,i=Ep(e,t);return{hashFn:()=>(function NJ(e){return e.viewCache_.serverCache.getNode()}(n)||We.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function GJ(e,n,t){const i=dC(e,t);if(i){const r=hC(i),s=r.path,o=r.queryId,a=Yi(s,n);return fC(e,s,new _p(JD(o),a))}return[]}(e,t._path,i):function $J(e,n){return bd(e,new _p({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n))}(e,t._path);{const s=function HY(e,n){let t="Unknown Error";"too_big"===e?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?t="Client doesn't have permission to access the desired data.":"unavailable"===e&&(t="The service is unavailable");const i=new Error(e+" at "+n._path.toString()+": "+t);return i.code=e.toUpperCase(),i}(r,t);return Lv(e,t,null,s)}}}}function Ep(e,n){const t=Bv(n);return e.queryToTagMap.get(t)}function Bv(e){return e._path.toString()+"$"+e._queryIdentifier}function dC(e,n){return e.tagToQueryMap.get(n)}function hC(e){const n=e.indexOf("$");return(0,E.hu)(-1!==n&&n<e.length-1,"Bad queryKey."),{queryId:e.substr(n+1),path:new Ft(e.substr(0,n))}}function fC(e,n,t){const i=e.syncPointTree_.get(n);return(0,E.hu)(i,"Missing sync point for query tag that we're tracking"),lC(i,t,Rv(e.pendingWriteTree_,n),null)}function Dp(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(function BJ(){return(0,E.hu)(Fv,"Reference.ts has not been loaded"),Fv}())(e._repo,e._path):e}class pC{constructor(n){this.node_=n}getImmediateChild(n){const t=this.node_.getImmediateChild(n);return new pC(t)}node(){return this.node_}}class gC{constructor(n,t){this.syncTree_=n,this.path_=t}getImmediateChild(n){const t=_n(this.path_,n);return new gC(this.syncTree_,t)}node(){return Vv(this.syncTree_,this.path_)}}const QJ=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},nL=function(e,n,t){return e&&"object"==typeof e?((0,E.hu)(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?JJ(e[".sv"],n,t):"object"==typeof e[".sv"]?XJ(e[".sv"],n):void(0,E.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},JJ=function(e,n,t){if("timestamp"===e)return t.timestamp;(0,E.hu)(!1,"Unexpected server value: "+e)},XJ=function(e,n,t){e.hasOwnProperty("increment")||(0,E.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;"number"!=typeof i&&(0,E.hu)(!1,"Unexpected increment value: "+i);const r=n.node();if((0,E.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return"number"!=typeof o?i:o+i},iL=function(e,n,t,i){return _C(n,new gC(t,e),i)},mC=function(e,n,t){return _C(e,new pC(n),t)};function _C(e,n,t){const i=e.getPriority().val(),r=nL(i,n.getImmediateChild(".priority"),t);let s;if(e.isLeafNode()){const o=e,a=nL(o.getValue(),n,t);return a!==o.getValue()||r!==o.getPriority().val()?new pd(a,Tn(r)):e}{const o=e;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new pd(r))),o.forEachChild(rn,(a,l)=>{const d=_C(l,n.getImmediateChild(a),t);d!==l&&(s=s.updateImmediateChild(a,d))}),s}}class vC{constructor(n="",t=null,i={children:{},childCount:0}){this.name=n,this.parent=t,this.node=i}}function Uv(e,n){let t=n instanceof Ft?n:new Ft(n),i=e,r=st(t);for(;null!==r;){const s=(0,E.DV)(i.node.children,r)||{children:{},childCount:0};i=new vC(r,i,s),t=Yt(t),r=st(t)}return i}function oc(e){return e.node.value}function yC(e,n){e.node.value=n,bC(e)}function rL(e){return e.node.childCount>0}function jv(e,n){di(e.node.children,(t,i)=>{n(new vC(t,e,i))})}function sL(e,n,t,i){t&&!i&&n(e),jv(e,r=>{sL(r,n,!0,i)}),t&&i&&n(e)}function Cp(e){return new Ft(null===e.parent?e.name:Cp(e.parent)+"/"+e.name)}function bC(e){null!==e.parent&&function nX(e,n,t){const i=function eX(e){return void 0===oc(e)&&!rL(e)}(t),r=(0,E.r3)(e.node.children,n);i&&r?(delete e.node.children[n],e.node.childCount--,bC(e)):!i&&!r&&(e.node.children[n]=t.node,e.node.childCount++,bC(e))}(e.parent,e.name,e)}const iX=/[\[\].#$\/\u0000-\u001F\u007F]/,rX=/[\[\].#$\u0000-\u001F\u007F]/,wC=10485760,Hv=function(e){return"string"==typeof e&&0!==e.length&&!iX.test(e)},oL=function(e){return"string"==typeof e&&0!==e.length&&!rX.test(e)},Tp=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!gv(e)||e&&"object"==typeof e&&(0,E.r3)(e,".sv")},go=function(e,n,t,i){i&&void 0===n||Ip((0,E.gK)(e,"value"),n,t)},Ip=function(e,n,t){const i=t instanceof Ft?new wQ(t,e):t;if(void 0===n)throw new Error(e+"contains undefined "+tc(i));if("function"==typeof n)throw new Error(e+"contains a function "+tc(i)+" with contents = "+n.toString());if(gv(n))throw new Error(e+"contains "+n.toString()+" "+tc(i));if("string"==typeof n&&n.length>wC/3&&(0,E.ug)(n)>wC)throw new Error(e+"contains a string greater than "+wC+" utf8 bytes "+tc(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){let r=!1,s=!1;if(di(n,(o,a)=>{if(".value"===o)r=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!Hv(o)))throw new Error(e+" contains an invalid key ("+o+") "+tc(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function EQ(e,n){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(n),e.byteLength_+=(0,E.ug)(n),mF(e)})(i,o),Ip(e,a,i),function DQ(e){const n=e.parts_.pop();e.byteLength_-=(0,E.ug)(n),e.parts_.length>0&&(e.byteLength_-=1)}(i)}),r&&s)throw new Error(e+' contains ".value" child '+tc(i)+" in addition to actual children.")}},aL=function(e,n,t,i){if(i&&void 0===n)return;const r=(0,E.gK)(e,"values");if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(r+" must be an object containing the children to replace.");const s=[];di(n,(o,a)=>{const l=new Ft(o);if(Ip(r,a,_n(t,l)),".priority"===LD(l)&&!Tp(a))throw new Error(r+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),function(e,n){let t,i;for(t=0;t<n.length;t++){i=n[t];const s=up(i);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!Hv(s[o]))throw new Error(e+"contains an invalid key ("+s[o]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}n.sort(bQ);let r=null;for(t=0;t<n.length;t++){if(i=n[t],null!==r&&Jr(r,i))throw new Error(e+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},EC=function(e,n,t){if(!t||void 0!==n){if(gv(n))throw new Error((0,E.gK)(e,"priority")+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Tp(n))throw new Error((0,E.gK)(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Sp=function(e,n,t,i){if(!(i&&void 0===t||Hv(t)))throw new Error((0,E.gK)(e,n)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Np=function(e,n,t,i){if(!(i&&void 0===t||oL(t)))throw new Error((0,E.gK)(e,n)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},aX=function(e,n,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Np(e,n,t,i)},Xr=function(e,n){if(".info"===st(n))throw new Error(e+" failed = Can't modify data under /.info/")},lL=function(e,n){const t=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Hv(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==t.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),oL(e)}(t))throw new Error((0,E.gK)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class lX{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function $v(e,n){let t=null;for(let i=0;i<n.length;i++){const r=n[i],s=r.getPath();null!==t&&!VD(s,t.path)&&(e.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(r)}t&&e.eventLists_.push(t)}function cL(e,n,t){$v(e,t),uL(e,i=>VD(i,n))}function Tr(e,n,t){$v(e,t),uL(e,i=>Jr(i,n)||Jr(n,i))}function uL(e,n){e.recursionDepth_++;let t=!0;for(let i=0;i<e.eventLists_.length;i++){const r=e.eventLists_[i];r&&(n(r.path)?(cX(e.eventLists_[i]),e.eventLists_[i]=null):t=!1)}t&&(e.eventLists_=[]),e.recursionDepth_--}function cX(e){for(let n=0;n<e.events.length;n++){const t=e.events[n];if(null!==t){e.events[n]=null;const i=t.getEventRunner();Xl&&ui("event: "+t.toString()),hd(i)}}}const dL="repo_interrupt",uX=25;class dX{constructor(n,t,i,r){this.repoInfo_=n,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new lX,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Iv(),this.transactionQueueTree_=new vC,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function hL(e){const t=e.infoData_.getNode(new Ft(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Ap(e){return QJ({timestamp:hL(e)})}function fL(e,n,t,i,r){e.dataUpdateCount++;const s=new Ft(n);t=e.interceptServerDataCallback_?e.interceptServerDataCallback_(n,t):t;let o=[];if(r)if(i){const l=(0,E.UI)(t,d=>Tn(d));o=function WJ(e,n,t,i){const r=dC(e,i);if(r){const s=hC(r),o=s.path,a=s.queryId,l=Yi(o,n),d=sn.fromObject(t);return fC(e,o,new vd(JD(a),l,d))}return[]}(e.serverSyncTree_,s,l,r)}else{const l=Tn(t);o=JF(e.serverSyncTree_,s,l,r)}else if(i){const l=(0,E.UI)(t,d=>Tn(d));o=function HJ(e,n,t){const i=sn.fromObject(t);return bd(e,new vd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n,i))}(e.serverSyncTree_,s,l)}else{const l=Tn(t);o=wp(e.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Ed(e,s)),Tr(e.eventQueue_,a,o)}function pL(e,n){DC(e,"connected",n),!1===n&&function mX(e){wd(e,"onDisconnectEvents");const n=Ap(e),t=Iv();KD(e.onDisconnect_,Tt(),(r,s)=>{const o=iL(r,s,e.serverSyncTree_,n);_d(t,r,o)});let i=[];KD(t,Tt(),(r,s)=>{i=i.concat(wp(e.serverSyncTree_,r,s));const o=SC(e,r);Ed(e,o)}),e.onDisconnect_=Iv(),Tr(e.eventQueue_,Tt(),i)}(e)}function DC(e,n,t){const i=new Ft("/.info/"+n),r=Tn(t);e.infoData_.updateSnapshot(i,r);const s=wp(e.infoSyncTree_,i,r);Tr(e.eventQueue_,i,s)}function Gv(e){return e.nextWriteId_++}function CC(e,n,t,i,r){wd(e,"set",{path:n.toString(),value:t,priority:i});const s=Ap(e),o=Tn(t,i),a=Vv(e.serverSyncTree_,n),l=mC(o,a,s),d=Gv(e),p=cC(e.serverSyncTree_,n,l,d,!0);$v(e.eventQueue_,p),e.server_.put(n.toString(),o.val(!0),(_,v)=>{const w="ok"===_;w||Pi("set at "+n+" failed: "+_);const T=La(e.serverSyncTree_,d,!w);Tr(e.eventQueue_,n,T),Va(0,r,_,v)});const g=SC(e,n);Ed(e,g),Tr(e.eventQueue_,g,[])}function _X(e,n,t){e.server_.onDisconnectCancel(n.toString(),(i,r)=>{"ok"===i&&ZD(e.onDisconnect_,n),Va(0,t,i,r)})}function gL(e,n,t,i){const r=Tn(t);e.server_.onDisconnectPut(n.toString(),r.val(!0),(s,o)=>{"ok"===s&&_d(e.onDisconnect_,n,r),Va(0,i,s,o)})}function TC(e,n,t){let i;i=".info"===st(n._path)?Lv(e.infoSyncTree_,n,t):Lv(e.serverSyncTree_,n,t),cL(e.eventQueue_,n._path,i)}function mL(e){e.persistentConnection_&&e.persistentConnection_.interrupt(dL)}function wd(e,...n){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":"),ui(t,...n)}function Va(e,n,t,i){n&&hd(()=>{if("ok"===t)n(null);else{const r=(t||"error").toUpperCase();let s=r;i&&(s+=": "+i);const o=new Error(s);o.code=r,n(o)}})}function IC(e,n,t){return Vv(e.serverSyncTree_,n,t)||We.EMPTY_NODE}function Wv(e,n=e.transactionQueueTree_){if(n||zv(e,n),oc(n)){const t=vL(e,n);(0,E.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function DX(e,n,t){const i=t.map(d=>d.currentWriteId),r=IC(e,n,i);let s=r;const o=r.hash();for(let d=0;d<t.length;d++){const p=t[d];(0,E.hu)(0===p.status,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const g=Yi(n,p.path);s=s.updateChild(g,p.currentOutputSnapshotRaw)}const a=s.val(!0),l=n;e.server_.put(l.toString(),a,d=>{wd(e,"transaction put response",{path:l.toString(),status:d});let p=[];if("ok"===d){const g=[];for(let _=0;_<t.length;_++)t[_].status=2,p=p.concat(La(e.serverSyncTree_,t[_].currentWriteId)),t[_].onComplete&&g.push(()=>t[_].onComplete(null,!0,t[_].currentOutputSnapshotResolved)),t[_].unwatcher();zv(e,Uv(e.transactionQueueTree_,n)),Wv(e,e.transactionQueueTree_),Tr(e.eventQueue_,n,p);for(let _=0;_<g.length;_++)hd(g[_])}else{if("datastale"===d)for(let g=0;g<t.length;g++)t[g].status=3===t[g].status?4:0;else{Pi("transaction at "+l.toString()+" failed: "+d);for(let g=0;g<t.length;g++)t[g].status=4,t[g].abortReason=d}Ed(e,n)}},o)}(e,Cp(n),t)}else rL(n)&&jv(n,t=>{Wv(e,t)})}function Ed(e,n){const t=_L(e,n),i=Cp(t);return function CX(e,n,t){if(0===n.length)return;const i=[];let r=[];const o=n.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<n.length;a++){const l=n[a],d=Yi(t,l.path);let g,p=!1;if((0,E.hu)(null!==d,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)p=!0,g=l.abortReason,r=r.concat(La(e.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=uX)p=!0,g="maxretry",r=r.concat(La(e.serverSyncTree_,l.currentWriteId,!0));else{const _=IC(e,l.path,o);l.currentInputSnapshot=_;const v=n[a].update(_.val());if(void 0!==v){Ip("transaction failed: Data returned ",v,l.path);let w=Tn(v);"object"==typeof v&&null!=v&&(0,E.r3)(v,".priority")||(w=w.updatePriority(_.getPriority()));const A=l.currentWriteId,B=Ap(e),R=mC(w,_,B);l.currentOutputSnapshotRaw=w,l.currentOutputSnapshotResolved=R,l.currentWriteId=Gv(e),o.splice(o.indexOf(A),1),r=r.concat(cC(e.serverSyncTree_,l.path,R,l.currentWriteId,l.applyLocally)),r=r.concat(La(e.serverSyncTree_,A,!0))}else p=!0,g="nodata",r=r.concat(La(e.serverSyncTree_,l.currentWriteId,!0))}Tr(e.eventQueue_,t,r),r=[],p&&(n[a].status=2,setTimeout(n[a].unwatcher,Math.floor(0)),n[a].onComplete&&i.push("nodata"===g?()=>n[a].onComplete(null,!1,n[a].currentInputSnapshot):()=>n[a].onComplete(new Error(g),!1,null)))}zv(e,e.transactionQueueTree_);for(let a=0;a<i.length;a++)hd(i[a]);Wv(e,e.transactionQueueTree_)}(e,vL(e,t),i),i}function _L(e,n){let t,i=e.transactionQueueTree_;for(t=st(n);null!==t&&void 0===oc(i);)i=Uv(i,t),t=st(n=Yt(n));return i}function vL(e,n){const t=[];return yL(e,n,t),t.sort((i,r)=>i.order-r.order),t}function yL(e,n,t){const i=oc(n);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);jv(n,r=>{yL(e,r,t)})}function zv(e,n){const t=oc(n);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,yC(n,t.length>0?t:void 0)}jv(n,i=>{zv(e,i)})}function SC(e,n){const t=Cp(_L(e,n)),i=Uv(e.transactionQueueTree_,n);return function tX(e,n,t){let i=t?e:e.parent;for(;null!==i;){if(n(i))return!0;i=i.parent}}(i,r=>{NC(e,r)}),NC(e,i),sL(i,r=>{NC(e,r)}),t}function NC(e,n){const t=oc(n);if(t){const i=[];let r=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?((0,E.hu)(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):((0,E.hu)(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(La(e.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&i.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?yC(n,void 0):t.length=s+1,Tr(e.eventQueue_,Cp(n),r);for(let o=0;o<i.length;o++)hd(i[o])}}const AC=function(e,n){const t=SX(e),i=t.namespace;return"firebase.com"===t.domain&&ho(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&ho("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Pi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new MD(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,n,"",i!==t.subdomain),path:new Ft(t.pathString)}},SX=function(e){let n="",t="",i="",r="",s="",o=!0,a="https",l=443;if("string"==typeof e){let d=e.indexOf("//");d>=0&&(a=e.substring(0,d-1),e=e.substring(d+2));let p=e.indexOf("/");-1===p&&(p=e.length);let g=e.indexOf("?");-1===g&&(g=e.length),n=e.substring(0,Math.min(p,g)),p<g&&(r=function TX(e){let n="";const t=e.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}n+="/"+r}return n}(e.substring(p,g)));const _=function IX(e){const n={};"?"===e.charAt(0)&&(e=e.substring(1));for(const t of e.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?n[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Pi(`Invalid query segment '${t}' in query '${e}'`)}return n}(e.substring(Math.min(e.length,g)));d=n.indexOf(":"),d>=0?(o="https"===a||"wss"===a,l=parseInt(n.substring(d+1),10)):d=n.length;const v=n.slice(0,d);if("localhost"===v.toLowerCase())t="localhost";else if(v.split(".").length<=2)t=v;else{const w=n.indexOf(".");i=n.substring(0,w).toLowerCase(),t=n.substring(w+1),s=i}"ns"in _&&(s=_.ns)}return{host:n,port:l,domain:t,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}},bL="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",NX=function(){let e=0;const n=[];return function(t){const i=t===e;let r;e=t;const s=new Array(8);for(r=7;r>=0;r--)s[r]=bL.charAt(t%64),t=Math.floor(t/64);(0,E.hu)(0===t,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&63===n[r];r--)n[r]=0;n[r]++}else for(r=0;r<12;r++)n[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=bL.charAt(n[r]);return(0,E.hu)(20===o.length,"nextPushId: Length should be 20."),o}}();class wL{constructor(n,t,i,r){this.eventType=n,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const n=this.snapshot.ref;return"value"===this.eventType?n._path:n.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,E.Wl)(this.snapshot.exportVal())}}class EL{constructor(n,t,i){this.eventRegistration=n,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class RC{constructor(n,t){this.snapshotCallback=n,this.cancelCallback=t}onValue(n,t){this.snapshotCallback.call(null,n,t)}onCancel(n){return(0,E.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)}get hasCancelCallback(){return!!this.cancelCallback}matches(n){return this.snapshotCallback===n.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context}}class DL{constructor(n,t){this._repo=n,this._path=t}cancel(){const n=new E.BH;return _X(this._repo,this._path,n.wrapCallback(()=>{})),n.promise}remove(){Xr("OnDisconnect.remove",this._path);const n=new E.BH;return gL(this._repo,this._path,null,n.wrapCallback(()=>{})),n.promise}set(n){Xr("OnDisconnect.set",this._path),go("OnDisconnect.set",n,this._path,!1);const t=new E.BH;return gL(this._repo,this._path,n,t.wrapCallback(()=>{})),t.promise}setWithPriority(n,t){Xr("OnDisconnect.setWithPriority",this._path),go("OnDisconnect.setWithPriority",n,this._path,!1),EC("OnDisconnect.setWithPriority",t,!1);const i=new E.BH;return function vX(e,n,t,i,r){const s=Tn(t,i);e.server_.onDisconnectPut(n.toString(),s.val(!0),(o,a)=>{"ok"===o&&_d(e.onDisconnect_,n,s),Va(0,r,o,a)})}(this._repo,this._path,n,t,i.wrapCallback(()=>{})),i.promise}update(n){Xr("OnDisconnect.update",this._path),aL("OnDisconnect.update",n,this._path,!1);const t=new E.BH;return function yX(e,n,t,i){if((0,E.xb)(t))return ui("onDisconnect().update() called with empty data.  Don't do anything."),void Va(0,i,"ok",void 0);e.server_.onDisconnectMerge(n.toString(),t,(r,s)=>{"ok"===r&&di(t,(o,a)=>{const l=Tn(a);_d(e.onDisconnect_,_n(n,o),l)}),Va(0,i,r,s)})}(this._repo,this._path,n,t.wrapCallback(()=>{})),t.promise}}class pr{constructor(n,t,i,r){this._repo=n,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return ot(this._path)?null:LD(this._path)}get ref(){return new es(this._repo,this._path)}get _queryIdentifier(){const n=SF(this._queryParams),t=AD(n);return"{}"===t?"default":t}get _queryObject(){return SF(this._queryParams)}isEqual(n){if(!((n=(0,E.m9)(n))instanceof pr))return!1;const t=this._repo===n._repo,i=VD(this._path,n._path);return t&&i&&this._queryIdentifier===n._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function yQ(e){let n="";for(let t=e.pieceNum_;t<e.pieces_.length;t++)""!==e.pieces_[t]&&(n+="/"+encodeURIComponent(String(e.pieces_[t])));return n||"/"}(this._path)}}function qv(e,n){if(!0===e._orderByCalled)throw new Error(n+": You can't combine multiple orderBy calls.")}function Ba(e){let n=null,t=null;if(e.hasStart()&&(n=e.getIndexStartValue()),e.hasEnd()&&(t=e.getIndexEndValue()),e.getIndex()===fo){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Ra)throw new Error(i);if("string"!=typeof n)throw new Error(r)}if(e.hasEnd()){if(e.getIndexEndName()!==Ho)throw new Error(i);if("string"!=typeof t)throw new Error(r)}}else if(e.getIndex()===rn){if(null!=n&&!Tp(n)||null!=t&&!Tp(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,E.hu)(e.getIndex()instanceof $D||e.getIndex()===GD,"unknown index type."),null!=n&&"object"==typeof n||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Zv(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class es extends pr{constructor(n,t){super(n,t,new Dv,!1)}get parent(){const n=gF(this._path);return null===n?null:new es(this._repo,n)}get root(){let n=this;for(;null!==n.parent;)n=n.parent;return n}}class ac{constructor(n,t,i){this._node=n,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(n){const t=new Ft(n),i=lc(this.ref,n);return new ac(this._node.getChild(t),i,rn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(n){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>n(new ac(r,lc(this.ref,i),rn)))}hasChild(n){const t=new Ft(n);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function CL(e,n){return(e=(0,E.m9)(e))._checkNotDeleted("ref"),void 0!==n?lc(e._root,n):e._root}function TL(e,n){(e=(0,E.m9)(e))._checkNotDeleted("refFromURL");const t=AC(n,e._repo.repoInfo_.nodeAdmin);lL("refFromURL",t);const i=t.repoInfo;return!e._repo.repoInfo_.isCustomHost()&&i.host!==e._repo.repoInfo_.host&&ho("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+e._repo.repoInfo_.host+")"),CL(e,t.path.toString())}function lc(e,n){return null===st((e=(0,E.m9)(e))._path)?aX("child","path",n,!1):Np("child","path",n,!1),new es(e._repo,_n(e._path,n))}function MC(e,n){e=(0,E.m9)(e),Xr("set",e._path),go("set",n,e._path,!1);const t=new E.BH;return CC(e._repo,e._path,n,null,t.wrapCallback(()=>{})),t.promise}function xX(e,n){aL("update",n,e._path,!1);const t=new E.BH;return function gX(e,n,t,i){wd(e,"update",{path:n.toString(),value:t});let r=!0;const s=Ap(e),o={};if(di(t,(a,l)=>{r=!1,o[a]=iL(_n(n,a),Tn(l),e.serverSyncTree_,s)}),r)ui("update() called with empty data.  Don't do anything."),Va(0,i,"ok",void 0);else{const a=Gv(e),l=function jJ(e,n,t,i){!function rJ(e,n,t,i){(0,E.hu)(i>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:n,children:t,writeId:i,visible:!0}),e.visibleWrites=eC(e.visibleWrites,n,t),e.lastWriteId=i}(e.pendingWriteTree_,n,t,i);const r=sn.fromObject(t);return bd(e,new vd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,r))}(e.serverSyncTree_,n,o,a);$v(e.eventQueue_,l),e.server_.merge(n.toString(),t,(d,p)=>{const g="ok"===d;g||Pi("update at "+n+" failed: "+d);const _=La(e.serverSyncTree_,a,!g),v=_.length>0?Ed(e,n):n;Tr(e.eventQueue_,v,_),Va(0,i,d,p)}),di(t,d=>{const p=SC(e,_n(n,d));Ed(e,p)}),Tr(e.eventQueue_,n,[])}}(e._repo,e._path,n,t.wrapCallback(()=>{})),t.promise}function PX(e){e=(0,E.m9)(e);const n=new RC(()=>{}),t=new Rp(n);return function pX(e,n,t){const i=function zJ(e,n){const t=n._path;let i=null;e.syncPointTree_.foreachOnPath(t,(d,p)=>{const g=Yi(d,t);i=i||ka(p,g)});let r=e.syncPointTree_.get(t);r?i=i||ka(r,Tt()):(r=new zF,e.syncPointTree_=e.syncPointTree_.set(t,r));const s=null!=i,o=s?new xa(i,!0,!1):null;return function AJ(e){return Av(e.viewCache_)}(qF(r,n,Rv(e.pendingWriteTree_,n._path),s?o.getNode():We.EMPTY_NODE,s))}(e.serverSyncTree_,n);return null!=i?Promise.resolve(i):e.server_.get(n).then(r=>{const s=Tn(r).withIndex(n._queryParams.getIndex());let o;if(uC(e.serverSyncTree_,n,t,!0),n._queryParams.loadsAllData())o=wp(e.serverSyncTree_,n._path,s);else{const a=Ep(e.serverSyncTree_,n);o=JF(e.serverSyncTree_,n._path,s,a)}return Tr(e.eventQueue_,n._path,o),Lv(e.serverSyncTree_,n,t,null,!0),s},r=>(wd(e,"get for query "+(0,E.Wl)(n)+" failed: "+r),Promise.reject(new Error(r))))}(e._repo,e,t).then(i=>new ac(i,new es(e._repo,e._path),e._queryParams.getIndex()))}class Rp{constructor(n){this.callbackContext=n}respondsTo(n){return"value"===n}createEvent(n,t){const i=t._queryParams.getIndex();return new wL("value",this,new ac(n.snapshotNode,new es(t._repo,t._path),i))}getEventRunner(n){return"cancel"===n.getEventType()?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,null)}createCancelEvent(n,t){return this.callbackContext.hasCancelCallback?new EL(this,n,t):null}matches(n){return n instanceof Rp&&(!n.callbackContext||!this.callbackContext||n.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Kv{constructor(n,t){this.eventType=n,this.callbackContext=t}respondsTo(n){let t="children_added"===n?"child_added":n;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(n,t){return this.callbackContext.hasCancelCallback?new EL(this,n,t):null}createEvent(n,t){(0,E.hu)(null!=n.childName,"Child events should have a childName.");const i=lc(new es(t._repo,t._path),n.childName),r=t._queryParams.getIndex();return new wL(n.type,this,new ac(n.snapshotNode,i,r),n.prevName)}getEventRunner(n){return"cancel"===n.getEventType()?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,n.prevName)}matches(n){return n instanceof Kv&&this.eventType===n.eventType&&(!this.callbackContext||!n.callbackContext||this.callbackContext.matches(n.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Mp(e,n,t,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const l=t,d=(p,g)=>{TC(e._repo,e,a),l(p,g)};d.userCallback=t.userCallback,d.context=t.context,t=d}const o=new RC(t,s||void 0),a="value"===n?new Rp(o):new Kv(n,o);return function bX(e,n,t){let i;i=".info"===st(n._path)?uC(e.infoSyncTree_,n,t):uC(e.serverSyncTree_,n,t),cL(e.eventQueue_,n._path,i)}(e._repo,e,a),()=>TC(e._repo,e,a)}function OC(e,n,t,i){return Mp(e,"value",n,t,i)}function IL(e,n,t,i){return Mp(e,"child_added",n,t,i)}function SL(e,n,t,i){return Mp(e,"child_changed",n,t,i)}function NL(e,n,t,i){return Mp(e,"child_moved",n,t,i)}function AL(e,n,t,i){return Mp(e,"child_removed",n,t,i)}function RL(e,n,t){let i=null;const r=t?new RC(t):null;"value"===n?i=new Rp(r):n&&(i=new Kv(n,r)),TC(e._repo,e,i)}class Is{}class ML extends Is{constructor(n,t){super(),this._value=n,this._key=t}_apply(n){go("endAt",this._value,n._path,!0);const t=qD(n._queryParams,this._value,this._key);if(Zv(t),Ba(t),n._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new pr(n._repo,n._path,t,n._orderByCalled)}}class FX extends Is{constructor(n,t){super(),this._value=n,this._key=t}_apply(n){go("endBefore",this._value,n._path,!1);const t=function WQ(e,n,t){let i;return i=qD(e,n,e.index_===fo||t?t:Ra),i.endBeforeSet_=!0,i}(n._queryParams,this._value,this._key);if(Zv(t),Ba(t),n._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new pr(n._repo,n._path,t,n._orderByCalled)}}class OL extends Is{constructor(n,t){super(),this._value=n,this._key=t}_apply(n){go("startAt",this._value,n._path,!0);const t=zD(n._queryParams,this._value,this._key);if(Zv(t),Ba(t),n._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new pr(n._repo,n._path,t,n._orderByCalled)}}class BX extends Is{constructor(n,t){super(),this._value=n,this._key=t}_apply(n){go("startAfter",this._value,n._path,!1);const t=function GQ(e,n,t){let i;return i=zD(e,n,e.index_===fo||t?t:Ho),i.startAfterSet_=!0,i}(n._queryParams,this._value,this._key);if(Zv(t),Ba(t),n._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new pr(n._repo,n._path,t,n._orderByCalled)}}class jX extends Is{constructor(n){super(),this._limit=n}_apply(n){if(n._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new pr(n._repo,n._path,function HQ(e,n){const t=e.copy();return t.limitSet_=!0,t.limit_=n,t.viewFrom_="l",t}(n._queryParams,this._limit),n._orderByCalled)}}class $X extends Is{constructor(n){super(),this._limit=n}_apply(n){if(n._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new pr(n._repo,n._path,function $Q(e,n){const t=e.copy();return t.limitSet_=!0,t.limit_=n,t.viewFrom_="r",t}(n._queryParams,this._limit),n._orderByCalled)}}class WX extends Is{constructor(n){super(),this._path=n}_apply(n){qv(n,"orderByChild");const t=new Ft(this._path);if(ot(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new $D(t),r=Cv(n._queryParams,i);return Ba(r),new pr(n._repo,n._path,r,!0)}}class qX extends Is{_apply(n){qv(n,"orderByKey");const t=Cv(n._queryParams,fo);return Ba(t),new pr(n._repo,n._path,t,!0)}}class KX extends Is{_apply(n){qv(n,"orderByPriority");const t=Cv(n._queryParams,rn);return Ba(t),new pr(n._repo,n._path,t,!0)}}class QX extends Is{_apply(n){qv(n,"orderByValue");const t=Cv(n._queryParams,GD);return Ba(t),new pr(n._repo,n._path,t,!0)}}class XX extends Is{constructor(n,t){super(),this._value=n,this._key=t}_apply(n){if(go("equalTo",this._value,n._path,!1),n._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(n._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ML(this._value,this._key)._apply(new OL(this._value,this._key)._apply(n))}}function Ss(e,...n){let t=(0,E.m9)(e);for(const i of n)t=i._apply(t);return t}(function xJ(e){(0,E.hu)(!Pv,"__referenceConstructor has already been defined"),Pv=e})(es),function VJ(e){(0,E.hu)(!Fv,"__referenceConstructor has already been defined"),Fv=e}(es);const xC={};function PC(e,n,t,i,r){let s=i||e.options.databaseURL;void 0===s&&(e.options.projectId||ho("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ui("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let l,d,o=AC(s,r),a=o.repoInfo;typeof process<"u"&&process.env&&(d=process.env.FIREBASE_DATABASE_EMULATOR_HOST),d?(l=!0,s=`http://${d}?ns=${a.namespace}`,o=AC(s,r),a=o.repoInfo):l=!o.repoInfo.secure;const p=r&&l?new cp(cp.OWNER):new ZY(e.name,e.options,n);lL("Invalid Firebase Database URL",o),ot(o.path)||ho("Database URL must point to the root of a Firebase Database (not including a child path).");const g=function ree(e,n,t,i){let r=xC[n.name];r||(r={},xC[n.name]=r);let s=r[e.toURLString()];return s&&ho("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new dX(e,false,t,i),r[e.toURLString()]=s,s}(a,e,p,new qY(e.name,t));return new oee(g,e)}class oee{constructor(n,t){this._repoInternal=n,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function hX(e,n,t){if(e.stats_=PD(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Tv(e.repoInfo_,(i,r,s,o)=>{fL(e,i,r,s,o)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>pL(e,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,E.Wl)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new nc(e.repoInfo_,n,(i,r,s,o)=>{fL(e,i,r,s,o)},i=>{pL(e,i)},i=>{!function fX(e,n){di(n,(t,i)=>{DC(e,t,i)})}(e,i)},e.authTokenProvider_,e.appCheckProvider_,t),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(i=>{e.server_.refreshAuthToken(i)}),e.appCheckProvider_.addTokenChangeListener(i=>{e.server_.refreshAppCheckToken(i.token)}),e.statsReporter_=function QY(e,n){const t=e.toString();return xD[t]||(xD[t]=n()),xD[t]}(e.repoInfo_,()=>new QQ(e.stats_,e.server_)),e.infoData_=new zQ,e.infoSyncTree_=new QF({startListening:(i,r,s,o)=>{let a=[];const l=e.infoData_.getNode(i._path);return l.isEmpty()||(a=wp(e.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),DC(e,"connected",!1),e.serverSyncTree_=new QF({startListening:(i,r,s,o)=>(e.server_.listen(i,s,r,(a,l)=>{const d=o(a,l);Tr(e.eventQueue_,i._path,d)}),[]),stopListening:(i,r)=>{e.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new es(this._repo,Tt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function iee(e,n){const t=xC[n];(!t||t[e.key]!==e)&&ho(`Database ${n}(${e.repoInfo_}) has already been deleted.`),mL(e),delete t[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(n){null===this._rootInternal&&ho("Cannot call "+n+" on a deleted database.")}}function PL(){iF.IS_TRANSPORT_INITIALIZED&&Pi("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function aee(){PL(),Ma.forceDisallow()}function lee(){PL(),fd.forceDisallow(),Ma.forceAllow()}function dee(e,n){Lk(e,n)}const fee={".sv":"timestamp"};class mee{constructor(n,t){this.committed=n,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}nc.prototype.simpleListen=function(e,n){this.sendRequest("q",{p:e},n)},nc.prototype.echo=function(e,n){this.sendRequest("echo",{d:e},n)},function hee(e){ID(no.SDK_VERSION),(0,no._registerComponent)(new Fo.wA("database",(n,{instanceIdentifier:t})=>PC(n.getProvider("app").getImmediate(),n.getProvider("auth-internal"),n.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,no.registerVersion)(Mk,"1.0.1",e),(0,no.registerVersion)(Mk,"1.0.1","esm2017")}();const bee=new CD.Yd("@firebase/database-compat"),FL=function(e){bee.warn("FIREBASE WARNING: "+e)};class Dee{constructor(n){this._delegate=n}cancel(n){(0,E.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,E.Wj)("OnDisconnect.cancel","onComplete",n,!0);const t=this._delegate.cancel();return n&&t.then(()=>n(null),i=>n(i)),t}remove(n){(0,E.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,E.Wj)("OnDisconnect.remove","onComplete",n,!0);const t=this._delegate.remove();return n&&t.then(()=>n(null),i=>n(i)),t}set(n,t){(0,E.Dv)("OnDisconnect.set",1,2,arguments.length),(0,E.Wj)("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(n);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(n,t,i){(0,E.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,E.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(n,t);return i&&r.then(()=>i(null),s=>i(s)),r}update(n,t){if((0,E.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(n)){const r={};for(let s=0;s<n.length;++s)r[""+s]=n[s];n=r,FL("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,E.Wj)("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(n);return t&&i.then(()=>t(null),r=>t(r)),i}}class Cee{constructor(n,t){this.committed=n,this.snapshot=t}toJSON(){return(0,E.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ua{constructor(n,t){this._database=n,this._delegate=t}val(){return(0,E.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,E.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,E.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,E.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(n){return(0,E.Dv)("DataSnapshot.child",0,1,arguments.length),n=String(n),Np("DataSnapshot.child","path",n,!1),new Ua(this._database,this._delegate.child(n))}hasChild(n){return(0,E.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Np("DataSnapshot.hasChild","path",n,!1),this._delegate.hasChild(n)}getPriority(){return(0,E.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(n){return(0,E.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,E.Wj)("DataSnapshot.forEach","action",n,!1),this._delegate.forEach(t=>n(new Ua(this._database,t)))}hasChildren(){return(0,E.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,E.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,E.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ir(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ti{constructor(n,t){this.database=n,this._delegate=t}on(n,t,i,r){var s;(0,E.Dv)("Query.on",2,4,arguments.length),(0,E.Wj)("Query.on","callback",t,!1);const o=Ti.getCancelAndContextArgs_("Query.on",i,r),a=(d,p)=>{t.call(o.context,new Ua(this.database,d),p)};a.userCallback=t,a.context=o.context;const l=null===(s=o.cancel)||void 0===s?void 0:s.bind(o.context);switch(n){case"value":return OC(this._delegate,a,l),t;case"child_added":return IL(this._delegate,a,l),t;case"child_removed":return AL(this._delegate,a,l),t;case"child_changed":return SL(this._delegate,a,l),t;case"child_moved":return NL(this._delegate,a,l),t;default:throw new Error((0,E.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(n,t,i){if((0,E.Dv)("Query.off",0,3,arguments.length),function(e,n,t){if(void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,E.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,n),(0,E.Wj)("Query.off","callback",t,!0),(0,E.lb)("Query.off","context",i,!0),t){const r=()=>{};r.userCallback=t,r.context=i,RL(this._delegate,n,r)}else RL(this._delegate,n)}get(){return PX(this._delegate).then(n=>new Ua(this.database,n))}once(n,t,i,r){(0,E.Dv)("Query.once",1,4,arguments.length),(0,E.Wj)("Query.once","callback",t,!0);const s=Ti.getCancelAndContextArgs_("Query.once",i,r),o=new E.BH,a=(d,p)=>{const g=new Ua(this.database,d);t&&t.call(s.context,g,p),o.resolve(g)};a.userCallback=t,a.context=s.context;const l=d=>{s.cancel&&s.cancel.call(s.context,d),o.reject(d)};switch(n){case"value":OC(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":IL(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":AL(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":SL(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":NL(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,E.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(n){return(0,E.Dv)("Query.limitToFirst",1,1,arguments.length),new Ti(this.database,Ss(this._delegate,function HX(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new jX(e)}(n)))}limitToLast(n){return(0,E.Dv)("Query.limitToLast",1,1,arguments.length),new Ti(this.database,Ss(this._delegate,function GX(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new $X(e)}(n)))}orderByChild(n){return(0,E.Dv)("Query.orderByChild",1,1,arguments.length),new Ti(this.database,Ss(this._delegate,function zX(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Np("orderByChild","path",e,!1),new WX(e)}(n)))}orderByKey(){return(0,E.Dv)("Query.orderByKey",0,0,arguments.length),new Ti(this.database,Ss(this._delegate,function ZX(){return new qX}()))}orderByPriority(){return(0,E.Dv)("Query.orderByPriority",0,0,arguments.length),new Ti(this.database,Ss(this._delegate,function YX(){return new KX}()))}orderByValue(){return(0,E.Dv)("Query.orderByValue",0,0,arguments.length),new Ti(this.database,Ss(this._delegate,function JX(){return new QX}()))}startAt(n=null,t){return(0,E.Dv)("Query.startAt",0,2,arguments.length),new Ti(this.database,Ss(this._delegate,function VX(e=null,n){return Sp("startAt","key",n,!0),new OL(e,n)}(n,t)))}startAfter(n=null,t){return(0,E.Dv)("Query.startAfter",0,2,arguments.length),new Ti(this.database,Ss(this._delegate,function UX(e,n){return Sp("startAfter","key",n,!0),new BX(e,n)}(n,t)))}endAt(n=null,t){return(0,E.Dv)("Query.endAt",0,2,arguments.length),new Ti(this.database,Ss(this._delegate,function kX(e,n){return Sp("endAt","key",n,!0),new ML(e,n)}(n,t)))}endBefore(n=null,t){return(0,E.Dv)("Query.endBefore",0,2,arguments.length),new Ti(this.database,Ss(this._delegate,function LX(e,n){return Sp("endBefore","key",n,!0),new FX(e,n)}(n,t)))}equalTo(n,t){return(0,E.Dv)("Query.equalTo",1,2,arguments.length),new Ti(this.database,Ss(this._delegate,function eee(e,n){return Sp("equalTo","key",n,!0),new XX(e,n)}(n,t)))}toString(){return(0,E.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,E.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(n){if((0,E.Dv)("Query.isEqual",1,1,arguments.length),!(n instanceof Ti))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(n._delegate)}static getCancelAndContextArgs_(n,t,i){const r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,(0,E.Wj)(n,"cancel",r.cancel,!0),r.context=i,(0,E.lb)(n,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,E.gK)(n,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new Ir(this.database,new es(this._delegate._repo,this._delegate._path))}}class Ir extends Ti{constructor(n,t){super(n,new pr(t._repo,t._path,new Dv,!1)),this.database=n,this._delegate=t}getKey(){return(0,E.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(n){return(0,E.Dv)("Reference.child",1,1,arguments.length),"number"==typeof n&&(n=String(n)),new Ir(this.database,lc(this._delegate,n))}getParent(){(0,E.Dv)("Reference.parent",0,0,arguments.length);const n=this._delegate.parent;return n?new Ir(this.database,n):null}getRoot(){return(0,E.Dv)("Reference.root",0,0,arguments.length),new Ir(this.database,this._delegate.root)}set(n,t){(0,E.Dv)("Reference.set",1,2,arguments.length),(0,E.Wj)("Reference.set","onComplete",t,!0);const i=MC(this._delegate,n);return t&&i.then(()=>t(null),r=>t(r)),i}update(n,t){if((0,E.Dv)("Reference.update",1,2,arguments.length),Array.isArray(n)){const r={};for(let s=0;s<n.length;++s)r[""+s]=n[s];n=r,FL("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Xr("Reference.update",this._delegate._path),(0,E.Wj)("Reference.update","onComplete",t,!0);const i=xX(this._delegate,n);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(n,t,i){(0,E.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,E.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function OX(e,n,t){if(Xr("setWithPriority",e._path),go("setWithPriority",n,e._path,!1),EC("setWithPriority",t,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";const i=new E.BH;return CC(e._repo,e._path,n,t,i.wrapCallback(()=>{})),i.promise}(this._delegate,n,t);return i&&r.then(()=>i(null),s=>i(s)),r}remove(n){(0,E.Dv)("Reference.remove",0,1,arguments.length),(0,E.Wj)("Reference.remove","onComplete",n,!0);const t=function RX(e){return Xr("remove",e._path),MC(e,null)}(this._delegate);return n&&t.then(()=>n(null),i=>n(i)),t}transaction(n,t,i){(0,E.Dv)("Reference.transaction",1,3,arguments.length),(0,E.Wj)("Reference.transaction","transactionUpdate",n,!1),(0,E.Wj)("Reference.transaction","onComplete",t,!0),function(e,n,t,i){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,E.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function _ee(e,n,t){var i;if(e=(0,E.m9)(e),Xr("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const r=null===(i=t?.applyLocally)||void 0===i||i,s=new E.BH,a=OC(e,()=>{});return function EX(e,n,t,i,r,s){wd(e,"transaction on "+n);const o={path:n,update:t,onComplete:i,status:null,order:Pk(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=IC(e,n,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Ip("transaction failed: Data returned ",l,o.path),o.status=0;const d=Uv(e.transactionQueueTree_,n),p=oc(d)||[];let g;p.push(o),yC(d,p),"object"==typeof l&&null!==l&&(0,E.r3)(l,".priority")?(g=(0,E.DV)(l,".priority"),(0,E.hu)(Tp(g),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):g=(Vv(e.serverSyncTree_,n)||We.EMPTY_NODE).getPriority().val();const _=Ap(e),v=Tn(l,g),w=mC(v,a,_);o.currentOutputSnapshotRaw=v,o.currentOutputSnapshotResolved=w,o.currentWriteId=Gv(e);const T=cC(e.serverSyncTree_,n,w,o.currentWriteId,o.applyLocally);Tr(e.eventQueue_,n,T),Wv(e,e.transactionQueueTree_)}}(e._repo,e._path,n,(l,d,p)=>{let g=null;l?s.reject(l):(g=new ac(p,new es(e._repo,e._path),rn),s.resolve(new mee(d,g)))},a,r),s.promise}(this._delegate,n,{applyLocally:i}).then(s=>new Cee(s.committed,new Ua(this.database,s.snapshot)));return t&&r.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),r}setPriority(n,t){(0,E.Dv)("Reference.setPriority",1,2,arguments.length),(0,E.Wj)("Reference.setPriority","onComplete",t,!0);const i=function MX(e,n){e=(0,E.m9)(e),Xr("setPriority",e._path),EC("setPriority",n,!1);const t=new E.BH;return CC(e._repo,_n(e._path,".priority"),n,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,n);return t&&i.then(()=>t(null),r=>t(r)),i}push(n,t){(0,E.Dv)("Reference.push",0,2,arguments.length),(0,E.Wj)("Reference.push","onComplete",t,!0);const i=function AX(e,n){e=(0,E.m9)(e),Xr("push",e._path),go("push",n,e._path,!0);const t=hL(e._repo),i=NX(t),r=lc(e,i),s=lc(e,i);let o;return o=null!=n?MC(s,n).then(()=>s):Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}(this._delegate,n),r=i.then(o=>new Ir(this.database,o));t&&r.then(()=>t(null),o=>t(o));const s=new Ir(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return Xr("Reference.onDisconnect",this._delegate._path),new Dee(new DL(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Op{constructor(n,t){this._delegate=n,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:aee,forceLongPolling:lee}}useEmulator(n,t,i={}){!function kL(e,n,t,i={}){(e=(0,E.m9)(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&ho("Cannot call useEmulator() after instance has already been initialized.");const r=e._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&ho('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new cp(cp.OWNER);else if(i.mockUserToken){const o="string"==typeof i.mockUserToken?i.mockUserToken:(0,E.Sg)(i.mockUserToken,e.app.options.projectId);s=new cp(o)}!function nee(e,n,t,i){e.repoInfo_=new MD(`${n}:${t}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),i&&(e.authTokenProvider_=i)}(r,n,t,s)}(this._delegate,n,t,i)}ref(n){if((0,E.Dv)("database.ref",0,1,arguments.length),n instanceof Ir){const t=TL(this._delegate,n.toString());return new Ir(this,t)}{const t=CL(this._delegate,n);return new Ir(this,t)}}refFromURL(n){(0,E.Dv)("database.refFromURL",1,1,arguments.length);const i=TL(this._delegate,n);return new Ir(this,i)}goOffline(){return(0,E.Dv)("database.goOffline",0,0,arguments.length),function cee(e){(e=(0,E.m9)(e))._checkNotDeleted("goOffline"),mL(e._repo)}(this._delegate)}goOnline(){return(0,E.Dv)("database.goOnline",0,0,arguments.length),function uee(e){(e=(0,E.m9)(e))._checkNotDeleted("goOnline"),function wX(e){e.persistentConnection_&&e.persistentConnection_.resume(dL)}(e._repo)}(this._delegate)}}Op.ServerValue={TIMESTAMP:function pee(){return fee}(),increment:e=>function gee(e){return{".sv":{increment:e}}}(e)};var Iee=Object.freeze({__proto__:null,initStandalone:function Tee({app:e,url:n,version:t,customAuthImpl:i,customAppCheckImpl:r,namespace:s,nodeAdmin:o=!1}){ID(t);const a=new Fo.H0("database-standalone"),l=new Fo.zt("auth-internal",a);let d;return l.setComponent(new Fo.wA("auth-internal",()=>i,"PRIVATE")),r&&(d=new Fo.zt("app-check-internal",a),d.setComponent(new Fo.wA("app-check-internal",()=>r,"PRIVATE"))),{instance:new Op(PC(e,l,d,n,o),e),namespace:s}}});const See=Op.ServerValue;function xp(e,n,t="on",i=mf){return new He(r=>{let s=null;return s=e[t](n,(o,a)=>{i.schedule(()=>{r.next({snapshot:o,prevKey:a})}),"once"===t&&i.schedule(()=>r.complete())},o=>{i.schedule(()=>r.error(o))}),"on"===t?{unsubscribe(){null!=s&&e.off(n,s)}}:{unsubscribe(){}}}).pipe(me(r=>{const{snapshot:s,prevKey:o}=r;let a=null;return s.exists()&&(a=s.key),{type:n,payload:s,prevKey:o,key:a}}),xe())}function LL(e){return null==e}function VL(e){return"function"==typeof e.set}function BL(e,n){return VL(n)?n:e.ref(n)}function UL(e,n){if(function Aee(e){return"string"==typeof e}(e))return n.stringCase();if(VL(e))return n.firebaseCase();if(function Ree(e){return"function"==typeof e.exportVal}(e))return n.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof e)}function jL(e){return(LL(e)||0===e.length)&&(e=["child_added","child_removed","child_changed","child_moved"]),e}function HL(e,n,t){return z(...(n=jL(n)).map(r=>xp(e,r,"on",t)))}function $L(e,n){return function(i,r){return UL(i,{stringCase:()=>e.child(i)[n](r),firebaseCase:()=>i[n](r),snapshotCase:()=>i.ref[n](r)})}}function Pee(e){return function(t){return t?UL(t,{stringCase:()=>e.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):e.remove()}}function GL(e,n){const t=e.length;for(let i=0;i<t;i++)if(e[i].payload.key===n)return i;return-1}function Lee(e,n){const{payload:t,prevKey:i,key:r}=n,s=GL(e,r),o=function Fee(e,n){if(LL(n))return 0;{const t=GL(e,n);return-1===t?e.length:t+1}}(e,i);switch(n.type){case"value":if(n.payload?.exists()){let a=null;n.payload.forEach(l=>{const d={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,e=[...e,d],!1})}return e;case"child_added":if(s>-1)(e[s-1]?.key||null)!==i&&(e=e.filter(l=>l.payload.key!==t.key)).splice(o,0,n);else{if(null==i)return[n,...e];(e=e.slice()).splice(o,0,n)}return e;case"child_removed":return e.filter(a=>a.payload.key!==t.key);case"child_changed":return e.map(a=>a.payload.key===r?n:a);case"child_moved":if(s>-1){const a=e.splice(s,1)[0];return(e=e.slice()).splice(o,0,a),e}return e;default:return e}}function WL(e,n,t){return function kee(e,n,t){return xp(e,"value","once",t).pipe(ft(i=>{const r=[W(i)];return n.forEach(s=>r.push(xp(e,s,"on",t))),z(...r).pipe(tD(Lee,[]))}),Xt())}(e,n=jL(n),t)}function zL(e,n){return function(){return xp(e,"value","on",n)}}!function Nee(e){e.INTERNAL.registerComponent(new Fo.wA("database-compat",(n,{instanceIdentifier:t})=>{const i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("database").getImmediate({identifier:t});return new Op(r,i)},"PUBLIC").setServiceProps({Reference:Ir,Query:Ti,Database:Op,DataSnapshot:Ua,enableLogging:dee,INTERNAL:Iee,ServerValue:See}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","1.0.1")}(ko.Z);const Uee=new de("angularfire2.realtimeDatabaseURL"),jee=new de("angularfire2.database.use-emulator");let Hee=(()=>{class e{schedulers;database;constructor(t,i,r,s,o,a,l,d,p,g,_,v,w,T,A){this.schedulers=a;const B=l,R=h_(t,o,i);d&&Ak(R,o,p,_,v,w,g,T),this.database=Hw(`${R.name}.database.${r}`,"AngularFireDatabase",R.name,()=>{const Z=o.runOutsideAngular(()=>R.database(r||void 0));return B&&Z.useEmulator(...B),Z},[B])}list(t,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>BL(this.database,t));let s=r;return i&&(s=i(r)),function Vee(e,n){const t=n.schedulers.outsideAngular,i=n.schedulers.ngZone.run(()=>e.ref);return{query:e,update:$L(i,"update"),set:$L(i,"set"),push:r=>i.push(r),remove:Pee(i),snapshotChanges:r=>WL(e,r,t).pipe(io),stateChanges:r=>HL(e,r,t).pipe(io),auditTrail:r=>function Mee(e,n,t){return function xee(e,n,t){return function Oee(e,n){return xp(e,"value","on",n).pipe(me(t=>{let i;return t.payload.forEach(r=>(i=r.key,!1)),{data:t,lastKeyToLoad:i}}))}(e,t).pipe(b_(n),me(([r,s])=>{const o=r.lastKeyToLoad,a=s.map(l=>l.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),function PY(e){return H((n,t)=>{let i=!1,r=0;n.subscribe(ue(t,s=>(i||(i=!e(s,r++)))&&t.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),me(r=>r.actions))}(e,HL(e,n).pipe(tD((r,s)=>[...r,s],[])),t)}(e,r,t).pipe(io),valueChanges:(r,s)=>WL(e,r,t).pipe(me(a=>a.map(l=>s&&s.idField?{...l.payload.val(),[s.idField]:l.key}:l.payload.val())),io)}}(s,this)}object(t){return function Bee(e,n){return{query:e,snapshotChanges:()=>zL(e,n.schedulers.outsideAngular)().pipe(io),update:t=>e.ref.update(t),set:t=>e.ref.set(t),remove:()=>e.ref.remove(),valueChanges:()=>zL(e,n.schedulers.outsideAngular)().pipe(io,me(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>BL(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(i){return new(i||e)(te(_f),te(vf,8),te(Uee,8),te(Ks),te(nt),te(jw),te(jee,8),te(Rk,8),te(Dk,8),te(Ck,8),te(Tk,8),te(Ik,8),te(Sk,8),te(Nk,8),te(Uw,8))};static \u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})(),qL=(()=>{class e{constructor(t,i){this.storage=t,this.db=i,this.basePath="/feltolt",this.dbRef=this.db.list(this.basePath)}getData(){return this.dbRef}addFileData(t,i){this.dbRef.push({name:t,url:i})}deleteFile(t){this.dbRef.remove(t.key).then(()=>{this.storage.ref(this.basePath+"/"+t.name).delete().subscribe(s=>console.log("Sikeres t\xf6rl\xe9s"))})}pushFile(t){const i=this.basePath+"/"+t.name,r=this.storage.ref(i),s=this.storage.upload(i,t);return s.snapshotChanges().pipe(J_(()=>{r.getDownloadURL().subscribe(o=>{this.addFileData(t.name,o)})})).subscribe(o=>console.log(o)),s.percentageChanges()}static#e=this.\u0275fac=function(i){return new(i||e)(te(vM),te(Hee))};static#t=this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function $ee(e,n){if(1&e){const t=function ds(){return ne()}();Fe(0,"div",1)(1,"div",2)(2,"a",3),yi(3),Le()(),Fe(4,"div",4)(5,"button",5),pt("click",function(){const s=function ir(e){return Re.lFrame.contextLView=e,e[vn]}(t).$implicit;return function rr(e){return Re.lFrame.contextLView=null,e}(Ve().deleteFile(s))}),yi(6,"Delete"),Le()()()}if(2&e){const t=n.$implicit;Ce(2),Ee("href",t.url,S0),Ce(1),to(t.name)}}let Gee=(()=>{class e{constructor(t){this.base=t,this.base.getData().snapshotChanges().pipe(me(i=>i.map(r=>({key:r.payload.key,...r.payload.val()})))).subscribe(i=>{this.files=i,console.log(this.files)})}deleteFile(t){this.base.deleteFile(t)}static#e=this.\u0275fac=function(i){return new(i||e)(O(qL))};static#t=this.\u0275cmp=qn({type:e,selectors:[["app-upload-list"]],decls:1,vars:1,consts:[["class","row my-2",4,"ngFor","ngForOf"],[1,"row","my-2"],[1,"col-4"],[3,"href"],[1,"col-2"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"]],template:function(i,r){1&i&&Se(0,$ee,7,2,"div",0),2&i&&Ee("ngForOf",r.files)},dependencies:[Po]})}return e})();const Wee=function(e){return{width:e}};function zee(e,n){if(1&e&&(Fe(0,"div",6)(1,"div",7),us(2,"div",8),Le()()),2&e){const t=Ve();Ce(1),At("aria-valuenow",t.percentage),Ce(1),Ee("ngStyle",Pu(2,Wee,t.percentage+"%"))}}let qee=(()=>{class e{constructor(t){this.base=t,this.upload=!1,this.percentage=0}selectFile(t){console.log(t.target.files[0]),this.selectedFile=t.target.files[0],this.upload=!1,this.percentage=0}uploadFile(){console.log("\xc9n fogom felt\xf6lteni a filet!",this.selectedFile),this.upload=!0,this.base.pushFile(this.selectedFile).subscribe(t=>{console.log(t,"%"),this.percentage=Math.round(Number(t))})}static#e=this.\u0275fac=function(i){return new(i||e)(O(qL))};static#t=this.\u0275cmp=qn({type:e,selectors:[["app-upload-form"]],decls:8,vars:2,consts:[[1,"row","mb-3"],[1,"col-6"],["for","formFile",1,"form-label"],["type","file","id","formFile",1,"form-control",3,"change"],["type","button",1,"btn","btn-primary","my-3",3,"disabled","click"],["class","row",4,"ngIf"],[1,"row"],["role","progressbar","aria-label","Animated striped example","aria-valuemin","0","aria-valuemax","100",1,"progress"],[1,"progress-bar","progress-bar-striped","progress-bar-animated",3,"ngStyle"]],template:function(i,r){1&i&&(Fe(0,"div",0)(1,"div",1)(2,"label",2),yi(3,"Default file input example"),Le(),Fe(4,"input",3),pt("change",function(o){return r.selectFile(o)}),Le(),Fe(5,"button",4),pt("click",function(){return r.uploadFile()}),yi(6,"Felt\xf6lt\xe9s"),Le()()(),Se(7,zee,3,4,"div",5)),2&i&&(Ce(5),Ee("disabled",!r.selectedFile),Ce(2),Ee("ngIf",r.upload))},dependencies:[ba,nR]})}return e})(),Zee=(()=>{class e{constructor(){this.title="kepfeltoltes"}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275cmp=qn({type:e,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"text-center"],[1,"container"]],template:function(i,r){1&i&&(Fe(0,"h1",0),yi(1,"K\xe9pfelt\xf6lt\xe9s"),Le(),Fe(2,"div",1),us(3,"app-upload-form")(4,"app-upload-list"),Le())},dependencies:[Gee,qee]})}return e})();const Kee_firebaseConfig={apiKey:"AIzaSyDvCzLjJ4xwZCQXVD0uLZgLIMP33SG5j4w",authDomain:"project-1798265528709667411.firebaseapp.com",databaseURL:"https://project-1798265528709667411-default-rtdb.europe-west1.firebasedatabase.app",projectId:"project-1798265528709667411",storageBucket:"project-1798265528709667411.appspot.com",messagingSenderId:"505460598605",appId:"1:505460598605:web:1a30abb6516c9f07883904",measurementId:"G-TPK4YT9M4H"};let Yee=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=bt({type:e,bootstrap:[Zee]});static#n=this.\u0275inj=yt({imports:[rW,MY,cK,MW.initializeApp(Kee_firebaseConfig),E4]})}return e})();nW().bootstrapModule(Yee).catch(e=>console.error(e))},614:()=>{const ki=":";const St=function(P,...M){if(St.translate){const ee=St.translate(P,M);P=ee[0],M=ee[1]}let U=un(P[0],P.raw[0]);for(let ee=1;ee<P.length;ee++)U+=M[ee-1]+un(P[ee],P.raw[ee]);return U},kn=":";function un(P,M){return M.charAt(0)===kn?P.substring(function j(P,M){for(let U=1,ee=1;U<P.length;U++,ee++)if("\\"===M[ee])ee++;else if(P[U]===ki)return U;throw new Error(`Unterminated $localize metadata block in "${M}".`)}(P,M)+1):P}globalThis.$localize=St},106:(ki,In,ke)=>{ke.d(In,{Z:()=>an});var b=ke(58),Te=ke(537),$=ke(534),Me=ke(879);class et{constructor(Oe,je){this._delegate=Oe,this.firebase=je,(0,$._addComponent)(Oe,new Te.wA("app-compat",()=>this,"PUBLIC")),this.container=Oe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Oe){this._delegate.automaticDataCollectionEnabled=Oe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Oe=>{this._delegate.checkDestroyed(),Oe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,$.deleteApp)(this._delegate)))}_getService(Oe,je=$._DEFAULT_ENTRY_NAME){var Sn;this._delegate.checkDestroyed();const Nn=this._delegate.container.getProvider(Oe);return!Nn.isInitialized()&&"EXPLICIT"===(null===(Sn=Nn.getComponent())||void 0===Sn?void 0:Sn.instantiationMode)&&Nn.initialize(),Nn.getImmediate({identifier:je})}_removeServiceInstance(Oe,je=$._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Oe).clearInstance(je)}_addComponent(Oe){(0,$._addComponent)(this._delegate,Oe)}_addOrOverwriteComponent(Oe){(0,$._addOrOverwriteComponent)(this._delegate,Oe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Qt=new b.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),J=function Ye(){const mt=function Pn(mt){const Oe={},je={__esModule:!0,initializeApp:function Ot(Ue,An={}){const Y=$.initializeApp(Ue,An);if((0,b.r3)(Oe,Y.name))return Oe[Y.name];const Ht=new mt(Y,je);return Oe[Y.name]=Ht,Ht},app:Nn,registerVersion:$.registerVersion,setLogLevel:$.setLogLevel,onLog:$.onLog,apps:null,SDK_VERSION:$.SDK_VERSION,INTERNAL:{registerComponent:function It(Ue){const An=Ue.name,Y=An.replace("-compat","");if($._registerComponent(Ue)&&"PUBLIC"===Ue.type){const Ht=($t=Nn())=>{if("function"!=typeof $t[Y])throw Qt.create("invalid-app-argument",{appName:An});return $t[Y]()};void 0!==Ue.serviceProps&&(0,b.ZB)(Ht,Ue.serviceProps),je[Y]=Ht,mt.prototype[Y]=function(...$t){return this._getService.bind(this,An).apply(this,Ue.multipleInstances?$t:[])}}return"PUBLIC"===Ue.type?je[Y]:null},removeApp:function Sn(Ue){delete Oe[Ue]},useAsService:function si(Ue,An){return"serverAuth"===An?null:An},modularAPIs:$}};function Nn(Ue){if(!(0,b.r3)(Oe,Ue=Ue||$._DEFAULT_ENTRY_NAME))throw Qt.create("no-app",{appName:Ue});return Oe[Ue]}return je.default=je,Object.defineProperty(je,"apps",{get:function qe(){return Object.keys(Oe).map(Ue=>Oe[Ue])}}),Nn.App=mt,je}(et);return mt.INTERNAL=Object.assign(Object.assign({},mt.INTERNAL),{createFirebaseNamespace:Ye,extendNamespace:function Oe(je){(0,b.ZB)(mt,je)},createSubscribe:b.ne,ErrorFactory:b.LL,deepExtend:b.ZB}),mt}(),re=new Me.Yd("@firebase/app-compat");if((0,b.jU)()&&void 0!==self.firebase){re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const mt=self.firebase.SDK_VERSION;mt&&mt.indexOf("LITE")>=0&&re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const an=J;!function gt(mt){(0,$.registerVersion)("@firebase/app-compat","0.2.23",mt)}()},534:(ki,In,ke)=>{ke.r(In),ke.d(In,{FirebaseError:()=>Me.ZR,SDK_VERSION:()=>ts,_DEFAULT_ENTRY_NAME:()=>Qe,_addComponent:()=>Fi,_addOrOverwriteComponent:()=>Rn,_apps:()=>hn,_clearComponents:()=>Lt,_components:()=>fi,_getProvider:()=>wt,_registerComponent:()=>Fn,_removeServiceInstance:()=>Et,deleteApp:()=>ai,getApp:()=>Ms,getApps:()=>Go,initializeApp:()=>ns,onLog:()=>Wo,registerVersion:()=>Os,setLogLevel:()=>pc});var b=ke(861),Te=ke(537),$=ke(879),Me=ke(58);const et=(F,N)=>N.some(ie=>F instanceof ie);let Wt,Qt;const J=new WeakMap,re=new WeakMap,ge=new WeakMap,ze=new WeakMap,gt=new WeakMap;let Oe={get(F,N,ie){if(F instanceof IDBTransaction){if("done"===N)return re.get(F);if("objectStoreNames"===N)return F.objectStoreNames||ge.get(F);if("store"===N)return ie.objectStoreNames[1]?void 0:ie.objectStore(ie.objectStoreNames[0])}return Ot(F[N])},set:(F,N,ie)=>(F[N]=ie,!0),has:(F,N)=>F instanceof IDBTransaction&&("done"===N||"store"===N)||N in F};function Nn(F){return"function"==typeof F?function Sn(F){return F!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ye(){return Qt||(Qt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(F)?function(...N){return F.apply(qe(this),N),Ot(J.get(this))}:function(...N){return Ot(F.apply(qe(this),N))}:function(N,...ie){const De=F.call(qe(this),N,...ie);return ge.set(De,N.sort?N.sort():[N]),Ot(De)}}(F):(F instanceof IDBTransaction&&function mt(F){if(re.has(F))return;const N=new Promise((ie,De)=>{const Be=()=>{F.removeEventListener("complete",Je),F.removeEventListener("error",G),F.removeEventListener("abort",G)},Je=()=>{ie(),Be()},G=()=>{De(F.error||new DOMException("AbortError","AbortError")),Be()};F.addEventListener("complete",Je),F.addEventListener("error",G),F.addEventListener("abort",G)});re.set(F,N)}(F),et(F,function Pn(){return Wt||(Wt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(F,Oe):F)}function Ot(F){if(F instanceof IDBRequest)return function an(F){const N=new Promise((ie,De)=>{const Be=()=>{F.removeEventListener("success",Je),F.removeEventListener("error",G)},Je=()=>{ie(Ot(F.result)),Be()},G=()=>{De(F.error),Be()};F.addEventListener("success",Je),F.addEventListener("error",G)});return N.then(ie=>{ie instanceof IDBCursor&&J.set(ie,F)}).catch(()=>{}),gt.set(N,F),N}(F);if(ze.has(F))return ze.get(F);const N=Nn(F);return N!==F&&(ze.set(F,N),gt.set(N,F)),N}const qe=F=>gt.get(F),Ue=["get","getKey","getAll","getAllKeys","count"],An=["put","add","delete","clear"],Y=new Map;function Ht(F,N){if(!(F instanceof IDBDatabase)||N in F||"string"!=typeof N)return;if(Y.get(N))return Y.get(N);const ie=N.replace(/FromIndex$/,""),De=N!==ie,Be=An.includes(ie);if(!(ie in(De?IDBIndex:IDBObjectStore).prototype)||!Be&&!Ue.includes(ie))return;const Je=function(){var G=(0,b.Z)(function*(Mn,...be){const it=this.transaction(Mn,Be?"readwrite":"readonly");let qo=it.store;return De&&(qo=qo.index(be.shift())),(yield Promise.all([qo[ie](...be),Be&&it.done]))[0]});return function(be){return G.apply(this,arguments)}}();return Y.set(N,Je),Je}!function je(F){Oe=F(Oe)}(F=>({...F,get:(N,ie,De)=>Ht(N,ie)||F.get(N,ie,De),has:(N,ie)=>!!Ht(N,ie)||F.has(N,ie)}));class $t{constructor(N){this.container=N}getPlatformInfoString(){return this.container.getProviders().map(ie=>{if(function ln(F){const N=F.getComponent();return"VERSION"===N?.type}(ie)){const De=ie.getImmediate();return`${De.library}/${De.version}`}return null}).filter(ie=>ie).join(" ")}}const Ji="@firebase/app",He=new $.Yd("@firebase/app"),Qe="[DEFAULT]",dn={[Ji]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},hn=new Map,fi=new Map;function Fi(F,N){try{F.container.addComponent(N)}catch(ie){He.debug(`Component ${N.name} failed to register with FirebaseApp ${F.name}`,ie)}}function Rn(F,N){F.container.addOrOverwriteComponent(N)}function Fn(F){const N=F.name;if(fi.has(N))return He.debug(`There were multiple attempts to register component ${N}.`),!1;fi.set(N,F);for(const ie of hn.values())Fi(ie,F);return!0}function wt(F,N){const ie=F.container.getProvider("heartbeat").getImmediate({optional:!0});return ie&&ie.triggerHeartbeat(),F.container.getProvider(N)}function Et(F,N,ie=Qe){wt(F,N).clearInstance(ie)}function Lt(){fi.clear()}const pi=new Me.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class oi{constructor(N,ie,De){this._isDeleted=!1,this._options=Object.assign({},N),this._config=Object.assign({},ie),this._name=ie.name,this._automaticDataCollectionEnabled=ie.automaticDataCollectionEnabled,this._container=De,this.container.addComponent(new Te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(N){this.checkDestroyed(),this._automaticDataCollectionEnabled=N}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(N){this._isDeleted=N}checkDestroyed(){if(this.isDeleted)throw pi.create("app-deleted",{appName:this._name})}}const ts="10.6.0";function ns(F,N={}){let ie=F;"object"!=typeof N&&(N={name:N});const De=Object.assign({name:Qe,automaticDataCollectionEnabled:!1},N),Be=De.name;if("string"!=typeof Be||!Be)throw pi.create("bad-app-name",{appName:String(Be)});if(ie||(ie=(0,Me.aH)()),!ie)throw pi.create("no-options");const Je=hn.get(Be);if(Je){if((0,Me.vZ)(ie,Je.options)&&(0,Me.vZ)(De,Je.config))return Je;throw pi.create("duplicate-app",{appName:Be})}const G=new Te.H0(Be);for(const be of fi.values())G.addComponent(be);const Mn=new oi(ie,De,G);return hn.set(Be,Mn),Mn}function Ms(F=Qe){const N=hn.get(F);if(!N&&F===Qe&&(0,Me.aH)())return ns();if(!N)throw pi.create("no-app",{appName:F});return N}function Go(){return Array.from(hn.values())}function ai(F){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,b.Z)(function*(F){const N=F.name;hn.has(N)&&(hn.delete(N),yield Promise.all(F.container.getProviders().map(ie=>ie.delete())),F.isDeleted=!0)})).apply(this,arguments)}function Os(F,N,ie){var De;let Be=null!==(De=dn[F])&&void 0!==De?De:F;ie&&(Be+=`-${ie}`);const Je=Be.match(/\s|\//),G=N.match(/\s|\//);if(Je||G){const Mn=[`Unable to register library "${Be}" with version "${N}":`];return Je&&Mn.push(`library name "${Be}" contains illegal characters (whitespace or "/")`),Je&&G&&Mn.push("and"),G&&Mn.push(`version name "${N}" contains illegal characters (whitespace or "/")`),void He.warn(Mn.join(" "))}Fn(new Te.wA(`${Be}-version`,()=>({library:Be,version:N}),"VERSION"))}function Wo(F,N){if(null!==F&&"function"!=typeof F)throw pi.create("invalid-log-argument");(0,$.Am)(F,N)}function pc(F){(0,$.Ub)(F)}const Ha="firebase-heartbeat-database",zo=1,I="firebase-heartbeat-store";let C=null;function S(){return C||(C=function It(F,N,{blocked:ie,upgrade:De,blocking:Be,terminated:Je}={}){const G=indexedDB.open(F,N),Mn=Ot(G);return De&&G.addEventListener("upgradeneeded",be=>{De(Ot(G.result),be.oldVersion,be.newVersion,Ot(G.transaction),be)}),ie&&G.addEventListener("blocked",be=>ie(be.oldVersion,be.newVersion,be)),Mn.then(be=>{Je&&be.addEventListener("close",()=>Je()),Be&&be.addEventListener("versionchange",it=>Be(it.oldVersion,it.newVersion,it))}).catch(()=>{}),Mn}(Ha,zo,{upgrade:(F,N)=>{0===N&&F.createObjectStore(I)}}).catch(F=>{throw pi.create("idb-open",{originalErrorMessage:F.message})})),C}function k(){return(k=(0,b.Z)(function*(F){try{return yield(yield S()).transaction(I).objectStore(I).get(Ze(F))}catch(N){if(N instanceof Me.ZR)He.warn(N.message);else{const ie=pi.create("idb-get",{originalErrorMessage:N?.message});He.warn(ie.message)}}})).apply(this,arguments)}function W(F,N){return xe.apply(this,arguments)}function xe(){return(xe=(0,b.Z)(function*(F,N){try{const De=(yield S()).transaction(I,"readwrite");yield De.objectStore(I).put(N,Ze(F)),yield De.done}catch(ie){if(ie instanceof Me.ZR)He.warn(ie.message);else{const De=pi.create("idb-set",{originalErrorMessage:ie?.message});He.warn(De.message)}}})).apply(this,arguments)}function Ze(F){return`${F.name}!${F.options.appId}`}class jn{constructor(N){this.container=N,this._heartbeatsCache=null;const ie=this.container.getProvider("app").getImmediate();this._storage=new Vt(ie),this._heartbeatsCachePromise=this._storage.read().then(De=>(this._heartbeatsCache=De,De))}triggerHeartbeat(){var N=this;return(0,b.Z)(function*(){var ie;const Be=N.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Je=ve();if(null==(null===(ie=N._heartbeatsCache)||void 0===ie?void 0:ie.heartbeats)&&(N._heartbeatsCache=yield N._heartbeatsCachePromise),N._heartbeatsCache.lastSentHeartbeatDate!==Je&&!N._heartbeatsCache.heartbeats.some(G=>G.date===Je))return N._heartbeatsCache.heartbeats.push({date:Je,agent:Be}),N._heartbeatsCache.heartbeats=N._heartbeatsCache.heartbeats.filter(G=>{const Mn=new Date(G.date).valueOf();return Date.now()-Mn<=2592e6}),N._storage.overwrite(N._heartbeatsCache)})()}getHeartbeatsHeader(){var N=this;return(0,b.Z)(function*(){var ie;if(null===N._heartbeatsCache&&(yield N._heartbeatsCachePromise),null==(null===(ie=N._heartbeatsCache)||void 0===ie?void 0:ie.heartbeats)||0===N._heartbeatsCache.heartbeats.length)return"";const De=ve(),{heartbeatsToSend:Be,unsentEntries:Je}=function zn(F,N=1024){const ie=[];let De=F.slice();for(const Be of F){const Je=ie.find(G=>G.agent===Be.agent);if(Je){if(Je.dates.push(Be.date),Ar(ie)>N){Je.dates.pop();break}}else if(ie.push({agent:Be.agent,dates:[Be.date]}),Ar(ie)>N){ie.pop();break}De=De.slice(1)}return{heartbeatsToSend:ie,unsentEntries:De}}(N._heartbeatsCache.heartbeats),G=(0,Me.L)(JSON.stringify({version:2,heartbeats:Be}));return N._heartbeatsCache.lastSentHeartbeatDate=De,Je.length>0?(N._heartbeatsCache.heartbeats=Je,yield N._storage.overwrite(N._heartbeatsCache)):(N._heartbeatsCache.heartbeats=[],N._storage.overwrite(N._heartbeatsCache)),G})()}}function ve(){return(new Date).toISOString().substring(0,10)}class Vt{constructor(N){this.app=N,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,b.Z)(function*(){return!!(0,Me.hl)()&&(0,Me.eu)().then(()=>!0).catch(()=>!1)})()}read(){var N=this;return(0,b.Z)(function*(){return(yield N._canUseIndexedDBPromise)&&(yield function z(F){return k.apply(this,arguments)}(N.app))||{heartbeats:[]}})()}overwrite(N){var ie=this;return(0,b.Z)(function*(){var De;if(yield ie._canUseIndexedDBPromise){const Je=yield ie.read();return W(ie.app,{lastSentHeartbeatDate:null!==(De=N.lastSentHeartbeatDate)&&void 0!==De?De:Je.lastSentHeartbeatDate,heartbeats:N.heartbeats})}})()}add(N){var ie=this;return(0,b.Z)(function*(){var De;if(yield ie._canUseIndexedDBPromise){const Je=yield ie.read();return W(ie.app,{lastSentHeartbeatDate:null!==(De=N.lastSentHeartbeatDate)&&void 0!==De?De:Je.lastSentHeartbeatDate,heartbeats:[...Je.heartbeats,...N.heartbeats]})}})()}}function Ar(F){return(0,Me.L)(JSON.stringify({version:2,heartbeats:F})).length}!function gc(F){Fn(new Te.wA("platform-logger",N=>new $t(N),"PRIVATE")),Fn(new Te.wA("heartbeat",N=>new jn(N),"PRIVATE")),Os(Ji,"0.9.23",F),Os(Ji,"0.9.23","esm2017"),Os("fire-js","")}("")},537:(ki,In,ke)=>{ke.d(In,{H0:()=>Pn,wA:()=>$,zt:()=>et});var b=ke(861),Te=ke(58);class ${constructor(J,re,ge){this.name=J,this.instanceFactory=re,this.type=ge,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(J){return this.instantiationMode=J,this}setMultipleInstances(J){return this.multipleInstances=J,this}setServiceProps(J){return this.serviceProps=J,this}setInstanceCreatedCallback(J){return this.onInstanceCreated=J,this}}const Me="[DEFAULT]";class et{constructor(J,re){this.name=J,this.container=re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(J){const re=this.normalizeInstanceIdentifier(J);if(!this.instancesDeferred.has(re)){const ge=new Te.BH;if(this.instancesDeferred.set(re,ge),this.isInitialized(re)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:re});ze&&ge.resolve(ze)}catch{}}return this.instancesDeferred.get(re).promise}getImmediate(J){var re;const ge=this.normalizeInstanceIdentifier(J?.identifier),ze=null!==(re=J?.optional)&&void 0!==re&&re;if(!this.isInitialized(ge)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ge})}catch(gt){if(ze)return null;throw gt}}getComponent(){return this.component}setComponent(J){if(J.name!==this.name)throw Error(`Mismatching Component ${J.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=J,this.shouldAutoInitialize()){if(function Qt(Ye){return"EAGER"===Ye.instantiationMode}(J))try{this.getOrInitializeService({instanceIdentifier:Me})}catch{}for(const[re,ge]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(re);try{const gt=this.getOrInitializeService({instanceIdentifier:ze});ge.resolve(gt)}catch{}}}}clearInstance(J=Me){this.instancesDeferred.delete(J),this.instancesOptions.delete(J),this.instances.delete(J)}delete(){var J=this;return(0,b.Z)(function*(){const re=Array.from(J.instances.values());yield Promise.all([...re.filter(ge=>"INTERNAL"in ge).map(ge=>ge.INTERNAL.delete()),...re.filter(ge=>"_delete"in ge).map(ge=>ge._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(J=Me){return this.instances.has(J)}getOptions(J=Me){return this.instancesOptions.get(J)||{}}initialize(J={}){const{options:re={}}=J,ge=this.normalizeInstanceIdentifier(J.instanceIdentifier);if(this.isInitialized(ge))throw Error(`${this.name}(${ge}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:ge,options:re});for(const[gt,an]of this.instancesDeferred.entries())ge===this.normalizeInstanceIdentifier(gt)&&an.resolve(ze);return ze}onInit(J,re){var ge;const ze=this.normalizeInstanceIdentifier(re),gt=null!==(ge=this.onInitCallbacks.get(ze))&&void 0!==ge?ge:new Set;gt.add(J),this.onInitCallbacks.set(ze,gt);const an=this.instances.get(ze);return an&&J(an,ze),()=>{gt.delete(J)}}invokeOnInitCallbacks(J,re){const ge=this.onInitCallbacks.get(re);if(ge)for(const ze of ge)try{ze(J,re)}catch{}}getOrInitializeService({instanceIdentifier:J,options:re={}}){let ge=this.instances.get(J);if(!ge&&this.component&&(ge=this.component.instanceFactory(this.container,{instanceIdentifier:(Ye=J,Ye===Me?void 0:Ye),options:re}),this.instances.set(J,ge),this.instancesOptions.set(J,re),this.invokeOnInitCallbacks(ge,J),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,J,ge)}catch{}var Ye;return ge||null}normalizeInstanceIdentifier(J=Me){return this.component?this.component.multipleInstances?J:Me:J}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Pn{constructor(J){this.name=J,this.providers=new Map}addComponent(J){const re=this.getProvider(J.name);if(re.isComponentSet())throw new Error(`Component ${J.name} has already been registered with ${this.name}`);re.setComponent(J)}addOrOverwriteComponent(J){this.getProvider(J.name).isComponentSet()&&this.providers.delete(J.name),this.addComponent(J)}getProvider(J){if(this.providers.has(J))return this.providers.get(J);const re=new et(J,this);return this.providers.set(J,re),re}getProviders(){return Array.from(this.providers.values())}}},879:(ki,In,ke)=>{ke.d(In,{Am:()=>Ye,Ub:()=>Pn,Yd:()=>Qt,in:()=>Te});const b=[];var Te=function(J){return J[J.DEBUG=0]="DEBUG",J[J.VERBOSE=1]="VERBOSE",J[J.INFO=2]="INFO",J[J.WARN=3]="WARN",J[J.ERROR=4]="ERROR",J[J.SILENT=5]="SILENT",J}(Te||{});const $={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},Me=Te.INFO,et={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},Wt=(J,re,...ge)=>{if(re<J.logLevel)return;const ze=(new Date).toISOString(),gt=et[re];if(!gt)throw new Error(`Attempted to log a message with an invalid logType (value: ${re})`);console[gt](`[${ze}]  ${J.name}:`,...ge)};class Qt{constructor(re){this.name=re,this._logLevel=Me,this._logHandler=Wt,this._userLogHandler=null,b.push(this)}get logLevel(){return this._logLevel}set logLevel(re){if(!(re in Te))throw new TypeError(`Invalid value "${re}" assigned to \`logLevel\``);this._logLevel=re}setLogLevel(re){this._logLevel="string"==typeof re?$[re]:re}get logHandler(){return this._logHandler}set logHandler(re){if("function"!=typeof re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=re}get userLogHandler(){return this._userLogHandler}set userLogHandler(re){this._userLogHandler=re}debug(...re){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...re),this._logHandler(this,Te.DEBUG,...re)}log(...re){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...re),this._logHandler(this,Te.VERBOSE,...re)}info(...re){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...re),this._logHandler(this,Te.INFO,...re)}warn(...re){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...re),this._logHandler(this,Te.WARN,...re)}error(...re){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...re),this._logHandler(this,Te.ERROR,...re)}}function Pn(J){b.forEach(re=>{re.setLogLevel(J)})}function Ye(J,re){for(const ge of b){let ze=null;re&&re.level&&(ze=$[re.level]),ge.userLogHandler=null===J?null:(gt,an,...mt)=>{const Oe=mt.map(je=>{if(null==je)return null;if("string"==typeof je)return je;if("number"==typeof je||"boolean"==typeof je)return je.toString();if(je instanceof Error)return je.message;try{return JSON.stringify(je)}catch{return null}}).filter(je=>je).join(" ");an>=(ze??gt.logLevel)&&J({level:Te[an].toLowerCase(),message:Oe,args:mt,type:gt.name})}}}},956:(ki,In,ke)=>{ke.r(In);var b=ke(861),Te=ke(106),$=ke(58),Me=ke(534),et=ke(879),Wt=ke(582),Qt=ke(537);const Ye={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const an=function ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},mt=function gt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Oe=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Sn=new et.Yd("@firebase/auth");function Ot(h,...c){Sn.logLevel<=et.in.ERROR&&Sn.error(`Auth (${Me.SDK_VERSION}): ${h}`,...c)}function qe(h,...c){throw An(h,...c)}function It(h,...c){return An(h,...c)}function si(h,c,u){const f=Object.assign(Object.assign({},mt()),{[c]:u});return new $.LL("auth","Firebase",f).create(c,{appName:h.name})}function Ue(h,c,u){if(!(c instanceof u))throw u.name!==c.constructor.name&&qe(h,"argument-error"),si(h,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function An(h,...c){if("string"!=typeof h){const u=c[0],f=[...c.slice(1)];return f[0]&&(f[0].appName=h.name),h._errorFactory.create(u,...f)}return Oe.create(h,...c)}function Y(h,c,...u){if(!h)throw An(c,...u)}function Ht(h){const c="INTERNAL ASSERTION FAILED: "+h;throw Ot(c),new Error(c)}function $t(h,c){h||Ht(c)}function ln(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.href)||""}function Ji(){return"http:"===Xi()||"https:"===Xi()}function Xi(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.protocol)||null}class er{constructor(c,u){this.shortDelay=c,this.longDelay=u,$t(u>c,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function He(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ji()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function V(h,c){$t(h.emulator,"Emulator should always be set here");const{url:u}=h.emulator;return c?`${u}${c.startsWith("/")?c.slice(1):c}`:u}class j{static initialize(c,u,f){this.fetchImpl=c,u&&(this.headersImpl=u),f&&(this.responseImpl=f)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Ht("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Ht("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Ht("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const L={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},q=new er(3e4,6e4);function X(h,c){return h.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:h.tenantId}):c}function H(h,c,u,f){return ue.apply(this,arguments)}function ue(){return(ue=(0,b.Z)(function*(h,c,u,f,m={}){return tt(h,m,(0,b.Z)(function*(){let y={},D={};f&&("GET"===c?D=f:y={body:JSON.stringify(f)});const x=(0,$.xO)(Object.assign({key:h.config.apiKey},D)).slice(1),K=yield h._getAdditionalHeaders();return K["Content-Type"]="application/json",h.languageCode&&(K["X-Firebase-Locale"]=h.languageCode),j.fetch()(zt(h,h.config.apiHost,u,x),Object.assign({method:c,headers:K,referrerPolicy:"no-referrer"},y))}))})).apply(this,arguments)}function tt(h,c,u){return me.apply(this,arguments)}function me(){return(me=(0,b.Z)(function*(h,c,u){h._canInitEmulator=!1;const f=Object.assign(Object.assign({},L),c);try{const m=new kn(h),y=yield Promise.race([u(),m.promise]);m.clearNetworkTimeout();const D=yield y.json();if("needConfirmation"in D)throw un(h,"account-exists-with-different-credential",D);if(y.ok&&!("errorMessage"in D))return D;{const x=y.ok?D.errorMessage:D.error.message,[K,fe]=x.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===K)throw un(h,"credential-already-in-use",D);if("EMAIL_EXISTS"===K)throw un(h,"email-already-in-use",D);if("USER_DISABLED"===K)throw un(h,"user-disabled",D);const _e=f[K]||K.toLowerCase().replace(/[_\s]+/g,"-");if(fe)throw si(h,_e,fe);qe(h,_e)}}catch(m){if(m instanceof $.ZR)throw m;qe(h,"network-request-failed",{message:String(m)})}})).apply(this,arguments)}function we(h,c,u,f){return ht.apply(this,arguments)}function ht(){return(ht=(0,b.Z)(function*(h,c,u,f,m={}){const y=yield H(h,c,u,f,m);return"mfaPendingCredential"in y&&qe(h,"multi-factor-auth-required",{_serverResponse:y}),y})).apply(this,arguments)}function zt(h,c,u,f){const m=`${c}${u}?${f}`;return h.config.emulator?V(h.config,m):`${h.config.apiScheme}://${m}`}function St(h){switch(h){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kn{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((u,f)=>{this.timer=setTimeout(()=>f(It(this.auth,"network-request-failed")),q.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function un(h,c,u){const f={appName:h.name};u.email&&(f.email=u.email),u.phoneNumber&&(f.phoneNumber=u.phoneNumber);const m=It(h,c,f);return m.customData._tokenResponse=u,m}function P(h){return void 0!==h&&void 0!==h.getResponse}function M(h){return void 0!==h&&void 0!==h.enterprise}class U{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const u of this.recaptchaEnforcementState)if(u.provider&&u.provider===c)return St(u.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function le(){return(le=(0,b.Z)(function*(h){return(yield H(h,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function se(h,c){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,b.Z)(function*(h,c){return H(h,"GET","/v2/recaptchaConfig",X(h,c))})).apply(this,arguments)}function Qe(){return(Qe=(0,b.Z)(function*(h,c){return H(h,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function hn(){return(hn=(0,b.Z)(function*(h,c){return H(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Fi(){return(Fi=(0,b.Z)(function*(h,c){return H(h,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Rn(h){if(h)try{const c=new Date(Number(h));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function Et(){return(Et=(0,b.Z)(function*(h,c=!1){const u=(0,$.m9)(h),f=yield u.getIdToken(c),m=Rs(f);Y(m&&m.exp&&m.auth_time&&m.iat,u.auth,"internal-error");const y="object"==typeof m.firebase?m.firebase:void 0,D=y?.sign_in_provider;return{claims:m,token:f,authTime:Rn(Lt(m.auth_time)),issuedAtTime:Rn(Lt(m.iat)),expirationTime:Rn(Lt(m.exp)),signInProvider:D||null,signInSecondFactor:y?.sign_in_second_factor||null}})).apply(this,arguments)}function Lt(h){return 1e3*Number(h)}function Rs(h){const[c,u,f]=h.split(".");if(void 0===c||void 0===u||void 0===f)return Ot("JWT malformed, contained fewer than 3 sections"),null;try{const m=(0,$.tV)(u);return m?JSON.parse(m):(Ot("Failed to decode base64 JWT payload"),null)}catch(m){return Ot("Caught error parsing JWT payload as JSON",m?.toString()),null}}function oi(h,c){return ts.apply(this,arguments)}function ts(){return(ts=(0,b.Z)(function*(h,c,u=!1){if(u)return c;try{return yield c}catch(f){throw f instanceof $.ZR&&function ns({code:h}){return"auth/user-disabled"===h||"auth/user-token-expired"===h}(f)&&h.auth.currentUser===h&&(yield h.auth.signOut()),f}})).apply(this,arguments)}class Ms{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var u;if(c){const f=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),f}{this.errorBackoff=3e4;const m=(null!==(u=this.user.stsTokenManager.expirationTime)&&void 0!==u?u:0)-Date.now()-3e5;return Math.max(0,m)}}schedule(c=!1){var u=this;if(!this.isRunning)return;const f=this.getInterval(c);this.timerId=setTimeout((0,b.Z)(function*(){yield u.iteration()}),f)}iteration(){var c=this;return(0,b.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(u){return void("auth/network-request-failed"===u?.code&&c.schedule(!0))}c.schedule()})()}}class Go{constructor(c,u){this.createdAt=c,this.lastLoginAt=u,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rn(this.lastLoginAt),this.creationTime=Rn(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ai(h){return Ii.apply(this,arguments)}function Ii(){return Ii=(0,b.Z)(function*(h){var c;const u=h.auth,f=yield h.getIdToken(),m=yield oi(h,function fi(h,c){return Fi.apply(this,arguments)}(u,{idToken:f}));Y(m?.users.length,u,"internal-error");const y=m.users[0];h._notifyReloadListener(y);const D=null!==(c=y.providerUserInfo)&&void 0!==c&&c.length?function Ha(h){return h.map(c=>{var{providerId:u}=c,f=(0,Wt._T)(c,["providerId"]);return{providerId:u,uid:f.rawId||"",displayName:f.displayName||null,email:f.email||null,phoneNumber:f.phoneNumber||null,photoURL:f.photoUrl||null}})}(y.providerUserInfo):[],x=function pc(h,c){return[...h.filter(f=>!c.some(m=>m.providerId===f.providerId)),...c]}(h.providerData,D),_e=!!h.isAnonymous&&!(h.email&&y.passwordHash||x?.length),ye={uid:y.localId,displayName:y.displayName||null,photoURL:y.photoUrl||null,email:y.email||null,emailVerified:y.emailVerified||!1,phoneNumber:y.phoneNumber||null,tenantId:y.tenantId||null,providerData:x,metadata:new Go(y.createdAt,y.lastLoginAt),isAnonymous:_e};Object.assign(h,ye)}),Ii.apply(this,arguments)}function Wo(){return(Wo=(0,b.Z)(function*(h){const c=(0,$.m9)(h);yield ai(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function I(){return(I=(0,b.Z)(function*(h,c){const u=yield tt(h,{},(0,b.Z)(function*(){const f=(0,$.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:m,apiKey:y}=h.config,D=zt(h,m,"/v1/token",`key=${y}`),x=yield h._getAdditionalHeaders();return x["Content-Type"]="application/x-www-form-urlencoded",j.fetch()(D,{method:"POST",headers:x,body:f})}));return{accessToken:u.access_token,expiresIn:u.expires_in,refreshToken:u.refresh_token}})).apply(this,arguments)}function S(){return(S=(0,b.Z)(function*(h,c){return H(h,"POST","/v2/accounts:revokeToken",X(h,c))})).apply(this,arguments)}class z{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){Y(c.idToken,"internal-error"),Y(typeof c.idToken<"u","internal-error"),Y(typeof c.refreshToken<"u","internal-error");const u="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function pi(h){const c=Rs(h);return Y(c,"internal-error"),Y(typeof c.exp<"u","internal-error"),Y(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,u)}getToken(c,u=!1){var f=this;return(0,b.Z)(function*(){return Y(!f.accessToken||f.refreshToken,c,"user-token-expired"),u||!f.accessToken||f.isExpired?f.refreshToken?(yield f.refresh(c,f.refreshToken),f.accessToken):null:f.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,u){var f=this;return(0,b.Z)(function*(){const{accessToken:m,refreshToken:y,expiresIn:D}=yield function zo(h,c){return I.apply(this,arguments)}(c,u);f.updateTokensAndExpiration(m,y,Number(D))})()}updateTokensAndExpiration(c,u,f){this.refreshToken=u||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*f}static fromJSON(c,u){const{refreshToken:f,accessToken:m,expirationTime:y}=u,D=new z;return f&&(Y("string"==typeof f,"internal-error",{appName:c}),D.refreshToken=f),m&&(Y("string"==typeof m,"internal-error",{appName:c}),D.accessToken=m),y&&(Y("number"==typeof y,"internal-error",{appName:c}),D.expirationTime=y),D}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new z,this.toJSON())}_performRefresh(){return Ht("not implemented")}}function k(h,c){Y("string"==typeof h||typeof h>"u","internal-error",{appName:c})}class W{constructor(c){var{uid:u,auth:f,stsTokenManager:m}=c,y=(0,Wt._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ms(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=u,this.auth=f,this.stsTokenManager=m,this.accessToken=m.accessToken,this.displayName=y.displayName||null,this.email=y.email||null,this.emailVerified=y.emailVerified||!1,this.phoneNumber=y.phoneNumber||null,this.photoURL=y.photoURL||null,this.isAnonymous=y.isAnonymous||!1,this.tenantId=y.tenantId||null,this.providerData=y.providerData?[...y.providerData]:[],this.metadata=new Go(y.createdAt||void 0,y.lastLoginAt||void 0)}getIdToken(c){var u=this;return(0,b.Z)(function*(){const f=yield oi(u,u.stsTokenManager.getToken(u.auth,c));return Y(f,u.auth,"internal-error"),u.accessToken!==f&&(u.accessToken=f,yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)),f})()}getIdTokenResult(c){return function wt(h){return Et.apply(this,arguments)}(this,c)}reload(){return function Os(h){return Wo.apply(this,arguments)}(this)}_assign(c){this!==c&&(Y(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(u=>Object.assign({},u)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const u=new W(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return u.metadata._copy(this.metadata),u}_onReload(c){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,u=!1){var f=this;return(0,b.Z)(function*(){let m=!1;c.idToken&&c.idToken!==f.stsTokenManager.accessToken&&(f.stsTokenManager.updateFromServerResponse(c),m=!0),u&&(yield ai(f)),yield f.auth._persistUserIfCurrent(f),m&&f.auth._notifyListenersIfCurrent(f)})()}delete(){var c=this;return(0,b.Z)(function*(){const u=yield c.getIdToken();return yield oi(c,function vt(h,c){return Qe.apply(this,arguments)}(c.auth,{idToken:u})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,u){var f,m,y,D,x,K,fe,_e;const ye=null!==(f=u.displayName)&&void 0!==f?f:void 0,pn=null!==(m=u.email)&&void 0!==m?m:void 0,_r=null!==(y=u.phoneNumber)&&void 0!==y?y:void 0,ru=null!==(D=u.photoURL)&&void 0!==D?D:void 0,Kg=null!==(x=u.tenantId)&&void 0!==x?x:void 0,fa=null!==(K=u._redirectEventId)&&void 0!==K?K:void 0,Sh=null!==(fe=u.createdAt)&&void 0!==fe?fe:void 0,Yg=null!==(_e=u.lastLoginAt)&&void 0!==_e?_e:void 0,{uid:su,emailVerified:s0,isAnonymous:Nh,providerData:Qg,stsTokenManager:Jg}=u;Y(su&&Jg,c,"internal-error");const o0=z.fromJSON(this.name,Jg);Y("string"==typeof su,c,"internal-error"),k(ye,c.name),k(pn,c.name),Y("boolean"==typeof s0,c,"internal-error"),Y("boolean"==typeof Nh,c,"internal-error"),k(_r,c.name),k(ru,c.name),k(Kg,c.name),k(fa,c.name),k(Sh,c.name),k(Yg,c.name);const Tl=new W({uid:su,auth:c,email:pn,emailVerified:s0,displayName:ye,isAnonymous:Nh,photoURL:ru,phoneNumber:_r,tenantId:Kg,stsTokenManager:o0,createdAt:Sh,lastLoginAt:Yg});return Qg&&Array.isArray(Qg)&&(Tl.providerData=Qg.map(ET=>Object.assign({},ET))),fa&&(Tl._redirectEventId=fa),Tl}static _fromIdTokenResponse(c,u,f=!1){return(0,b.Z)(function*(){const m=new z;m.updateFromServerResponse(u);const y=new W({uid:u.localId,auth:c,stsTokenManager:m,isAnonymous:f});return yield ai(y),y})()}}const xe=new Map;function Ze(h){$t(h instanceof Function,"Expected a class definition");let c=xe.get(h);return c?($t(c instanceof h,"Instance stored in cache mismatched with class"),c):(c=new h,xe.set(h,c),c)}const Xt=(()=>{class h{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,b.Z)(function*(){return!0})()}_set(u,f){var m=this;return(0,b.Z)(function*(){m.storage[u]=f})()}_get(u){var f=this;return(0,b.Z)(function*(){const m=f.storage[u];return void 0===m?null:m})()}_remove(u){var f=this;return(0,b.Z)(function*(){delete f.storage[u]})()}_addListener(u,f){}_removeListener(u,f){}}return h.type="NONE",h})();function jn(h,c,u){return`firebase:${h}:${c}:${u}`}class ve{constructor(c,u,f){this.persistence=c,this.auth=u,this.userKey=f;const{config:m,name:y}=this.auth;this.fullUserKey=jn(this.userKey,m.apiKey,y),this.fullPersistenceKey=jn("persistence",m.apiKey,y),this.boundEventHandler=u._onStorageEvent.bind(u),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,b.Z)(function*(){const u=yield c.persistence._get(c.fullUserKey);return u?W._fromJSON(c.auth,u):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var u=this;return(0,b.Z)(function*(){if(u.persistence===c)return;const f=yield u.getCurrentUser();return yield u.removeCurrentUser(),u.persistence=c,f?u.setCurrentUser(f):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,u,f="authUser"){return(0,b.Z)(function*(){if(!u.length)return new ve(Ze(Xt),c,f);const m=(yield Promise.all(u.map(function(){var fe=(0,b.Z)(function*(_e){if(yield _e._isAvailable())return _e});return function(_e){return fe.apply(this,arguments)}}()))).filter(fe=>fe);let y=m[0]||Ze(Xt);const D=jn(f,c.config.apiKey,c.name);let x=null;for(const fe of u)try{const _e=yield fe._get(D);if(_e){const ye=W._fromJSON(c,_e);fe!==y&&(x=ye),y=fe;break}}catch{}const K=m.filter(fe=>fe._shouldAllowMigration);return y._shouldAllowMigration&&K.length?(y=K[0],x&&(yield y._set(D,x.toJSON())),yield Promise.all(u.map(function(){var fe=(0,b.Z)(function*(_e){if(_e!==y)try{yield _e._remove(D)}catch{}});return function(_e){return fe.apply(this,arguments)}}())),new ve(y,c,f)):new ve(y,c,f)})()}}function zn(h){const c=h.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(F(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Vt(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(ie(c))return"Blackberry";if(De(c))return"Webos";if(Ar(c))return"Safari";if((c.includes("chrome/")||gc(c))&&!c.includes("edge/"))return"Chrome";if(N(c))return"Android";{const f=h.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===f?.length)return f[1]}return"Other"}function Vt(h=(0,$.z$)()){return/firefox\//i.test(h)}function Ar(h=(0,$.z$)()){const c=h.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function gc(h=(0,$.z$)()){return/crios\//i.test(h)}function F(h=(0,$.z$)()){return/iemobile/i.test(h)}function N(h=(0,$.z$)()){return/android/i.test(h)}function ie(h=(0,$.z$)()){return/blackberry/i.test(h)}function De(h=(0,$.z$)()){return/webos/i.test(h)}function Be(h=(0,$.z$)()){return/iphone|ipad|ipod/i.test(h)||/macintosh/i.test(h)&&/mobile/i.test(h)}function be(h=(0,$.z$)()){return Be(h)||N(h)||De(h)||ie(h)||/windows phone/i.test(h)||F(h)}function qo(h,c=[]){let u;switch(h){case"Browser":u=zn((0,$.z$)());break;case"Worker":u=`${zn((0,$.z$)())}-${h}`;break;default:u=h}const f=c.length?c.join(","):"FirebaseCore-web";return`${u}/JsCore/${Me.SDK_VERSION}/${f}`}class BC{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,u){const f=y=>new Promise((D,x)=>{try{D(c(y))}catch(K){x(K)}});f.onAbort=u,this.queue.push(f);const m=this.queue.length-1;return()=>{this.queue[m]=()=>Promise.resolve()}}runMiddleware(c){var u=this;return(0,b.Z)(function*(){if(u.auth.currentUser===c)return;const f=[];try{for(const m of u.queue)yield m(c),m.onAbort&&f.push(m.onAbort)}catch(m){f.reverse();for(const y of f)try{y()}catch{}throw u.auth._errorFactory.create("login-blocked",{originalMessage:m?.message})}})()}}function $a(){return($a=(0,b.Z)(function*(h,c={}){return H(h,"GET","/v2/passwordPolicy",X(h,c))})).apply(this,arguments)}class UC{constructor(c){var u,f,m,y;const D=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(u=D.minPasswordLength)&&void 0!==u?u:6,D.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=D.maxPasswordLength),void 0!==D.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=D.containsLowercaseCharacter),void 0!==D.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=D.containsUppercaseCharacter),void 0!==D.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=D.containsNumericCharacter),void 0!==D.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=D.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(m=null===(f=c.allowedNonAlphanumericCharacters)||void 0===f?void 0:f.join(""))&&void 0!==m?m:"",this.forceUpgradeOnSignin=null!==(y=c.forceUpgradeOnSignin)&&void 0!==y&&y,this.schemaVersion=c.schemaVersion}validatePassword(c){var u,f,m,y,D,x;const K={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,K),this.validatePasswordCharacterOptions(c,K),K.isValid&&(K.isValid=null===(u=K.meetsMinPasswordLength)||void 0===u||u),K.isValid&&(K.isValid=null===(f=K.meetsMaxPasswordLength)||void 0===f||f),K.isValid&&(K.isValid=null===(m=K.containsLowercaseLetter)||void 0===m||m),K.isValid&&(K.isValid=null===(y=K.containsUppercaseLetter)||void 0===y||y),K.isValid&&(K.isValid=null===(D=K.containsNumericCharacter)||void 0===D||D),K.isValid&&(K.isValid=null===(x=K.containsNonAlphanumericCharacter)||void 0===x||x),K}validatePasswordLengthOptions(c,u){const f=this.customStrengthOptions.minPasswordLength,m=this.customStrengthOptions.maxPasswordLength;f&&(u.meetsMinPasswordLength=c.length>=f),m&&(u.meetsMaxPasswordLength=c.length<=m)}validatePasswordCharacterOptions(c,u){let f;this.updatePasswordCharacterOptionsStatuses(u,!1,!1,!1,!1);for(let m=0;m<c.length;m++)f=c.charAt(m),this.updatePasswordCharacterOptionsStatuses(u,f>="a"&&f<="z",f>="A"&&f<="Z",f>="0"&&f<="9",this.allowedNonAlphanumericCharacters.includes(f))}updatePasswordCharacterOptionsStatuses(c,u,f,m,y){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=u)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=f)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=m)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=y))}}class ny{constructor(c,u,f,m){this.app=c,this.heartbeatServiceProvider=u,this.appCheckServiceProvider=f,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xs(this),this.idTokenSubscription=new xs(this),this.beforeStateQueue=new BC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Oe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(c,u){var f=this;return u&&(this._popupRedirectResolver=Ze(u)),this._initializationPromise=this.queue((0,b.Z)(function*(){var m,y;if(!f._deleted&&(f.persistenceManager=yield ve.create(f,c),!f._deleted)){if(null!==(m=f._popupRedirectResolver)&&void 0!==m&&m._shouldInitProactively)try{yield f._popupRedirectResolver._initialize(f)}catch{}yield f.initializeCurrentUser(u),f.lastNotifiedUid=(null===(y=f.currentUser)||void 0===y?void 0:y.uid)||null,!f._deleted&&(f._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,b.Z)(function*(){if(c._deleted)return;const u=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||u){if(c.currentUser&&u&&c.currentUser.uid===u.uid)return c._currentUser._assign(u),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(u,!0)}})()}initializeCurrentUser(c){var u=this;return(0,b.Z)(function*(){var f;const m=yield u.assertedPersistence.getCurrentUser();let y=m,D=!1;if(c&&u.config.authDomain){yield u.getOrInitRedirectPersistenceManager();const x=null===(f=u.redirectUser)||void 0===f?void 0:f._redirectEventId,K=y?._redirectEventId,fe=yield u.tryRedirectSignIn(c);(!x||x===K)&&fe?.user&&(y=fe.user,D=!0)}if(!y)return u.directlySetCurrentUser(null);if(!y._redirectEventId){if(D)try{yield u.beforeStateQueue.runMiddleware(y)}catch(x){y=m,u._popupRedirectResolver._overrideRedirectResult(u,()=>Promise.reject(x))}return y?u.reloadAndSetCurrentUserOrClear(y):u.directlySetCurrentUser(null)}return Y(u._popupRedirectResolver,u,"argument-error"),yield u.getOrInitRedirectPersistenceManager(),u.redirectUser&&u.redirectUser._redirectEventId===y._redirectEventId?u.directlySetCurrentUser(y):u.reloadAndSetCurrentUserOrClear(y)})()}tryRedirectSignIn(c){var u=this;return(0,b.Z)(function*(){let f=null;try{f=yield u._popupRedirectResolver._completeRedirectFn(u,c,!0)}catch{yield u._setRedirectUser(null)}return f})()}reloadAndSetCurrentUserOrClear(c){var u=this;return(0,b.Z)(function*(){try{yield ai(c)}catch(f){if("auth/network-request-failed"!==f?.code)return u.directlySetCurrentUser(null)}return u.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function Nr(){if(typeof navigator>"u")return null;const h=navigator;return h.languages&&h.languages[0]||h.language||null}()}_delete(){var c=this;return(0,b.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var u=this;return(0,b.Z)(function*(){const f=c?(0,$.m9)(c):null;return f&&Y(f.auth.config.apiKey===u.config.apiKey,u,"invalid-user-token"),u._updateCurrentUser(f&&f._clone(u))})()}_updateCurrentUser(c,u=!1){var f=this;return(0,b.Z)(function*(){if(!f._deleted)return c&&Y(f.tenantId===c.tenantId,f,"tenant-id-mismatch"),u||(yield f.beforeStateQueue.runMiddleware(c)),f.queue((0,b.Z)(function*(){yield f.directlySetCurrentUser(c),f.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,b.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var u=this;return this.queue((0,b.Z)(function*(){yield u.assertedPersistence.setPersistence(Ze(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var u=this;return(0,b.Z)(function*(){u._getPasswordPolicyInternal()||(yield u._updatePasswordPolicy());const f=u._getPasswordPolicyInternal();return f.schemaVersion!==u.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(u._errorFactory.create("unsupported-password-policy-schema-version",{})):f.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,b.Z)(function*(){const u=yield function ty(h){return $a.apply(this,arguments)}(c),f=new UC(u);null===c.tenantId?c._projectPasswordPolicy=f:c._tenantPasswordPolicies[c.tenantId]=f})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new $.LL("auth","Firebase",c())}onAuthStateChanged(c,u,f){return this.registerStateListener(this.authStateSubscription,c,u,f)}beforeAuthStateChanged(c,u){return this.beforeStateQueue.pushCallback(c,u)}onIdTokenChanged(c,u,f){return this.registerStateListener(this.idTokenSubscription,c,u,f)}authStateReady(){return new Promise((c,u)=>{if(this.currentUser)c();else{const f=this.onAuthStateChanged(()=>{f(),c()},u)}})}revokeAccessToken(c){var u=this;return(0,b.Z)(function*(){if(u.currentUser){const f=yield u.currentUser.getIdToken(),m={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:f};null!=u.tenantId&&(m.tenantId=u.tenantId),yield function C(h,c){return S.apply(this,arguments)}(u,m)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,u){var f=this;return(0,b.Z)(function*(){const m=yield f.getOrInitRedirectPersistenceManager(u);return null===c?m.removeCurrentUser():m.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var u=this;return(0,b.Z)(function*(){if(!u.redirectPersistenceManager){const f=c&&Ze(c)||u._popupRedirectResolver;Y(f,u,"argument-error"),u.redirectPersistenceManager=yield ve.create(u,[Ze(f._redirectPersistence)],"redirectUser"),u.redirectUser=yield u.redirectPersistenceManager.getCurrentUser()}return u.redirectPersistenceManager})()}_redirectUserForId(c){var u=this;return(0,b.Z)(function*(){var f,m;return u._isInitialized&&(yield u.queue((0,b.Z)(function*(){}))),(null===(f=u._currentUser)||void 0===f?void 0:f._redirectEventId)===c?u._currentUser:(null===(m=u.redirectUser)||void 0===m?void 0:m._redirectEventId)===c?u.redirectUser:null})()}_persistUserIfCurrent(c){var u=this;return(0,b.Z)(function*(){if(c===u.currentUser)return u.queue((0,b.Z)(function*(){return u.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,u;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const f=null!==(u=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==u?u:null;this.lastNotifiedUid!==f&&(this.lastNotifiedUid=f,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,u,f,m){if(this._deleted)return()=>{};const y="function"==typeof u?u:u.next.bind(u);let D=!1;const x=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(x,this,"internal-error"),x.then(()=>{D||y(this.currentUser)}),"function"==typeof u){const K=c.addObserver(u,f,m);return()=>{D=!0,K()}}{const K=c.addObserver(u);return()=>{D=!0,K()}}}directlySetCurrentUser(c){var u=this;return(0,b.Z)(function*(){u.currentUser&&u.currentUser!==c&&u._currentUser._stopProactiveRefresh(),c&&u.isProactiveRefreshEnabled&&c._startProactiveRefresh(),u.currentUser=c,c?yield u.assertedPersistence.setCurrentUser(c):yield u.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=qo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,b.Z)(function*(){var u;const f={"X-Client-Version":c.clientVersion};c.app.options.appId&&(f["X-Firebase-gmpid"]=c.app.options.appId);const m=yield null===(u=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===u?void 0:u.getHeartbeatsHeader();m&&(f["X-Firebase-Client"]=m);const y=yield c._getAppCheckToken();return y&&(f["X-Firebase-AppCheck"]=y),f})()}_getAppCheckToken(){var c=this;return(0,b.Z)(function*(){var u;const f=yield null===(u=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===u?void 0:u.getToken();return f?.error&&function Nn(h,...c){Sn.logLevel<=et.in.WARN&&Sn.warn(`Auth (${Me.SDK_VERSION}): ${h}`,...c)}(`Error while retrieving App Check token: ${f.error}`),f?.token})()}}function en(h){return(0,$.m9)(h)}class xs{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,$.ne)(u=>this.observer=u)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Fp(h){return new Promise((c,u)=>{const f=document.createElement("script");f.setAttribute("src",h),f.onload=c,f.onerror=m=>{const y=It("internal-error");y.customData=m,u(y)},f.type="text/javascript",f.charset="UTF-8",function jC(){var h,c;return null!==(c=null===(h=document.getElementsByTagName("head"))||void 0===h?void 0:h[0])&&void 0!==c?c:document}().appendChild(f)})}function iy(h){return`__${h}${Math.floor(1e6*Math.random())}`}class Lp{constructor(c){this.type="recaptcha-enterprise",this.auth=en(c)}verify(c="verify",u=!1){var f=this;return(0,b.Z)(function*(){function y(){return y=(0,b.Z)(function*(x){if(!u){if(null==x.tenantId&&null!=x._agentRecaptchaConfig)return x._agentRecaptchaConfig.siteKey;if(null!=x.tenantId&&void 0!==x._tenantRecaptchaConfigs[x.tenantId])return x._tenantRecaptchaConfigs[x.tenantId].siteKey}return new Promise(function(){var K=(0,b.Z)(function*(fe,_e){se(x,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ye=>{if(void 0!==ye.recaptchaKey){const pn=new U(ye);return null==x.tenantId?x._agentRecaptchaConfig=pn:x._tenantRecaptchaConfigs[x.tenantId]=pn,fe(pn.siteKey)}_e(new Error("recaptcha Enterprise site key undefined"))}).catch(ye=>{_e(ye)})});return function(fe,_e){return K.apply(this,arguments)}}())}),y.apply(this,arguments)}function D(x,K,fe){const _e=window.grecaptcha;M(_e)?_e.enterprise.ready(()=>{_e.enterprise.execute(x,{action:c}).then(ye=>{K(ye)}).catch(()=>{K("NO_RECAPTCHA")})}):fe(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((x,K)=>{(function m(x){return y.apply(this,arguments)})(f.auth).then(fe=>{if(!u&&M(window.grecaptcha))D(fe,x,K);else{if(typeof window>"u")return void K(new Error("RecaptchaVerifier is only supported in browser"));Fp("https://www.google.com/recaptcha/enterprise.js?render="+fe).then(()=>{D(fe,x,K)}).catch(_e=>{K(_e)})}}).catch(fe=>{K(fe)})})})()}}function sy(h,c,u){return Si.apply(this,arguments)}function Si(){return(Si=(0,b.Z)(function*(h,c,u,f=!1){const m=new Lp(h);let y;try{y=yield m.verify(u)}catch{y=yield m.verify(u,!0)}const D=Object.assign({},c);return Object.assign(D,f?{captchaResp:y}:{captchaResponse:y}),Object.assign(D,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(D,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),D})).apply(this,arguments)}function Ne(h,c,u,f){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,b.Z)(function*(h,c,u,f){var m;if(null!==(m=h._getRecaptchaConfig())&&void 0!==m&&m.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const y=yield sy(h,c,u,"getOobCode"===u);return f(h,y)}return f(h,c).catch(function(){var y=(0,b.Z)(function*(D){if("auth/missing-recaptcha-token"===D.code){console.log(`${u} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const x=yield sy(h,c,u,"getOobCode"===u);return f(h,x)}return Promise.reject(D)});return function(D){return y.apply(this,arguments)}}())}),Vp.apply(this,arguments)}function Ga(h){const c=h.indexOf(":");return c<0?"":h.substr(0,c+1)}function Cd(h){if(!h)return null;const c=Number(h);return isNaN(c)?null:c}class is{constructor(c,u){this.providerId=c,this.signInMethod=u}toJSON(){return Ht("not implemented")}_getIdTokenResponse(c){return Ht("not implemented")}_linkToIdToken(c,u){return Ht("not implemented")}_getReauthenticationResolver(c){return Ht("not implemented")}}function Wa(h,c){return za.apply(this,arguments)}function za(){return(za=(0,b.Z)(function*(h,c){return H(h,"POST","/v1/accounts:resetPassword",X(h,c))})).apply(this,arguments)}function Td(){return(Td=(0,b.Z)(function*(h,c){return H(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function rt(h,c){return qa.apply(this,arguments)}function qa(){return(qa=(0,b.Z)(function*(h,c){return H(h,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function li(){return(li=(0,b.Z)(function*(h,c){return H(h,"POST","/v1/accounts:update",X(h,c))})).apply(this,arguments)}function Hp(h,c){return $p.apply(this,arguments)}function $p(){return($p=(0,b.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithPassword",X(h,c))})).apply(this,arguments)}function Nt(h,c){return Gp.apply(this,arguments)}function Gp(){return(Gp=(0,b.Z)(function*(h,c){return H(h,"POST","/v1/accounts:sendOobCode",X(h,c))})).apply(this,arguments)}function de(){return(de=(0,b.Z)(function*(h,c){return Nt(h,c)})).apply(this,arguments)}function Id(h,c){return Za.apply(this,arguments)}function Za(){return(Za=(0,b.Z)(function*(h,c){return Nt(h,c)})).apply(this,arguments)}function Wp(h,c){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,b.Z)(function*(h,c){return Nt(h,c)})).apply(this,arguments)}function Ya(){return(Ya=(0,b.Z)(function*(h,c){return Nt(h,c)})).apply(this,arguments)}function zp(){return(zp=(0,b.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithEmailLink",X(h,c))})).apply(this,arguments)}function qp(){return(qp=(0,b.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithEmailLink",X(h,c))})).apply(this,arguments)}class mc extends is{constructor(c,u,f,m=null){super("password",f),this._email=c,this._password=u,this._tenantId=m}static _fromEmailAndPassword(c,u){return new mc(c,u,"password")}static _fromEmailAndCode(c,u,f=null){return new mc(c,u,"emailLink",f)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const u="string"==typeof c?JSON.parse(c):c;if(u?.email&&u?.password){if("password"===u.signInMethod)return this._fromEmailAndPassword(u.email,u.password);if("emailLink"===u.signInMethod)return this._fromEmailAndCode(u.email,u.password,u.tenantId)}return null}_getIdTokenResponse(c){var u=this;return(0,b.Z)(function*(){switch(u.signInMethod){case"password":return Ne(c,{returnSecureToken:!0,email:u._email,password:u._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Hp);case"emailLink":return function qC(h,c){return zp.apply(this,arguments)}(c,{email:u._email,oobCode:u._password});default:qe(c,"internal-error")}})()}_linkToIdToken(c,u){var f=this;return(0,b.Z)(function*(){switch(f.signInMethod){case"password":return Ne(c,{idToken:u,returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rt);case"emailLink":return function ZC(h,c){return qp.apply(this,arguments)}(c,{idToken:u,email:f._email,oobCode:f._password});default:qe(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function Vi(h,c){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,b.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithIdp",X(h,c))})).apply(this,arguments)}class Rr extends is{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const u=new Rr(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(u.idToken=c.idToken),c.accessToken&&(u.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(u.nonce=c.nonce),c.pendingToken&&(u.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(u.accessToken=c.oauthToken,u.secret=c.oauthTokenSecret):qe("argument-error"),u}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const u="string"==typeof c?JSON.parse(c):c,{providerId:f,signInMethod:m}=u,y=(0,Wt._T)(u,["providerId","signInMethod"]);if(!f||!m)return null;const D=new Rr(f,m);return D.idToken=y.idToken||void 0,D.accessToken=y.accessToken||void 0,D.secret=y.secret,D.nonce=y.nonce,D.pendingToken=y.pendingToken||null,D}_getIdTokenResponse(c){return Vi(c,this.buildRequest())}_linkToIdToken(c,u){const f=this.buildRequest();return f.idToken=u,Vi(c,f)}_getReauthenticationResolver(c){const u=this.buildRequest();return u.autoCreate=!1,Vi(c,u)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const u={};this.idToken&&(u.id_token=this.idToken),this.accessToken&&(u.access_token=this.accessToken),this.secret&&(u.oauth_token_secret=this.secret),u.providerId=this.providerId,this.nonce&&!this.pendingToken&&(u.nonce=this.nonce),c.postBody=(0,$.xO)(u)}return c}}function Sd(){return(Sd=(0,b.Z)(function*(h,c){return H(h,"POST","/v1/accounts:sendVerificationCode",X(h,c))})).apply(this,arguments)}function Ps(){return(Ps=(0,b.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithPhoneNumber",X(h,c))})).apply(this,arguments)}function Mr(){return(Mr=(0,b.Z)(function*(h,c){const u=yield we(h,"POST","/v1/accounts:signInWithPhoneNumber",X(h,c));if(u.temporaryProof)throw un(h,"account-exists-with-different-credential",u);return u})).apply(this,arguments)}const dy={USER_NOT_FOUND:"user-not-found"};function vc(){return(vc=(0,b.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithPhoneNumber",X(h,Object.assign(Object.assign({},c),{operation:"REAUTH"})),dy)})).apply(this,arguments)}class oe extends is{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,u){return new oe({verificationId:c,verificationCode:u})}static _fromTokenResponse(c,u){return new oe({phoneNumber:c,temporaryProof:u})}_getIdTokenResponse(c){return function Zp(h,c){return Ps.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,u){return function uy(h,c){return Mr.apply(this,arguments)}(c,Object.assign({idToken:u},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function te(h,c){return vc.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:u,verificationId:f,verificationCode:m}=this.params;return c&&u?{temporaryProof:c,phoneNumber:u}:{sessionInfo:f,code:m}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:u,verificationCode:f,phoneNumber:m,temporaryProof:y}=c;return f||u||m||y?new oe({verificationId:u,verificationCode:f,phoneNumber:m,temporaryProof:y}):null}}class rs{constructor(c){var u,f,m,y,D,x;const K=(0,$.zd)((0,$.pd)(c)),fe=null!==(u=K.apiKey)&&void 0!==u?u:null,_e=null!==(f=K.oobCode)&&void 0!==f?f:null,ye=function yc(h){switch(h){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(m=K.mode)&&void 0!==m?m:null);Y(fe&&_e&&ye,"argument-error"),this.apiKey=fe,this.operation=ye,this.code=_e,this.continueUrl=null!==(y=K.continueUrl)&&void 0!==y?y:null,this.languageCode=null!==(D=K.languageCode)&&void 0!==D?D:null,this.tenantId=null!==(x=K.tenantId)&&void 0!==x?x:null}static parseLink(c){const u=function Nd(h){const c=(0,$.zd)((0,$.pd)(h)).link,u=c?(0,$.zd)((0,$.pd)(c)).deep_link_id:null,f=(0,$.zd)((0,$.pd)(h)).deep_link_id;return(f?(0,$.zd)((0,$.pd)(f)).link:null)||f||u||c||h}(c);try{return new rs(u)}catch{return null}}}let Ad=(()=>{class h{constructor(){this.providerId=h.PROVIDER_ID}static credential(u,f){return mc._fromEmailAndPassword(u,f)}static credentialWithLink(u,f){const m=rs.parseLink(f);return Y(m,"argument-error"),mc._fromEmailAndCode(u,m.code,m.tenantId)}}return h.PROVIDER_ID="password",h.EMAIL_PASSWORD_SIGN_IN_METHOD="password",h.EMAIL_LINK_SIGN_IN_METHOD="emailLink",h})();class ss{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Ni extends ss{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class os extends Ni{static credentialFromJSON(c){const u="string"==typeof c?JSON.parse(c):c;return Y("providerId"in u&&"signInMethod"in u,"argument-error"),Rr._fromParams(u)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return Y(c.idToken||c.accessToken,"argument-error"),Rr._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return os.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return os.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:u,oauthAccessToken:f,oauthTokenSecret:m,pendingToken:y,nonce:D,providerId:x}=c;if(!f&&!m&&!u&&!y||!x)return null;try{return new os(x)._credential({idToken:u,accessToken:f,nonce:D,pendingToken:y})}catch{return null}}}let tr=(()=>{class h extends Ni{constructor(){super("facebook.com")}static credential(u){return Rr._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.FACEBOOK_SIGN_IN_METHOD,accessToken:u})}static credentialFromResult(u){return h.credentialFromTaggedObject(u)}static credentialFromError(u){return h.credentialFromTaggedObject(u.customData||{})}static credentialFromTaggedObject({_tokenResponse:u}){if(!u||!("oauthAccessToken"in u)||!u.oauthAccessToken)return null;try{return h.credential(u.oauthAccessToken)}catch{return null}}}return h.FACEBOOK_SIGN_IN_METHOD="facebook.com",h.PROVIDER_ID="facebook.com",h})(),gr=(()=>{class h extends Ni{constructor(){super("google.com"),this.addScope("profile")}static credential(u,f){return Rr._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GOOGLE_SIGN_IN_METHOD,idToken:u,accessToken:f})}static credentialFromResult(u){return h.credentialFromTaggedObject(u)}static credentialFromError(u){return h.credentialFromTaggedObject(u.customData||{})}static credentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:f,oauthAccessToken:m}=u;if(!f&&!m)return null;try{return h.credential(f,m)}catch{return null}}}return h.GOOGLE_SIGN_IN_METHOD="google.com",h.PROVIDER_ID="google.com",h})(),_t=(()=>{class h extends Ni{constructor(){super("github.com")}static credential(u){return Rr._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GITHUB_SIGN_IN_METHOD,accessToken:u})}static credentialFromResult(u){return h.credentialFromTaggedObject(u)}static credentialFromError(u){return h.credentialFromTaggedObject(u.customData||{})}static credentialFromTaggedObject({_tokenResponse:u}){if(!u||!("oauthAccessToken"in u)||!u.oauthAccessToken)return null;try{return h.credential(u.oauthAccessToken)}catch{return null}}}return h.GITHUB_SIGN_IN_METHOD="github.com",h.PROVIDER_ID="github.com",h})();class ks extends is{constructor(c,u){super(c,c),this.pendingToken=u}_getIdTokenResponse(c){return Vi(c,this.buildRequest())}_linkToIdToken(c,u){const f=this.buildRequest();return f.idToken=u,Vi(c,f)}_getReauthenticationResolver(c){const u=this.buildRequest();return u.autoCreate=!1,Vi(c,u)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const u="string"==typeof c?JSON.parse(c):c,{providerId:f,signInMethod:m,pendingToken:y}=u;return f&&m&&y&&f===m?new ks(f,y):null}static _create(c,u){return new ks(c,u)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ja extends ss{constructor(c){Y(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Ja.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Ja.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const u=ks.fromJSON(c);return Y(u,"argument-error"),u}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:u,providerId:f}=c;if(!u||!f)return null;try{return ks._create(f,u)}catch{return null}}}let Or=(()=>{class h extends Ni{constructor(){super("twitter.com")}static credential(u,f){return Rr._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.TWITTER_SIGN_IN_METHOD,oauthToken:u,oauthTokenSecret:f})}static credentialFromResult(u){return h.credentialFromTaggedObject(u)}static credentialFromError(u){return h.credentialFromTaggedObject(u.customData||{})}static credentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthAccessToken:f,oauthTokenSecret:m}=u;if(!f||!m)return null;try{return h.credential(f,m)}catch{return null}}}return h.TWITTER_SIGN_IN_METHOD="twitter.com",h.PROVIDER_ID="twitter.com",h})();function Zo(h,c){return wc.apply(this,arguments)}function wc(){return(wc=(0,b.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signUp",X(h,c))})).apply(this,arguments)}class Bi{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,u,f,m=!1){return(0,b.Z)(function*(){const y=yield W._fromIdTokenResponse(c,f,m),D=Ec(f);return new Bi({user:y,providerId:D,_tokenResponse:f,operationType:u})})()}static _forOperation(c,u,f){return(0,b.Z)(function*(){yield c._updateTokensIfNecessary(f,!0);const m=Ec(f);return new Bi({user:c,providerId:m,_tokenResponse:f,operationType:u})})()}}function Ec(h){return h.providerId?h.providerId:"phoneNumber"in h?"phone":null}function Dc(){return(Dc=(0,b.Z)(function*(h){var c;const u=en(h);if(yield u._initializationPromise,null!==(c=u.currentUser)&&void 0!==c&&c.isAnonymous)return new Bi({user:u.currentUser,providerId:null,operationType:"signIn"});const f=yield Zo(u,{returnSecureToken:!0}),m=yield Bi._fromIdTokenResponse(u,"signIn",f,!0);return yield u._updateCurrentUser(m.user),m})).apply(this,arguments)}class Fs extends $.ZR{constructor(c,u,f,m){var y;super(u.code,u.message),this.operationType=f,this.user=m,Object.setPrototypeOf(this,Fs.prototype),this.customData={appName:c.name,tenantId:null!==(y=c.tenantId)&&void 0!==y?y:void 0,_serverResponse:u.customData._serverResponse,operationType:f}}static _fromErrorAndOperation(c,u,f,m){return new Fs(c,u,f,m)}}function Md(h,c,u,f){return("reauthenticate"===c?u._getReauthenticationResolver(h):u._getIdTokenResponse(h)).catch(y=>{throw"auth/multi-factor-auth-required"===y.code?Fs._fromErrorAndOperation(h,y,c,f):y})}function Od(h){return new Set(h.map(({providerId:c})=>c).filter(c=>!!c))}function Cc(){return Cc=(0,b.Z)(function*(h,c){const u=(0,$.m9)(h);yield Ai(!0,u,c);const{providerUserInfo:f}=yield function dn(h,c){return hn.apply(this,arguments)}(u.auth,{idToken:yield u.getIdToken(),deleteProvider:[c]}),m=Od(f||[]);return u.providerData=u.providerData.filter(y=>m.has(y.providerId)),m.has("phone")||(u.phoneNumber=null),yield u.auth._persistUserIfCurrent(u),u}),Cc.apply(this,arguments)}function xd(h,c){return Pd.apply(this,arguments)}function Pd(){return(Pd=(0,b.Z)(function*(h,c,u=!1){const f=yield oi(h,c._linkToIdToken(h.auth,yield h.getIdToken()),u);return Bi._forOperation(h,"link",f)})).apply(this,arguments)}function Ai(h,c,u){return kd.apply(this,arguments)}function kd(){return(kd=(0,b.Z)(function*(h,c,u){yield ai(c);const m=!1===h?"provider-already-linked":"no-such-provider";Y(Od(c.providerData).has(u)===h,c.auth,m)})).apply(this,arguments)}function Fd(h,c){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,b.Z)(function*(h,c,u=!1){const{auth:f}=h,m="reauthenticate";try{const y=yield oi(h,Md(f,m,c,h),u);Y(y.idToken,f,"internal-error");const D=Rs(y.idToken);Y(D,f,"internal-error");const{sub:x}=D;return Y(h.uid===x,f,"user-mismatch"),Bi._forOperation(h,m,y)}catch(y){throw"auth/user-not-found"===y?.code&&qe(f,"user-mismatch"),y}})).apply(this,arguments)}function Yp(h,c){return Vd.apply(this,arguments)}function Vd(){return(Vd=(0,b.Z)(function*(h,c,u=!1){const f="signIn",m=yield Md(h,f,c),y=yield Bi._fromIdTokenResponse(h,f,m);return u||(yield h._updateCurrentUser(y.user)),y})).apply(this,arguments)}function Tc(h,c){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,b.Z)(function*(h,c){return Yp(en(h),c)})).apply(this,arguments)}function Qp(h,c){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,b.Z)(function*(h,c){const u=(0,$.m9)(h);return yield Ai(!1,u,c.providerId),xd(u,c)})).apply(this,arguments)}function Jp(h,c){return qn.apply(this,arguments)}function qn(){return(qn=(0,b.Z)(function*(h,c){return Fd((0,$.m9)(h),c)})).apply(this,arguments)}function Ud(){return(Ud=(0,b.Z)(function*(h,c){return we(h,"POST","/v1/accounts:signInWithCustomToken",X(h,c))})).apply(this,arguments)}function bt(){return bt=(0,b.Z)(function*(h,c){const u=en(h),f=yield function fy(h,c){return Ud.apply(this,arguments)}(u,{token:c,returnSecureToken:!0}),m=yield Bi._fromIdTokenResponse(u,"signIn",f);return yield u._updateCurrentUser(m.user),m}),bt.apply(this,arguments)}class Xa{constructor(c,u){this.factorId=c,this.uid=u.mfaEnrollmentId,this.enrollmentTime=new Date(u.enrolledAt).toUTCString(),this.displayName=u.displayName}static _fromServerResponse(c,u){return"phoneInfo"in u?Sc._fromServerResponse(c,u):"totpInfo"in u?ae._fromServerResponse(c,u):qe(c,"internal-error")}}class Sc extends Xa{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,u){return new Sc(u)}}class ae extends Xa{constructor(c){super("totp",c)}static _fromServerResponse(c,u){return new ae(u)}}function Zn(h,c,u){var f;Y((null===(f=u.url)||void 0===f?void 0:f.length)>0,h,"invalid-continue-uri"),Y(typeof u.dynamicLinkDomain>"u"||u.dynamicLinkDomain.length>0,h,"invalid-dynamic-link-domain"),c.continueUrl=u.url,c.dynamicLinkDomain=u.dynamicLinkDomain,c.canHandleCodeInApp=u.handleCodeInApp,u.iOS&&(Y(u.iOS.bundleId.length>0,h,"missing-ios-bundle-id"),c.iOSBundleId=u.iOS.bundleId),u.android&&(Y(u.android.packageName.length>0,h,"missing-android-pkg-name"),c.androidInstallApp=u.android.installApp,c.androidMinimumVersionCode=u.android.minimumVersion,c.androidPackageName=u.android.packageName)}function ct(h){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,b.Z)(function*(h){const c=en(h);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function Ls(){return(Ls=(0,b.Z)(function*(h,c,u){const f=en(h),m={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};u&&Zn(f,m,u),yield Ne(f,m,"getOobCode",Id)})).apply(this,arguments)}function Nc(){return Nc=(0,b.Z)(function*(h,c,u){yield Wa((0,$.m9)(h),{oobCode:c,newPassword:u}).catch(function(){var f=(0,b.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&ct(h),m});return function(m){return f.apply(this,arguments)}}())}),Nc.apply(this,arguments)}function Ko(){return Ko=(0,b.Z)(function*(h,c){yield function jp(h,c){return li.apply(this,arguments)}((0,$.m9)(h),{oobCode:c})}),Ko.apply(this,arguments)}function eg(h,c){return jd.apply(this,arguments)}function jd(){return(jd=(0,b.Z)(function*(h,c){const u=(0,$.m9)(h),f=yield Wa(u,{oobCode:c}),m=f.requestType;switch(Y(m,u,"internal-error"),m){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Y(f.newEmail,u,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Y(f.mfaInfo,u,"internal-error");default:Y(f.email,u,"internal-error")}let y=null;return f.mfaInfo&&(y=Xa._fromServerResponse(en(u),f.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===f.requestType?f.newEmail:f.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===f.requestType?f.email:f.newEmail)||null,multiFactorInfo:y},operation:m}})).apply(this,arguments)}function pe(){return(pe=(0,b.Z)(function*(h,c){const{data:u}=yield eg((0,$.m9)(h),c);return u.email})).apply(this,arguments)}function Gt(){return(Gt=(0,b.Z)(function*(h,c,u){const f=en(h),D=yield Ne(f,{returnSecureToken:!0,email:c,password:u,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Zo).catch(K=>{throw"auth/password-does-not-meet-requirements"===K.code&&ct(h),K}),x=yield Bi._fromIdTokenResponse(f,"signIn",D);return yield f._updateCurrentUser(x.user),x})).apply(this,arguments)}function Hn(){return(Hn=(0,b.Z)(function*(h,c,u){const f=en(h),m={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function y(D,x){Y(x.handleCodeInApp,f,"argument-error"),x&&Zn(f,D,x)})(m,u),yield Ne(f,m,"getOobCode",Wp)})).apply(this,arguments)}function xr(){return(xr=(0,b.Z)(function*(h,c,u){const f=(0,$.m9)(h),m=Ad.credentialWithLink(c,u||ln());return Y(m._tenantId===(f.tenantId||null),f,"tenant-id-mismatch"),Tc(f,m)})).apply(this,arguments)}function Pe(){return(Pe=(0,b.Z)(function*(h,c){return H(h,"POST","/v1/accounts:createAuthUri",X(h,c))})).apply(this,arguments)}function Ac(){return Ac=(0,b.Z)(function*(h,c){const f={identifier:c,continueUri:Ji()?ln():"http://localhost"},{signinMethods:m}=yield function Qo(h,c){return Pe.apply(this,arguments)}((0,$.m9)(h),f);return m||[]}),Ac.apply(this,arguments)}function cn(){return cn=(0,b.Z)(function*(h,c){const u=(0,$.m9)(h),m={requestType:"VERIFY_EMAIL",idToken:yield h.getIdToken()};c&&Zn(u.auth,m,c);const{email:y}=yield function zC(h,c){return de.apply(this,arguments)}(u.auth,m);y!==h.email&&(yield h.reload())}),cn.apply(this,arguments)}function Vs(){return Vs=(0,b.Z)(function*(h,c,u){const f=(0,$.m9)(h),y={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield h.getIdToken(),newEmail:c};u&&Zn(f.auth,y,u);const{email:D}=yield function ly(h,c){return Ya.apply(this,arguments)}(f.auth,y);D!==h.email&&(yield h.reload())}),Vs.apply(this,arguments)}function mo(){return(mo=(0,b.Z)(function*(h,c){return H(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function kr(){return kr=(0,b.Z)(function*(h,{displayName:c,photoURL:u}){if(void 0===c&&void 0===u)return;const f=(0,$.m9)(h),y={idToken:yield f.getIdToken(),displayName:c,photoUrl:u,returnSecureToken:!0},D=yield oi(f,function Pr(h,c){return mo.apply(this,arguments)}(f.auth,y));f.displayName=D.displayName||null,f.photoURL=D.photoUrl||null;const x=f.providerData.find(({providerId:K})=>"password"===K);x&&(x.displayName=f.displayName,x.photoURL=f.photoURL),yield f._updateTokensIfNecessary(D)}),kr.apply(this,arguments)}function Xo(h,c,u){return Xe.apply(this,arguments)}function Xe(){return Xe=(0,b.Z)(function*(h,c,u){const{auth:f}=h,y={idToken:yield h.getIdToken(),returnSecureToken:!0};c&&(y.email=c),u&&(y.password=u);const D=yield oi(h,function Up(h,c){return Td.apply(this,arguments)}(f,y));yield h._updateTokensIfNecessary(D,!0)}),Xe.apply(this,arguments)}class Bs{constructor(c,u,f={}){this.isNewUser=c,this.providerId=u,this.profile=f}}class Hd extends Bs{constructor(c,u,f,m){super(c,u,f),this.username=m}}class Fr extends Bs{constructor(c,u){super(c,"facebook.com",u)}}class Rc extends Hd{constructor(c,u){super(c,"github.com",u,"string"==typeof u?.login?u?.login:null)}}class ea extends Bs{constructor(c,u){super(c,"google.com",u)}}class rl extends Hd{constructor(c,u,f){super(c,"twitter.com",u,f)}}function Kn(h){const{user:c,_tokenResponse:u}=h;return c.isAnonymous&&!u?{providerId:null,isNewUser:!1,profile:null}:function YC(h){var c,u;if(!h)return null;const{providerId:f}=h,m=h.rawUserInfo?JSON.parse(h.rawUserInfo):{},y=h.isNewUser||"identitytoolkit#SignupNewUserResponse"===h.kind;if(!f&&h?.idToken){const D=null===(u=null===(c=Rs(h.idToken))||void 0===c?void 0:c.firebase)||void 0===u?void 0:u.sign_in_provider;if(D)return new Bs(y,"anonymous"!==D&&"custom"!==D?D:null)}if(!f)return null;switch(f){case"facebook.com":return new Fr(y,m);case"github.com":return new Rc(y,m);case"google.com":return new ea(y,m);case"twitter.com":return new rl(y,m,h.screenName||null);case"custom":case"anonymous":return new Bs(y,null);default:return new Bs(y,f,m)}}(u)}class ta{constructor(c,u,f){this.type=c,this.credential=u,this.user=f}static _fromIdtoken(c,u){return new ta("enroll",c,u)}static _fromMfaPendingCredential(c){return new ta("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var u,f;if(c?.multiFactorSession){if(null!==(u=c.multiFactorSession)&&void 0!==u&&u.pendingCredential)return ta._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(f=c.multiFactorSession)&&void 0!==f&&f.idToken)return ta._fromIdtoken(c.multiFactorSession.idToken)}return null}}class ig{constructor(c,u,f){this.session=c,this.hints=u,this.signInResolver=f}static _fromError(c,u){const f=en(c),m=u.customData._serverResponse,y=(m.mfaInfo||[]).map(x=>Xa._fromServerResponse(f,x));Y(m.mfaPendingCredential,f,"internal-error");const D=ta._fromMfaPendingCredential(m.mfaPendingCredential);return new ig(D,y,function(){var x=(0,b.Z)(function*(K){const fe=yield K._process(f,D);delete m.mfaInfo,delete m.mfaPendingCredential;const _e=Object.assign(Object.assign({},m),{idToken:fe.idToken,refreshToken:fe.refreshToken});switch(u.operationType){case"signIn":const ye=yield Bi._fromIdTokenResponse(f,u.operationType,_e);return yield f._updateCurrentUser(ye.user),ye;case"reauthenticate":return Y(u.user,f,"internal-error"),Bi._forOperation(u.user,u.operationType,_e);default:qe(f,"internal-error")}});return function(K){return x.apply(this,arguments)}}())}resolveSignIn(c){var u=this;return(0,b.Z)(function*(){return u.signInResolver(c)})()}}class rg{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(u=>{u.mfaInfo&&(this.enrolledFactors=u.mfaInfo.map(f=>Xa._fromServerResponse(c.auth,f)))})}static _fromUser(c){return new rg(c)}getSession(){var c=this;return(0,b.Z)(function*(){return ta._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,u){var f=this;return(0,b.Z)(function*(){const m=c,y=yield f.getSession(),D=yield oi(f.user,m._process(f.user.auth,y,u));return yield f.user._updateTokensIfNecessary(D),f.user.reload()})()}unenroll(c){var u=this;return(0,b.Z)(function*(){const f="string"==typeof c?c:c.uid,m=yield u.user.getIdToken();try{const y=yield oi(u.user,function rT(h,c){return H(h,"POST","/v2/accounts/mfaEnrollment:withdraw",X(h,c))}(u.user.auth,{idToken:m,mfaEnrollmentId:f}));u.enrolledFactors=u.enrolledFactors.filter(({uid:D})=>D!==f),yield u.user._updateTokensIfNecessary(y),yield u.user.reload()}catch(y){throw y}})()}}const sg=new WeakMap,Gd="__sak";class Wd{constructor(c,u){this.storageRetriever=c,this.type=u}_isAvailable(){try{return this.storage?(this.storage.setItem(Gd,"1"),this.storage.removeItem(Gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,u){return this.storage.setItem(c,JSON.stringify(u)),Promise.resolve()}_get(c){const u=this.storage.getItem(c);return Promise.resolve(u?JSON.parse(u):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Vr=(()=>{class h extends Wd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(u,f)=>this.onStorageEvent(u,f),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function og(){const h=(0,$.z$)();return Ar(h)||Be(h)}()&&function it(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=be(),this._shouldAllowMigration=!0}forAllChangedKeys(u){for(const f of Object.keys(this.listeners)){const m=this.storage.getItem(f),y=this.localCache[f];m!==y&&u(f,y,m)}}onStorageEvent(u,f=!1){if(!u.key)return void this.forAllChangedKeys((x,K,fe)=>{this.notifyListeners(x,fe)});const m=u.key;if(f?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const x=this.storage.getItem(m);if(u.newValue!==x)null!==u.newValue?this.storage.setItem(m,u.newValue):this.storage.removeItem(m);else if(this.localCache[m]===u.newValue&&!f)return}const y=()=>{const x=this.storage.getItem(m);!f&&this.localCache[m]===x||this.notifyListeners(m,x)},D=this.storage.getItem(m);!function Mn(){return(0,$.w1)()&&10===document.documentMode}()||D===u.newValue||u.newValue===u.oldValue?y():setTimeout(y,10)}notifyListeners(u,f){this.localCache[u]=f;const m=this.listeners[u];if(m)for(const y of Array.from(m))y(f&&JSON.parse(f))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((u,f,m)=>{this.onStorageEvent(new StorageEvent("storage",{key:u,oldValue:f,newValue:m}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(u,f){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[u]||(this.listeners[u]=new Set,this.localCache[u]=this.storage.getItem(u)),this.listeners[u].add(f)}_removeListener(u,f){this.listeners[u]&&(this.listeners[u].delete(f),0===this.listeners[u].size&&delete this.listeners[u]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(u,f){var m=()=>super._set,y=this;return(0,b.Z)(function*(){yield m().call(y,u,f),y.localCache[u]=JSON.stringify(f)})()}_get(u){var f=()=>super._get,m=this;return(0,b.Z)(function*(){const y=yield f().call(m,u);return m.localCache[u]=JSON.stringify(y),y})()}_remove(u){var f=()=>super._remove,m=this;return(0,b.Z)(function*(){yield f().call(m,u),delete m.localCache[u]})()}}return h.type="LOCAL",h})(),yo=(()=>{class h extends Wd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(u,f){}_removeListener(u,f){}}return h.type="SESSION",h})();let Yn=(()=>{class h{constructor(u){this.eventTarget=u,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(u){const f=this.receivers.find(y=>y.isListeningto(u));if(f)return f;const m=new h(u);return this.receivers.push(m),m}isListeningto(u){return this.eventTarget===u}handleEvent(u){var f=this;return(0,b.Z)(function*(){const m=u,{eventId:y,eventType:D,data:x}=m.data,K=f.handlersMap[D];if(!K?.size)return;m.ports[0].postMessage({status:"ack",eventId:y,eventType:D});const fe=Array.from(K).map(function(){var ye=(0,b.Z)(function*(pn){return pn(m.origin,x)});return function(pn){return ye.apply(this,arguments)}}()),_e=yield function lT(h){return Promise.all(h.map(function(){var c=(0,b.Z)(function*(u){try{return{fulfilled:!0,value:yield u}}catch(f){return{fulfilled:!1,reason:f}}});return function(u){return c.apply(this,arguments)}}()))}(fe);m.ports[0].postMessage({status:"done",eventId:y,eventType:D,response:_e})})()}_subscribe(u,f){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[u]||(this.handlersMap[u]=new Set),this.handlersMap[u].add(f)}_unsubscribe(u,f){this.handlersMap[u]&&f&&this.handlersMap[u].delete(f),(!f||0===this.handlersMap[u].size)&&delete this.handlersMap[u],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return h.receivers=[],h})();function Us(h="",c=10){let u="";for(let f=0;f<c;f++)u+=Math.floor(10*Math.random());return h+u}class nr{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,u,f=50){var m=this;return(0,b.Z)(function*(){const y=typeof MessageChannel<"u"?new MessageChannel:null;if(!y)throw new Error("connection_unavailable");let D,x;return new Promise((K,fe)=>{const _e=Us("",20);y.port1.start();const ye=setTimeout(()=>{fe(new Error("unsupported_event"))},f);x={messageChannel:y,onMessage(pn){const _r=pn;if(_r.data.eventId===_e)switch(_r.data.status){case"ack":clearTimeout(ye),D=setTimeout(()=>{fe(new Error("timeout"))},3e3);break;case"done":clearTimeout(D),K(_r.data.response);break;default:clearTimeout(ye),clearTimeout(D),fe(new Error("invalid_response"))}}},m.handlers.add(x),y.port1.addEventListener("message",x.onMessage),m.target.postMessage({eventType:c,eventId:_e,data:u},[y.port2])}).finally(()=>{x&&m.removeMessageHandler(x)})})()}}function yn(){return window}function Oc(){return typeof yn().WorkerGlobalScope<"u"&&"function"==typeof yn().importScripts}function ol(){return(ol=(0,b.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const xc="firebaseLocalStorageDb",al="firebaseLocalStorage",qd="fbase_key";class js{constructor(c){this.request=c}toPromise(){return new Promise((c,u)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{u(this.request.error)})})}}function Hs(h,c){return h.transaction([al],c?"readwrite":"readonly").objectStore(al)}function Pc(){const h=indexedDB.open(xc,1);return new Promise((c,u)=>{h.addEventListener("error",()=>{u(h.error)}),h.addEventListener("upgradeneeded",()=>{const f=h.result;try{f.createObjectStore(al,{keyPath:qd})}catch(m){u(m)}}),h.addEventListener("success",(0,b.Z)(function*(){const f=h.result;f.objectStoreNames.contains(al)?c(f):(f.close(),yield function na(){const h=indexedDB.deleteDatabase(xc);return new js(h).toPromise()}(),c(yield Pc()))}))})}function gy(h,c,u){return dg.apply(this,arguments)}function dg(){return(dg=(0,b.Z)(function*(h,c,u){const f=Hs(h,!0).put({[qd]:c,value:u});return new js(f).toPromise()})).apply(this,arguments)}function Zd(){return(Zd=(0,b.Z)(function*(h,c){const u=Hs(h,!1).get(c),f=yield new js(u).toPromise();return void 0===f?null:f.value})).apply(this,arguments)}function hg(h,c){const u=Hs(h,!0).delete(c);return new js(u).toPromise()}const ia=(()=>{class h{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var u=this;return(0,b.Z)(function*(){return u.db||(u.db=yield Pc()),u.db})()}_withRetries(u){var f=this;return(0,b.Z)(function*(){let m=0;for(;;)try{const y=yield f._openDb();return yield u(y)}catch(y){if(m++>3)throw y;f.db&&(f.db.close(),f.db=void 0)}})()}initializeServiceWorkerMessaging(){var u=this;return(0,b.Z)(function*(){return Oc()?u.initializeReceiver():u.initializeSender()})()}initializeReceiver(){var u=this;return(0,b.Z)(function*(){u.receiver=Yn._getInstance(function zd(){return Oc()?self:null}()),u.receiver._subscribe("keyChanged",function(){var f=(0,b.Z)(function*(m,y){return{keyProcessed:(yield u._poll()).includes(y.key)}});return function(m,y){return f.apply(this,arguments)}}()),u.receiver._subscribe("ping",function(){var f=(0,b.Z)(function*(m,y){return["keyChanged"]});return function(m,y){return f.apply(this,arguments)}}())})()}initializeSender(){var u=this;return(0,b.Z)(function*(){var f,m;if(u.activeServiceWorker=yield function lg(){return ol.apply(this,arguments)}(),!u.activeServiceWorker)return;u.sender=new nr(u.activeServiceWorker);const y=yield u.sender._send("ping",{},800);y&&null!==(f=y[0])&&void 0!==f&&f.fulfilled&&null!==(m=y[0])&&void 0!==m&&m.value.includes("keyChanged")&&(u.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(u){var f=this;return(0,b.Z)(function*(){if(f.sender&&f.activeServiceWorker&&function cg(){var h;return(null===(h=navigator?.serviceWorker)||void 0===h?void 0:h.controller)||null}()===f.activeServiceWorker)try{yield f.sender._send("keyChanged",{key:u},f.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,b.Z)(function*(){try{if(!indexedDB)return!1;const u=yield Pc();return yield gy(u,Gd,"1"),yield hg(u,Gd),!0}catch{}return!1})()}_withPendingWrite(u){var f=this;return(0,b.Z)(function*(){f.pendingWrites++;try{yield u()}finally{f.pendingWrites--}})()}_set(u,f){var m=this;return(0,b.Z)(function*(){return m._withPendingWrite((0,b.Z)(function*(){return yield m._withRetries(y=>gy(y,u,f)),m.localCache[u]=f,m.notifyServiceWorker(u)}))})()}_get(u){var f=this;return(0,b.Z)(function*(){const m=yield f._withRetries(y=>function cT(h,c){return Zd.apply(this,arguments)}(y,u));return f.localCache[u]=m,m})()}_remove(u){var f=this;return(0,b.Z)(function*(){return f._withPendingWrite((0,b.Z)(function*(){return yield f._withRetries(m=>hg(m,u)),delete f.localCache[u],f.notifyServiceWorker(u)}))})()}_poll(){var u=this;return(0,b.Z)(function*(){const f=yield u._withRetries(D=>{const x=Hs(D,!1).getAll();return new js(x).toPromise()});if(!f)return[];if(0!==u.pendingWrites)return[];const m=[],y=new Set;for(const{fbase_key:D,value:x}of f)y.add(D),JSON.stringify(u.localCache[D])!==JSON.stringify(x)&&(u.notifyListeners(D,x),m.push(D));for(const D of Object.keys(u.localCache))u.localCache[D]&&!y.has(D)&&(u.notifyListeners(D,null),m.push(D));return m})()}notifyListeners(u,f){this.localCache[u]=f;const m=this.listeners[u];if(m)for(const y of Array.from(m))y(f)}startPolling(){var u=this;this.stopPolling(),this.pollTimer=setInterval((0,b.Z)(function*(){return u._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(u,f){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[u]||(this.listeners[u]=new Set,this._get(u)),this.listeners[u].add(f)}_removeListener(u,f){this.listeners[u]&&(this.listeners[u].delete(f),0===this.listeners[u].size&&delete this.listeners[u]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return h.type="LOCAL",h})(),ll=1e12;class _y{constructor(c){this.auth=c,this.counter=ll,this._widgets=new Map}render(c,u){const f=this.counter;return this._widgets.set(f,new vy(c,this.auth.name,u||{})),this.counter++,f}reset(c){var u;const f=c||ll;null===(u=this._widgets.get(f))||void 0===u||u.delete(),this._widgets.delete(f)}getResponse(c){var u;return(null===(u=this._widgets.get(c||ll))||void 0===u?void 0:u.getResponse())||""}execute(c){var u=this;return(0,b.Z)(function*(){var f;return null===(f=u._widgets.get(c||ll))||void 0===f||f.execute(),""})()}}class vy{constructor(c,u,f){this.params=f,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const m="string"==typeof c?document.getElementById(c):c;Y(m,"argument-error",{appName:u}),this.container=m,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function yy(h){const c=[],u="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<h;f++)c.push(u.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":u}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,u)try{u()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const kc=iy("rcb"),by=new er(3e4,6e4);class wy{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=yn().grecaptcha)||void 0===c||!c.render)}load(c,u=""){return Y(function fT(h){return h.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(h)}(u),c,"argument-error"),this.shouldResolveImmediately(u)&&P(yn().grecaptcha)?Promise.resolve(yn().grecaptcha):new Promise((f,m)=>{const y=yn().setTimeout(()=>{m(It(c,"network-request-failed"))},by.get());yn()[kc]=()=>{yn().clearTimeout(y),delete yn()[kc];const x=yn().grecaptcha;if(!x||!P(x))return void m(It(c,"internal-error"));const K=x.render;x.render=(fe,_e)=>{const ye=K(fe,_e);return this.counter++,ye},this.hostLanguage=u,f(x)},Fp(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:kc,render:"explicit",hl:u})}`).catch(()=>{clearTimeout(y),m(It(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var u;return!(null===(u=yn().grecaptcha)||void 0===u||!u.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ey{load(c){return(0,b.Z)(function*(){return new _y(c)})()}clearedOneInstance(){}}const $n="recaptcha",_g={theme:"light",type:"image"};class Dy{constructor(c,u,f=Object.assign({},_g)){this.parameters=f,this.type=$n,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=en(c),this.isInvisible="invisible"===this.parameters.size,Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const m="string"==typeof u?document.getElementById(u):u;Y(m,this.auth,"argument-error"),this.container=m,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ey:new wy,this.validateStartingState()}verify(){var c=this;return(0,b.Z)(function*(){c.assertNotDestroyed();const u=yield c.render(),f=c.getAssertedRecaptcha();return f.getResponse(u)||new Promise(y=>{const D=x=>{x&&(c.tokenChangeListeners.delete(D),y(x))};c.tokenChangeListeners.add(D),c.isInvisible&&f.execute(u)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){Y(!this.parameters.sitekey,this.auth,"argument-error"),Y(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return u=>{if(this.tokenChangeListeners.forEach(f=>f(u)),"function"==typeof c)c(u);else if("string"==typeof c){const f=yn()[c];"function"==typeof f&&f(u)}}}assertNotDestroyed(){Y(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,b.Z)(function*(){if(yield c.init(),!c.widgetId){let u=c.container;if(!c.isInvisible){const f=document.createElement("div");u.appendChild(f),u=f}c.widgetId=c.getAssertedRecaptcha().render(u,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,b.Z)(function*(){Y(Ji()&&!Oc(),c.auth,"internal-error"),yield function Cy(){let h=null;return new Promise(c=>{"complete"!==document.readyState?(h=()=>c(),window.addEventListener("load",h)):c()}).catch(c=>{throw h&&window.removeEventListener("load",h),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const u=yield function ee(h){return le.apply(this,arguments)}(c.auth);Y(u,c.auth,"internal-error"),c.parameters.sitekey=u})()}getAssertedRecaptcha(){return Y(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Fc{constructor(c,u){this.verificationId=c,this.onConfirmation=u}confirm(c){const u=oe._fromVerification(this.verificationId,c);return this.onConfirmation(u)}}function Yd(){return(Yd=(0,b.Z)(function*(h,c,u){const f=en(h),m=yield cl(f,c,(0,$.m9)(u));return new Fc(m,y=>Tc(f,y))})).apply(this,arguments)}function Jd(){return(Jd=(0,b.Z)(function*(h,c,u){const f=(0,$.m9)(h);yield Ai(!1,f,"phone");const m=yield cl(f.auth,c,(0,$.m9)(u));return new Fc(m,y=>Qp(f,y))})).apply(this,arguments)}function Lc(){return(Lc=(0,b.Z)(function*(h,c,u){const f=(0,$.m9)(h),m=yield cl(f.auth,c,(0,$.m9)(u));return new Fc(m,y=>Jp(f,y))})).apply(this,arguments)}function cl(h,c,u){return xt.apply(this,arguments)}function xt(){return xt=(0,b.Z)(function*(h,c,u){var f;const m=yield u.verify();try{let y;if(Y("string"==typeof m,h,"argument-error"),Y(u.type===$n,h,"argument-error"),y="string"==typeof c?{phoneNumber:c}:c,"session"in y){const D=y.session;if("phoneNumber"in y)return Y("enroll"===D.type,h,"internal-error"),(yield function tT(h,c){return H(h,"POST","/v2/accounts/mfaEnrollment:start",X(h,c))}(h,{idToken:D.credential,phoneEnrollmentInfo:{phoneNumber:y.phoneNumber,recaptchaToken:m}})).phoneSessionInfo.sessionInfo;{Y("signin"===D.type,h,"internal-error");const x=(null===(f=y.multiFactorHint)||void 0===f?void 0:f.uid)||y.multiFactorUid;return Y(x,h,"missing-multi-factor-info"),(yield function Kd(h,c){return H(h,"POST","/v2/accounts/mfaSignIn:start",X(h,c))}(h,{mfaPendingCredential:D.credential,mfaEnrollmentId:x,phoneSignInInfo:{recaptchaToken:m}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:D}=yield function cy(h,c){return Sd.apply(this,arguments)}(h,{phoneNumber:y.phoneNumber,recaptchaToken:m});return D}}finally{u._reset()}}),xt.apply(this,arguments)}function ra(){return(ra=(0,b.Z)(function*(h,c){yield xd((0,$.m9)(h),c)})).apply(this,arguments)}let Gn=(()=>{class h{constructor(u){this.providerId=h.PROVIDER_ID,this.auth=en(u)}verifyPhoneNumber(u,f){return cl(this.auth,u,(0,$.m9)(f))}static credential(u,f){return oe._fromVerification(u,f)}static credentialFromResult(u){return h.credentialFromTaggedObject(u)}static credentialFromError(u){return h.credentialFromTaggedObject(u.customData||{})}static credentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{phoneNumber:f,temporaryProof:m}=u;return f&&m?oe._fromTokenResponse(f,m):null}}return h.PROVIDER_ID="phone",h.PHONE_SIGN_IN_METHOD="phone",h})();function bo(h,c){return c?Ze(c):(Y(h._popupRedirectResolver,h,"argument-error"),h._popupRedirectResolver)}class Vc extends is{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Vi(c,this._buildIdpRequest())}_linkToIdToken(c,u){return Vi(c,this._buildIdpRequest(u))}_getReauthenticationResolver(c){return Vi(c,this._buildIdpRequest())}_buildIdpRequest(c){const u={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(u.idToken=c),u}}function sa(h){return Yp(h.auth,new Vc(h),h.bypassAuthState)}function Hi(h){const{auth:c,user:u}=h;return Y(u,c,"internal-error"),Fd(u,new Vc(h),h.bypassAuthState)}function Ty(h){return eh.apply(this,arguments)}function eh(){return(eh=(0,b.Z)(function*(h){const{auth:c,user:u}=h;return Y(u,c,"internal-error"),xd(u,new Vc(h),h.bypassAuthState)})).apply(this,arguments)}class yg{constructor(c,u,f,m,y=!1){this.auth=c,this.resolver=f,this.user=m,this.bypassAuthState=y,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(u)?u:[u]}execute(){var c=this;return new Promise(function(){var u=(0,b.Z)(function*(f,m){c.pendingPromise={resolve:f,reject:m};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(y){c.reject(y)}});return function(f,m){return u.apply(this,arguments)}}())}onAuthEvent(c){var u=this;return(0,b.Z)(function*(){const{urlResponse:f,sessionId:m,postBody:y,tenantId:D,error:x,type:K}=c;if(x)return void u.reject(x);const fe={auth:u.auth,requestUri:f,sessionId:m,tenantId:D||void 0,postBody:y||void 0,user:u.user,bypassAuthState:u.bypassAuthState};try{u.resolve(yield u.getIdpTask(K)(fe))}catch(_e){u.reject(_e)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return sa;case"linkViaPopup":case"linkViaRedirect":return Ty;case"reauthViaPopup":case"reauthViaRedirect":return Hi;default:qe(this.auth,"internal-error")}}resolve(c){$t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){$t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $s=new er(2e3,1e4);function th(){return(th=(0,b.Z)(function*(h,c,u){const f=en(h);Ue(h,c,ss);const m=bo(f,u);return new Re(f,"signInViaPopup",c,m).executeNotNull()})).apply(this,arguments)}function Bc(){return(Bc=(0,b.Z)(function*(h,c,u){const f=(0,$.m9)(h);Ue(f.auth,c,ss);const m=bo(f.auth,u);return new Re(f.auth,"reauthViaPopup",c,m,f).executeNotNull()})).apply(this,arguments)}function nh(){return(nh=(0,b.Z)(function*(h,c,u){const f=(0,$.m9)(h);Ue(f.auth,c,ss);const m=bo(f.auth,u);return new Re(f.auth,"linkViaPopup",c,m,f).executeNotNull()})).apply(this,arguments)}let Re=(()=>{class h extends yg{constructor(u,f,m,y,D){super(u,f,y,D),this.provider=m,this.authWindow=null,this.pollId=null,h.currentPopupAction&&h.currentPopupAction.cancel(),h.currentPopupAction=this}executeNotNull(){var u=this;return(0,b.Z)(function*(){const f=yield u.execute();return Y(f,u.auth,"internal-error"),f})()}onExecution(){var u=this;return(0,b.Z)(function*(){$t(1===u.filter.length,"Popup operations only handle one event");const f=Us();u.authWindow=yield u.resolver._openPopup(u.auth,u.provider,u.filter[0],f),u.authWindow.associatedEvent=f,u.resolver._originValidation(u.auth).catch(m=>{u.reject(m)}),u.resolver._isIframeWebStorageSupported(u.auth,m=>{m||u.reject(It(u.auth,"web-storage-unsupported"))}),u.pollUserCancellation()})()}get eventId(){var u;return(null===(u=this.authWindow)||void 0===u?void 0:u.associatedEvent)||null}cancel(){this.reject(It(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,h.currentPopupAction=null}pollUserCancellation(){const u=()=>{var f,m;this.pollId=null!==(m=null===(f=this.authWindow)||void 0===f?void 0:f.window)&&void 0!==m&&m.closed?window.setTimeout(()=>{this.pollId=null,this.reject(It(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(u,$s.get())};u()}}return h.currentPopupAction=null,h})();const Dg="pendingRedirect",Uc=new Map;class Iy extends yg{constructor(c,u,f=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],u,void 0,f),this.eventId=null}execute(){var c=()=>super.execute,u=this;return(0,b.Z)(function*(){let f=Uc.get(u.auth._key());if(!f){try{const y=(yield function Sy(h,c){return ih.apply(this,arguments)}(u.resolver,u.auth))?yield c().call(u):null;f=()=>Promise.resolve(y)}catch(m){f=()=>Promise.reject(m)}Uc.set(u.auth._key(),f)}return u.bypassAuthState||Uc.set(u.auth._key(),()=>Promise.resolve(null)),f()})()}onAuthEvent(c){var u=()=>super.onAuthEvent,f=this;return(0,b.Z)(function*(){if("signInViaRedirect"===c.type)return u().call(f,c);if("unknown"!==c.type){if(c.eventId){const m=yield f.auth._redirectUserForId(c.eventId);if(m)return f.user=m,u().call(f,c);f.resolve(null)}}else f.resolve(null)})()}onExecution(){return(0,b.Z)(function*(){})()}cleanUp(){}}function ih(){return(ih=(0,b.Z)(function*(h,c){const u=Tg(c),f=Cg(h);if(!(yield f._isAvailable()))return!1;const m="true"===(yield f._get(u));return yield f._remove(u),m})).apply(this,arguments)}function jc(h,c){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,b.Z)(function*(h,c){return Cg(h)._set(Tg(c),"true")})).apply(this,arguments)}function rh(h,c){Uc.set(h._key(),c)}function Cg(h){return Ze(h._redirectPersistence)}function Tg(h){return jn(Dg,h.config.apiKey,h.name)}function Ay(h,c,u){return function ne(h,c,u){return ut.apply(this,arguments)}(h,c,u)}function ut(){return(ut=(0,b.Z)(function*(h,c,u){const f=en(h);Ue(h,c,ss),yield f._initializationPromise;const m=bo(f,u);return yield jc(m,f),m._openRedirect(f,c,"signInViaRedirect")})).apply(this,arguments)}function ir(h,c,u){return function rr(h,c,u){return Vn.apply(this,arguments)}(h,c,u)}function Vn(){return(Vn=(0,b.Z)(function*(h,c,u){const f=(0,$.m9)(h);Ue(f.auth,c,ss),yield f.auth._initializationPromise;const m=bo(f.auth,u);yield jc(m,f.auth);const y=yield oh(f);return m._openRedirect(f.auth,c,"reauthViaRedirect",y)})).apply(this,arguments)}function Ig(h,c,u){return function ul(h,c,u){return sr.apply(this,arguments)}(h,c,u)}function sr(){return(sr=(0,b.Z)(function*(h,c,u){const f=(0,$.m9)(h);Ue(f.auth,c,ss),yield f.auth._initializationPromise;const m=bo(f.auth,u);yield Ai(!1,f,c.providerId),yield jc(m,f.auth);const y=yield oh(f);return m._openRedirect(f.auth,c,"linkViaRedirect",y)})).apply(this,arguments)}function dl(){return(dl=(0,b.Z)(function*(h,c){return yield en(h)._initializationPromise,Hc(h,c,!1)})).apply(this,arguments)}function Hc(h,c){return Sg.apply(this,arguments)}function Sg(){return(Sg=(0,b.Z)(function*(h,c,u=!1){const f=en(h),m=bo(f,c),D=yield new Iy(f,m,u).execute();return D&&!u&&(delete D.user._redirectEventId,yield f._persistUserIfCurrent(D.user),yield f._setRedirectUser(null,c)),D})).apply(this,arguments)}function oh(h){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,b.Z)(function*(h){const c=Us(`${h.uid}:::`);return h._redirectEventId=c,yield h.auth._setRedirectUser(h),yield h.auth._persistUserIfCurrent(h),c})).apply(this,arguments)}class ah{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let u=!1;return this.consumers.forEach(f=>{this.isEventForConsumer(c,f)&&(u=!0,this.sendToConsumer(c,f),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Ry(h){switch(h.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ur(h);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,u||(this.queuedRedirectEvent=c,u=!0)),u}sendToConsumer(c,u){var f;if(c.error&&!Ur(c)){const m=(null===(f=c.error.code)||void 0===f?void 0:f.split("auth/")[1])||"internal-error";u.onError(It(this.auth,m))}else u.onAuthEvent(c)}isEventForConsumer(c,u){const f=null===u.eventId||!!c.eventId&&c.eventId===u.eventId;return u.filter.includes(c.type)&&f}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(wo(c))}saveEventToCache(c){this.cachedEventUids.add(wo(c)),this.lastProcessedEventTime=Date.now()}}function wo(h){return[h.type,h.eventId,h.sessionId,h.tenantId].filter(c=>c).join("-")}function Ur({type:h,error:c}){return"unknown"===h&&"auth/no-auth-event"===c?.code}function lh(h){return ch.apply(this,arguments)}function ch(){return(ch=(0,b.Z)(function*(h,c={}){return H(h,"GET","/v1/projects",c)})).apply(this,arguments)}const My=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uh=/^https?/;function $c(){return($c=(0,b.Z)(function*(h){if(h.config.emulator)return;const{authorizedDomains:c}=yield lh(h);for(const u of c)try{if(hh(u))return}catch{}qe(h,"unauthorized-domain")})).apply(this,arguments)}function hh(h){const c=ln(),{protocol:u,hostname:f}=new URL(c);if(h.startsWith("chrome-extension://")){const D=new URL(h);return""===D.hostname&&""===f?"chrome-extension:"===u&&h.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===u&&D.hostname===f}if(!uh.test(u))return!1;if(My.test(h))return f===h;const m=h.replace(/\./g,"\\.");return new RegExp("^(.+\\."+m+"|"+m+")$","i").test(f)}const Oy=new er(3e4,6e4);function fh(){const h=yn().___jsl;if(h?.H)for(const c of Object.keys(h.H))if(h.H[c].r=h.H[c].r||[],h.H[c].L=h.H[c].L||[],h.H[c].r=[...h.H[c].L],h.CP)for(let u=0;u<h.CP.length;u++)h.CP[u]=null}let hl=null;const Ag=new er(5e3,15e3),Rg="__/auth/iframe",gh="emulator/auth/iframe",xy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Py=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mi(h){const c=h.config;Y(c.authDomain,h,"auth-domain-config-required");const u=c.emulator?V(c,gh):`https://${h.config.authDomain}/${Rg}`,f={apiKey:c.apiKey,appName:h.name,v:Me.SDK_VERSION},m=Py.get(h.config.apiHost);m&&(f.eid=m);const y=h._getFrameworks();return y.length&&(f.fw=y.join(",")),`${u}?${(0,$.xO)(f).slice(1)}`}function qt(){return qt=(0,b.Z)(function*(h){const c=yield function Ng(h){return hl=hl||function ph(h){return new Promise((c,u)=>{var f,m,y;function D(){fh(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{fh(),u(It(h,"network-request-failed"))},timeout:Oy.get()})}if(null!==(m=null===(f=yn().gapi)||void 0===f?void 0:f.iframes)&&void 0!==m&&m.Iframe)c(gapi.iframes.getContext());else{if(null===(y=yn().gapi)||void 0===y||!y.load){const x=iy("iframefcb");return yn()[x]=()=>{gapi.load?D():u(It(h,"network-request-failed"))},Fp(`https://apis.google.com/js/api.js?onload=${x}`).catch(K=>u(K))}D()}}).catch(c=>{throw hl=null,c})}(h),hl}(h),u=yn().gapi;return Y(u,h,"internal-error"),c.open({where:document.body,url:mi(h),messageHandlersFilter:u.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xy,dontclear:!0},f=>new Promise(function(){var m=(0,b.Z)(function*(y,D){yield f.restyle({setHideOnLeave:!1});const x=It(h,"network-request-failed"),K=yn().setTimeout(()=>{D(x)},Ag.get());function fe(){yn().clearTimeout(K),y(f)}f.ping(fe).then(fe,()=>{D(x)})});return function(y,D){return m.apply(this,arguments)}}()))}),qt.apply(this,arguments)}const ky={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class mh{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const By="__/auth/handler",Wc="emulator/auth/handler",zc=encodeURIComponent("fac");function oa(h,c,u,f,m,y){return fl.apply(this,arguments)}function fl(){return(fl=(0,b.Z)(function*(h,c,u,f,m,y){Y(h.config.authDomain,h,"auth-domain-config-required"),Y(h.config.apiKey,h,"invalid-api-key");const D={apiKey:h.config.apiKey,appName:h.name,authType:u,redirectUrl:f,v:Me.SDK_VERSION,eventId:m};if(c instanceof ss){c.setDefaultLanguage(h.languageCode),D.providerId=c.providerId||"",(0,$.xb)(c.getCustomParameters())||(D.customParameters=JSON.stringify(c.getCustomParameters()));for(const[_e,ye]of Object.entries(y||{}))D[_e]=ye}if(c instanceof Ni){const _e=c.getScopes().filter(ye=>""!==ye);_e.length>0&&(D.scopes=_e.join(","))}h.tenantId&&(D.tid=h.tenantId);const x=D;for(const _e of Object.keys(x))void 0===x[_e]&&delete x[_e];const K=yield h._getAppCheckToken(),fe=K?`#${zc}=${encodeURIComponent(K)}`:"";return`${function Og({config:h}){return h.emulator?V(h,Wc):`https://${h.authDomain}/${By}`}(h)}?${(0,$.xO)(x).slice(1)}${fe}`})).apply(this,arguments)}const qc="webStorageSupport",Do=class Uy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yo,this._completeRedirectFn=Hc,this._overrideRedirectResult=rh}_openPopup(c,u,f,m){var y=this;return(0,b.Z)(function*(){var D;$t(null===(D=y.eventManagers[c._key()])||void 0===D?void 0:D.manager,"_initialize() not called before _openPopup()");const x=yield oa(c,u,f,ln(),m);return function Gc(h,c,u,f=500,m=600){const y=Math.max((window.screen.availHeight-m)/2,0).toString(),D=Math.max((window.screen.availWidth-f)/2,0).toString();let x="";const K=Object.assign(Object.assign({},ky),{width:f.toString(),height:m.toString(),top:y,left:D}),fe=(0,$.z$)().toLowerCase();u&&(x=gc(fe)?"_blank":u),Vt(fe)&&(c=c||"http://localhost",K.scrollbars="yes");const _e=Object.entries(K).reduce((pn,[_r,ru])=>`${pn}${_r}=${ru},`,"");if(function G(h=(0,$.z$)()){var c;return Be(h)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(fe)&&"_self"!==x)return function Ws(h,c){const u=document.createElement("a");u.href=h,u.target=c;const f=document.createEvent("MouseEvent");f.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),u.dispatchEvent(f)}(c||"",x),new mh(null);const ye=window.open(c||"",x,_e);Y(ye,h,"popup-blocked");try{ye.focus()}catch{}return new mh(ye)}(c,x,Us())})()}_openRedirect(c,u,f,m){var y=this;return(0,b.Z)(function*(){return yield y._originValidation(c),function ag(h){yn().location.href=h}(yield oa(c,u,f,ln(),m)),new Promise(()=>{})})()}_initialize(c){const u=c._key();if(this.eventManagers[u]){const{manager:m,promise:y}=this.eventManagers[u];return m?Promise.resolve(m):($t(y,"If manager is not set, promise should be"),y)}const f=this.initAndGetManager(c);return this.eventManagers[u]={promise:f},f.catch(()=>{delete this.eventManagers[u]}),f}initAndGetManager(c){var u=this;return(0,b.Z)(function*(){const f=yield function Eo(h){return qt.apply(this,arguments)}(c),m=new ah(c);return f.register("authEvent",y=>(Y(y?.authEvent,c,"invalid-auth-event"),{status:m.onEvent(y.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),u.eventManagers[c._key()]={manager:m},u.iframes[c._key()]=f,m})()}_isIframeWebStorageSupported(c,u){this.iframes[c._key()].send(qc,{type:qc},m=>{var y;const D=null===(y=m?.[0])||void 0===y?void 0:y[qc];void 0!==D&&u(!!D),qe(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const u=c._key();return this.originValidationPromises[u]||(this.originValidationPromises[u]=function dh(h){return $c.apply(this,arguments)}(c)),this.originValidationPromises[u]}get _shouldInitProactively(){return be()||Ar()||Be()}};class pl{constructor(c){this.factorId=c}_process(c,u,f){switch(u.type){case"enroll":return this._finalizeEnroll(c,u.credential,f);case"signin":return this._finalizeSignIn(c,u.credential);default:return Ht("unexpected MultiFactorSessionType")}}}class _h extends pl{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new _h(c)}_finalizeEnroll(c,u,f){return function nT(h,c){return H(h,"POST","/v2/accounts/mfaEnrollment:finalize",X(h,c))}(c,{idToken:u,displayName:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,u){return function dT(h,c){return H(h,"POST","/v2/accounts/mfaSignIn:finalize",X(h,c))}(c,{mfaPendingCredential:u,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let pT=(()=>{class h{constructor(){}static assertion(u){return _h._fromCredential(u)}}return h.FACTOR_ID="phone",h})();var jy="@firebase/auth";class vh{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var u=this;return(0,b.Z)(function*(){return u.assertAuthConfigured(),yield u.auth._initializationPromise,u.auth.currentUser?{accessToken:yield u.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const u=this.auth.onIdTokenChanged(f=>{c(f?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,u),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const u=this.internalListeners.get(c);u&&(this.internalListeners.delete(c),u(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function zs(){return window}(0,$.Pz)("authIdTokenMaxAge"),function $y(h){(0,Me._registerComponent)(new Qt.wA("auth",(c,{options:u})=>{const f=c.getProvider("app").getImmediate(),m=c.getProvider("heartbeat"),y=c.getProvider("app-check-internal"),{apiKey:D,authDomain:x}=f.options;Y(D&&!D.includes(":"),"invalid-api-key",{appName:f.name});const K={apiKey:D,authDomain:x,clientPlatform:h,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qo(h)},fe=new ny(f,m,y,K);return function WC(h,c){const u=c?.persistence||[],f=(Array.isArray(u)?u:[u]).map(Ze);c?.errorMap&&h._updateErrorMap(c.errorMap),h._initializeWithPersistence(f,c?.popupRedirectResolver)}(fe,u),fe},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,u,f)=>{c.getProvider("auth-internal").initialize()})),(0,Me._registerComponent)(new Qt.wA("auth-internal",c=>{const u=en(c.getProvider("auth").getImmediate());return new vh(u)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Me.registerVersion)(jy,"1.4.0",function gl(h){switch(h){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(h)),(0,Me.registerVersion)(jy,"1.4.0","esm2017")}("Browser");function bh(){return bh=(0,b.Z)(function*(h,c,u){var f;const{BuildInfo:m}=zs();$t(c.sessionId,"AuthEvent did not contain a session ID");const y=yield function Lg(h){return Qc.apply(this,arguments)}(c.sessionId),D={};return Be()?D.ibi=m.packageName:N()?D.apn=m.packageName:qe(h,"operation-not-supported-in-this-environment"),m.displayName&&(D.appDisplayName=m.displayName),D.sessionId=y,oa(h,u,c.type,void 0,null!==(f=c.eventId)&&void 0!==f?f:void 0,D)}),bh.apply(this,arguments)}function vl(){return(vl=(0,b.Z)(function*(h){const{BuildInfo:c}=zs(),u={};Be()?u.iosBundleId=c.packageName:N()?u.androidPackageName=c.packageName:qe(h,"operation-not-supported-in-this-environment"),yield lh(h,u)})).apply(this,arguments)}function yl(){return(yl=(0,b.Z)(function*(h,c,u){const{cordova:f}=zs();let m=()=>{};try{yield new Promise((y,D)=>{let x=null;function K(){var ye;y();const pn=null===(ye=f.plugins.browsertab)||void 0===ye?void 0:ye.close;"function"==typeof pn&&pn(),"function"==typeof u?.close&&u.close()}function fe(){x||(x=window.setTimeout(()=>{D(It(h,"redirect-cancelled-by-user"))},2e3))}function _e(){"visible"===document?.visibilityState&&fe()}c.addPassiveListener(K),document.addEventListener("resume",fe,!1),N()&&document.addEventListener("visibilitychange",_e,!1),m=()=>{c.removePassiveListener(K),document.removeEventListener("resume",fe,!1),document.removeEventListener("visibilitychange",_e,!1),x&&window.clearTimeout(x)}})}finally{m()}})).apply(this,arguments)}function Qc(){return(Qc=(0,b.Z)(function*(h){const c=function Vg(h){if($t(/[0-9a-zA-Z]+/.test(h),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(h);const c=new ArrayBuffer(h.length),u=new Uint8Array(c);for(let f=0;f<h.length;f++)u[f]=h.charCodeAt(f);return u}(h),u=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(u)).map(m=>m.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class qy extends ah{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(u=>u(c)),super.onEvent(c)}initialized(){var c=this;return(0,b.Z)(function*(){yield c.initPromise})()}}function Ug(h){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,b.Z)(function*(h){const c=yield wh()._get(Jn(h));return c&&(yield wh()._remove(Jn(h))),c})).apply(this,arguments)}function bl(){const h=[];for(let u=0;u<20;u++){const f=Math.floor(62*Math.random());h.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(f))}return h.join("")}function wh(){return Ze(Vr)}function Jn(h){return jn("authEvent",h.config.apiKey,h.name)}function aa(h){if(!h?.includes("?"))return{};const[c,...u]=h.split("?");return(0,$.zd)(u.join("?"))}const To=class Hg{constructor(){this._redirectPersistence=yo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Hc,this._overrideRedirectResult=rh}_initialize(c){var u=this;return(0,b.Z)(function*(){const f=c._key();let m=u.eventManagers.get(f);return m||(m=new qy(c),u.eventManagers.set(f,m),u.attachCallbackListeners(c,m)),m})()}_openPopup(c){qe(c,"operation-not-supported-in-this-environment")}_openRedirect(c,u,f,m){var y=this;return(0,b.Z)(function*(){!function zy(h){var c,u,f,m,y,D,x,K,fe,_e;const ye=zs();Y("function"==typeof(null===(c=ye?.universalLinks)||void 0===c?void 0:c.subscribe),h,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Y(typeof(null===(u=ye?.BuildInfo)||void 0===u?void 0:u.packageName)<"u",h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Y("function"==typeof(null===(y=null===(m=null===(f=ye?.cordova)||void 0===f?void 0:f.plugins)||void 0===m?void 0:m.browsertab)||void 0===y?void 0:y.openUrl),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Y("function"==typeof(null===(K=null===(x=null===(D=ye?.cordova)||void 0===D?void 0:D.plugins)||void 0===x?void 0:x.browsertab)||void 0===K?void 0:K.isAvailable),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Y("function"==typeof(null===(_e=null===(fe=ye?.cordova)||void 0===fe?void 0:fe.InAppBrowser)||void 0===_e?void 0:_e.open),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const D=yield y._initialize(c);yield D.initialized(),D.resetRedirect(),function Ny(){Uc.clear()}(),yield y._originValidation(c);const x=function Jc(h,c,u=null){return{type:c,eventId:u,urlResponse:null,sessionId:bl(),postBody:null,tenantId:h.tenantId,error:It(h,"no-auth-event")}}(c,f,m);yield function Co(h,c){return wh()._set(Jn(h),c)}(c,x);const K=yield function jr(h,c,u){return bh.apply(this,arguments)}(c,x,u),fe=yield function Fg(h){const{cordova:c}=zs();return new Promise(u=>{c.plugins.browsertab.isAvailable(f=>{let m=null;f?c.plugins.browsertab.openUrl(h):m=c.InAppBrowser.open(h,function Je(h=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(h)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(h)}()?"_blank":"_system","location=yes"),u(m)})})}(K);return function Yc(h,c,u){return yl.apply(this,arguments)}(c,D,fe)})()}_isIframeWebStorageSupported(c,u){throw new Error("Method not implemented.")}_originValidation(c){const u=c._key();return this.originValidationPromises[u]||(this.originValidationPromises[u]=function Kc(h){return vl.apply(this,arguments)}(c)),this.originValidationPromises[u]}attachCallbackListeners(c,u){const{universalLinks:f,handleOpenURL:m,BuildInfo:y}=zs(),D=setTimeout((0,b.Z)(function*(){yield Ug(c),u.onEvent(Io())}),500),x=function(){var _e=(0,b.Z)(function*(ye){clearTimeout(D);const pn=yield Ug(c);let _r=null;pn&&ye?.url&&(_r=function jg(h,c){var u,f;const m=function bn(h){const c=aa(h),u=c.link?decodeURIComponent(c.link):void 0,f=aa(u).link,m=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return aa(m).link||m||f||u||h}(c);if(m.includes("/__/auth/callback")){const y=aa(m),D=y.firebaseError?function Zy(h){try{return JSON.parse(h)}catch{return null}}(decodeURIComponent(y.firebaseError)):null,x=null===(f=null===(u=D?.code)||void 0===u?void 0:u.split("auth/"))||void 0===f?void 0:f[1],K=x?It(x):null;return K?{type:h.type,eventId:h.eventId,tenantId:h.tenantId,error:K,urlResponse:null,sessionId:null,postBody:null}:{type:h.type,eventId:h.eventId,tenantId:h.tenantId,sessionId:h.sessionId,urlResponse:m,postBody:null}}return null}(pn,ye.url)),u.onEvent(_r||Io())});return function(pn){return _e.apply(this,arguments)}}();typeof f<"u"&&"function"==typeof f.subscribe&&f.subscribe(null,x);const K=m,fe=`${y.packageName.toLowerCase()}://`;zs().handleOpenURL=function(){var _e=(0,b.Z)(function*(ye){if(ye.toLowerCase().startsWith(fe)&&x({url:ye}),"function"==typeof K)try{K(ye)}catch(pn){console.error(pn)}});return function(ye){return _e.apply(this,arguments)}}()}};function Io(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:It("no-auth-event")}}function Hr(){var h;return(null===(h=self?.location)||void 0===h?void 0:h.protocol)||null}function Gg(h=(0,$.z$)()){return!("file:"!==Hr()&&"ionic:"!==Hr()&&"capacitor:"!==Hr()||!h.toLowerCase().match(/iphone|ipad|ipod|android/))}function Yy(){try{const h=self.localStorage,c=Us();if(h)return h.setItem(c,"1"),h.removeItem(c),!function bT(h=(0,$.z$)()){return function vT(){return(0,$.w1)()&&11===document?.documentMode}()||function yT(h=(0,$.z$)()){return/Edge\/\d+/.test(h)}(h)}()||(0,$.hl)()}catch{return Wg()&&(0,$.hl)()}return!1}function Wg(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function qs(){return(function mT(){return"http:"===Hr()||"https:"===Hr()}()||(0,$.ru)()||Gg())&&!function _T(){return(0,$.b$)()||(0,$.UG)()}()&&Yy()&&!Wg()}function zg(){return Gg()&&typeof document<"u"}function wn(){return(wn=(0,b.Z)(function*(){return!!zg()&&new Promise(h=>{const c=setTimeout(()=>{h(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),h(!0)})})})).apply(this,arguments)}const Xn={LOCAL:"local",NONE:"none",SESSION:"session"},wl=Y,$i="persistence";function eu(h){return da.apply(this,arguments)}function da(){return(da=(0,b.Z)(function*(h){yield h._initializationPromise;const c=qg(),u=jn($i,h.config.apiKey,h.name);c&&c.setItem(u,h._getPersistence())})).apply(this,arguments)}function qg(){var h;try{return(null===(h=function Jy(){return typeof window<"u"?window:null}())||void 0===h?void 0:h.sessionStorage)||null}catch{return null}}const wT=Y;class Zs{constructor(){this.browserResolver=Ze(Do),this.cordovaResolver=Ze(To),this.underlyingResolver=null,this._redirectPersistence=yo,this._completeRedirectFn=Hc,this._overrideRedirectResult=rh}_initialize(c){var u=this;return(0,b.Z)(function*(){return yield u.selectUnderlyingResolver(),u.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,u,f,m){var y=this;return(0,b.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._openPopup(c,u,f,m)})()}_openRedirect(c,u,f,m){var y=this;return(0,b.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._openRedirect(c,u,f,m)})()}_isIframeWebStorageSupported(c,u){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,u)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return zg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return wT(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,b.Z)(function*(){if(c.underlyingResolver)return;const u=yield function Qy(){return wn.apply(this,arguments)}();c.underlyingResolver=u?c.cordovaResolver:c.browserResolver})()}}function Xy(h){return h.unwrap()}function Dh(h){return e0(h)}function e0(h){const{_tokenResponse:c}=h instanceof $.ZR?h.customData:h;if(!c)return null;if(!(h instanceof $.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Gn.credentialFromResult(h);const u=c.providerId;if(!u||u===Ye.PASSWORD)return null;let f;switch(u){case Ye.GOOGLE:f=gr;break;case Ye.FACEBOOK:f=tr;break;case Ye.GITHUB:f=_t;break;case Ye.TWITTER:f=Or;break;default:const{oauthIdToken:m,oauthAccessToken:y,oauthTokenSecret:D,pendingToken:x,nonce:K}=c;return y||D||m||x?x?u.startsWith("saml.")?ks._create(u,x):Rr._fromParams({providerId:u,signInMethod:u,pendingToken:x,idToken:m,accessToken:y}):new os(u).credential({idToken:m,accessToken:y,rawNonce:K}):null}return h instanceof $.ZR?f.credentialFromError(h):f.credentialFromResult(h)}function _i(h,c){return c.catch(u=>{throw u instanceof $.ZR&&function ha(h,c){var u;const f=null===(u=c.customData)||void 0===u?void 0:u._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new t0(h,function eT(h,c){var u;const f=(0,$.m9)(h),m=c;return Y(c.customData.operationType,f,"argument-error"),Y(null===(u=m.customData._serverResponse)||void 0===u?void 0:u.mfaPendingCredential,f,"argument-error"),ig._fromError(f,m)}(h,c));else if(f){const m=e0(c),y=c;m&&(y.credential=m,y.tenantId=f.tenantId||void 0,y.email=f.email||void 0,y.phoneNumber=f.phoneNumber||void 0)}}(h,u),u}).then(u=>{const m=u.user;return{operationType:u.operationType,credential:Dh(u),additionalUserInfo:Kn(u),user:cs.getOrCreate(m)}})}function Ch(h,c){return Th.apply(this,arguments)}function Th(){return(Th=(0,b.Z)(function*(h,c){const u=yield c;return{verificationId:u.verificationId,confirm:f=>_i(h,u.confirm(f))}})).apply(this,arguments)}class t0{constructor(c,u){this.resolver=u,this.auth=function Gi(h){return h.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return _i(Xy(this.auth),this.resolver.resolveSignIn(c))}}class cs{constructor(c){this._delegate=c,this.multiFactor=function sT(h){const c=(0,$.m9)(h);return sg.has(c)||sg.set(c,rg._fromUser(c)),sg.get(c)}(c)}static getOrCreate(c){return cs.USER_MAP.has(c)||cs.USER_MAP.set(c,new cs(c)),cs.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var u=this;return(0,b.Z)(function*(){return _i(u.auth,Qp(u._delegate,c))})()}linkWithPhoneNumber(c,u){var f=this;return(0,b.Z)(function*(){return Ch(f.auth,function Qd(h,c,u){return Jd.apply(this,arguments)}(f._delegate,c,u))})()}linkWithPopup(c){var u=this;return(0,b.Z)(function*(){return _i(u.auth,function Eg(h,c,u){return nh.apply(this,arguments)}(u._delegate,c,Zs))})()}linkWithRedirect(c){var u=this;return(0,b.Z)(function*(){return yield eu(en(u.auth)),Ig(u._delegate,c,Zs)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var u=this;return(0,b.Z)(function*(){return _i(u.auth,Jp(u._delegate,c))})()}reauthenticateWithPhoneNumber(c,u){return Ch(this.auth,function Br(h,c,u){return Lc.apply(this,arguments)}(this._delegate,c,u))}reauthenticateWithPopup(c){return _i(this.auth,function wg(h,c,u){return Bc.apply(this,arguments)}(this._delegate,c,Zs))}reauthenticateWithRedirect(c){var u=this;return(0,b.Z)(function*(){return yield eu(en(u.auth)),ir(u._delegate,c,Zs)})()}sendEmailVerification(c){return function Jo(h,c){return cn.apply(this,arguments)}(this._delegate,c)}unlink(c){var u=this;return(0,b.Z)(function*(){return yield function hy(h,c){return Cc.apply(this,arguments)}(u._delegate,c),u})()}updateEmail(c){return function as(h,c){return Xo((0,$.m9)(h),c,null)}(this._delegate,c)}updatePassword(c){return function il(h,c){return Xo((0,$.m9)(h),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function Xd(h,c){return ra.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function tg(h,c){return kr.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,u){return function nl(h,c,u){return Vs.apply(this,arguments)}(this._delegate,c,u)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}cs.USER_MAP=new WeakMap;const Dl=Y;let Zg=(()=>{class h{constructor(u,f){if(this.app=u,f.isInitialized())return this._delegate=f.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:m}=u.options;Dl(m,"invalid-api-key",{appName:u.name}),Dl(m,"invalid-api-key",{appName:u.name});const y=typeof window<"u"?Zs:void 0;this._delegate=f.initialize({options:{persistence:nu(m,u.name),popupRedirectResolver:y}}),this._delegate._updateErrorMap(an),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?cs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(u){this._delegate.languageCode=u}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(u){this._delegate.tenantId=u}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(u,f){!function yt(h,c,u){const f=en(h);Y(f._canInitEmulator,f,"emulator-config-failed"),Y(/^https?:\/\//.test(c),f,"invalid-emulator-scheme");const m=!!u?.disableWarnings,y=Ga(c),{host:D,port:x}=function oy(h){const c=Ga(h),u=/(\/\/)?([^?#/]+)/.exec(h.substr(c.length));if(!u)return{host:"",port:null};const f=u[2].split("@").pop()||"",m=/^(\[[^\]]+\])(:|$)/.exec(f);if(m){const y=m[1];return{host:y,port:Cd(f.substr(y.length+1))}}{const[y,D]=f.split(":");return{host:y,port:Cd(D)}}}(c);f.config.emulator={url:`${y}//${D}${null===x?"":`:${x}`}/`},f.settings.appVerificationDisabledForTesting=!0,f.emulatorConfig=Object.freeze({host:D,port:x,protocol:y.replace(":",""),options:Object.freeze({disableWarnings:m})}),m||function ay(){function h(){const c=document.createElement("p"),u=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",u.position="fixed",u.width="100%",u.backgroundColor="#ffffff",u.border=".1em solid #000000",u.color="#b50000",u.bottom="0px",u.left="0px",u.margin="0px",u.zIndex="10000",u.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h())}()}(this._delegate,u,f)}applyActionCode(u){return function Xp(h,c){return Ko.apply(this,arguments)}(this._delegate,u)}checkActionCode(u){return eg(this._delegate,u)}confirmPasswordReset(u,f){return function Ui(h,c,u){return Nc.apply(this,arguments)}(this._delegate,u,f)}createUserWithEmailAndPassword(u,f){var m=this;return(0,b.Z)(function*(){return _i(m._delegate,function $e(h,c,u){return Gt.apply(this,arguments)}(m._delegate,u,f))})()}fetchProvidersForEmail(u){return this.fetchSignInMethodsForEmail(u)}fetchSignInMethodsForEmail(u){return function tl(h,c){return Ac.apply(this,arguments)}(this._delegate,u)}isSignInWithEmailLink(u){return function Yo(h,c){const u=rs.parseLink(c);return"EMAIL_SIGNIN"===u?.operation}(0,u)}getRedirectResult(){var u=this;return(0,b.Z)(function*(){Dl(qs(),u._delegate,"operation-not-supported-in-this-environment");const f=yield function sh(h,c){return dl.apply(this,arguments)}(u._delegate,Zs);return f?_i(u._delegate,Promise.resolve(f)):{credential:null,user:null}})()}addFrameworkForLogging(u){!function la(h,c){en(h)._logFramework(c)}(this._delegate,u)}onAuthStateChanged(u,f,m){const{next:y,error:D,complete:x}=tu(u,f,m);return this._delegate.onAuthStateChanged(y,D,x)}onIdTokenChanged(u,f,m){const{next:y,error:D,complete:x}=tu(u,f,m);return this._delegate.onIdTokenChanged(y,D,x)}sendSignInLinkToEmail(u,f){return function el(h,c,u){return Hn.apply(this,arguments)}(this._delegate,u,f)}sendPasswordResetEmail(u,f){return function gi(h,c,u){return Ls.apply(this,arguments)}(this._delegate,u,f||void 0)}setPersistence(u){var f=this;return(0,b.Z)(function*(){let m;switch(function ua(h,c){wl(Object.values(Xn).includes(c),h,"invalid-persistence-type"),(0,$.b$)()?wl(c!==Xn.SESSION,h,"unsupported-persistence-type"):(0,$.UG)()?wl(c===Xn.NONE,h,"unsupported-persistence-type"):Wg()?wl(c===Xn.NONE||c===Xn.LOCAL&&(0,$.hl)(),h,"unsupported-persistence-type"):wl(c===Xn.NONE||Yy(),h,"unsupported-persistence-type")}(f._delegate,u),u){case Xn.SESSION:m=yo;break;case Xn.LOCAL:m=(yield Ze(ia)._isAvailable())?ia:Vr;break;case Xn.NONE:m=Xt;break;default:return qe("argument-error",{appName:f._delegate.name})}return f._delegate.setPersistence(m)})()}signInAndRetrieveDataWithCredential(u){return this.signInWithCredential(u)}signInAnonymously(){return _i(this._delegate,function Kp(h){return Dc.apply(this,arguments)}(this._delegate))}signInWithCredential(u){return _i(this._delegate,Tc(this._delegate,u))}signInWithCustomToken(u){return _i(this._delegate,function py(h,c){return bt.apply(this,arguments)}(this._delegate,u))}signInWithEmailAndPassword(u,f){return _i(this._delegate,function mr(h,c,u){return Tc((0,$.m9)(h),Ad.credential(c,u)).catch(function(){var f=(0,b.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&ct(h),m});return function(m){return f.apply(this,arguments)}}())}(this._delegate,u,f))}signInWithEmailLink(u,f){return _i(this._delegate,function vn(h,c,u){return xr.apply(this,arguments)}(this._delegate,u,f))}signInWithPhoneNumber(u,f){return Ch(this._delegate,function vg(h,c,u){return Yd.apply(this,arguments)}(this._delegate,u,f))}signInWithPopup(u){var f=this;return(0,b.Z)(function*(){return Dl(qs(),f._delegate,"operation-not-supported-in-this-environment"),_i(f._delegate,function bg(h,c,u){return th.apply(this,arguments)}(f._delegate,u,Zs))})()}signInWithRedirect(u){var f=this;return(0,b.Z)(function*(){return Dl(qs(),f._delegate,"operation-not-supported-in-this-environment"),yield eu(f._delegate),Ay(f._delegate,u,Zs)})()}updateCurrentUser(u){return this._delegate.updateCurrentUser(u)}verifyPasswordResetCode(u){return function fn(h,c){return pe.apply(this,arguments)}(this._delegate,u)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return h.Persistence=Xn,h})();function tu(h,c,u){let f=h;"function"!=typeof h&&({next:f,error:c,complete:u}=h);const m=f;return{next:D=>m(D&&cs.getOrCreate(D)),error:c,complete:u}}function nu(h,c){const u=function El(h,c){const u=qg();if(!u)return[];const f=jn($i,h,c);switch(u.getItem(f)){case Xn.NONE:return[Xt];case Xn.LOCAL:return[ia,yo];case Xn.SESSION:return[yo];default:return[]}}(h,c);if(typeof self<"u"&&!u.includes(ia)&&u.push(ia),typeof window<"u")for(const f of[Vr,yo])u.includes(f)||u.push(f);return u.includes(Xt)||u.push(Xt),u}class Ih{constructor(){this.providerId="phone",this._delegate=new Gn(Xy(Te.Z.auth()))}static credential(c,u){return Gn.credential(c,u)}verifyPhoneNumber(c,u){return this._delegate.verifyPhoneNumber(c,u)}unwrap(){return this._delegate}}Ih.PHONE_SIGN_IN_METHOD=Gn.PHONE_SIGN_IN_METHOD,Ih.PROVIDER_ID=Gn.PROVIDER_ID;const Cl=Y;class n0{constructor(c,u,f=Te.Z.app()){var m;Cl(null===(m=f.options)||void 0===m?void 0:m.apiKey,"invalid-api-key",{appName:f.name}),this._delegate=new Dy(f.auth(),c,u),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function r0(h){h.INTERNAL.registerComponent(new Qt.wA("auth-compat",c=>{const u=c.getProvider("app-compat").getImmediate(),f=c.getProvider("auth");return new Zg(u,f)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ad,FacebookAuthProvider:tr,GithubAuthProvider:_t,GoogleAuthProvider:gr,OAuthProvider:os,SAMLAuthProvider:Ja,PhoneAuthProvider:Ih,PhoneMultiFactorGenerator:pT,RecaptchaVerifier:n0,TwitterAuthProvider:Or,Auth:Zg,AuthCredential:is,Error:$.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),h.registerVersion("@firebase/auth-compat","0.4.9")}(Te.Z)},861:(ki,In,ke)=>{function b($,Me,et,Wt,Qt,Pn,Ye){try{var J=$[Pn](Ye),re=J.value}catch(ge){return void et(ge)}J.done?Me(re):Promise.resolve(re).then(Wt,Qt)}function Te($){return function(){var Me=this,et=arguments;return new Promise(function(Wt,Qt){var Pn=$.apply(Me,et);function Ye(re){b(Pn,Wt,Qt,Ye,J,"next",re)}function J(re){b(Pn,Wt,Qt,Ye,J,"throw",re)}Ye(void 0)})}}ke.d(In,{Z:()=>Te})},582:(ki,In,ke)=>{function Me(V,j){var L={};for(var q in V)Object.prototype.hasOwnProperty.call(V,q)&&j.indexOf(q)<0&&(L[q]=V[q]);if(null!=V&&"function"==typeof Object.getOwnPropertySymbols){var X=0;for(q=Object.getOwnPropertySymbols(V);X<q.length;X++)j.indexOf(q[X])<0&&Object.prototype.propertyIsEnumerable.call(V,q[X])&&(L[q[X]]=V[q[X]])}return L}function ge(V,j,L,q){return new(L||(L=Promise))(function(H,ue){function tt(ht){try{we(q.next(ht))}catch(zt){ue(zt)}}function me(ht){try{we(q.throw(ht))}catch(zt){ue(zt)}}function we(ht){ht.done?H(ht.value):function X(H){return H instanceof L?H:new L(function(ue){ue(H)})}(ht.value).then(tt,me)}we((q=q.apply(V,j||[])).next())})}function Ot(V){return this instanceof Ot?(this.v=V,this):new Ot(V)}function qe(V,j,L){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var X,q=L.apply(V,j||[]),H=[];return X={},ue("next"),ue("throw"),ue("return"),X[Symbol.asyncIterator]=function(){return this},X;function ue(St){q[St]&&(X[St]=function(kn){return new Promise(function(un,P){H.push([St,kn,un,P])>1||tt(St,kn)})})}function tt(St,kn){try{!function me(St){St.value instanceof Ot?Promise.resolve(St.value.v).then(we,ht):zt(H[0][2],St)}(q[St](kn))}catch(un){zt(H[0][3],un)}}function we(St){tt("next",St)}function ht(St){tt("throw",St)}function zt(St,kn){St(kn),H.shift(),H.length&&tt(H[0][0],H[0][1])}}function si(V){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var L,j=V[Symbol.asyncIterator];return j?j.call(V):(V=function mt(V){var j="function"==typeof Symbol&&Symbol.iterator,L=j&&V[j],q=0;if(L)return L.call(V);if(V&&"number"==typeof V.length)return{next:function(){return V&&q>=V.length&&(V=void 0),{value:V&&V[q++],done:!V}}};throw new TypeError(j?"Object is not iterable.":"Symbol.iterator is not defined.")}(V),L={},q("next"),q("throw"),q("return"),L[Symbol.asyncIterator]=function(){return this},L);function q(H){L[H]=V[H]&&function(ue){return new Promise(function(tt,me){!function X(H,ue,tt,me){Promise.resolve(me).then(function(we){H({value:we,done:tt})},ue)}(tt,me,(ue=V[H](ue)).done,ue.value)})}}}ke.d(In,{FC:()=>qe,KL:()=>si,_T:()=>Me,mG:()=>ge,qq:()=>Ot}),"function"==typeof SuppressedError&&SuppressedError}},ki=>{var In=b=>ki(ki.s=b);In(614),In(468)}]);